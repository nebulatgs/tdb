var ea=Object.create;var vs=Object.defineProperty;var ia=Object.getOwnPropertyDescriptor;var sa=Object.getOwnPropertyNames;var ra=Object.getPrototypeOf,na=Object.prototype.hasOwnProperty;var L=(i=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(i,{get:(t,e)=>(typeof require<"u"?require:t)[e]}):i)(function(i){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+i+'" is not supported')});var oa=(i,t)=>()=>(i&&(t=i(i=0)),t);var C=(i,t)=>()=>(t||i((t={exports:{}}).exports,t),t.exports);var aa=(i,t,e,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of sa(t))!na.call(i,r)&&r!==e&&vs(i,r,{get:()=>t[r],enumerable:!(s=ia(t,r))||s.enumerable});return i};var Es=(i,t,e)=>(e=i!=null?ea(ra(i)):{},aa(t||!i||!i.__esModule?vs(e,"default",{value:i,enumerable:!0}):e,i));import{createRequire as ca}from"node:module";import ha from"node:path";import la from"node:url";var p=oa(()=>{"use strict";globalThis.require=ca(import.meta.url);globalThis.__filename=la.fileURLToPath(import.meta.url);globalThis.__dirname=ha.dirname(__filename)});var ar=C((ed,or)=>{"use strict";p();or.exports=rr;function rr(i,t,e){i instanceof RegExp&&(i=sr(i,e)),t instanceof RegExp&&(t=sr(t,e));var s=nr(i,t,e);return s&&{start:s[0],end:s[1],pre:e.slice(0,s[0]),body:e.slice(s[0]+i.length,s[1]),post:e.slice(s[1]+t.length)}}function sr(i,t){var e=t.match(i);return e?e[0]:null}rr.range=nr;function nr(i,t,e){var s,r,n,o,a,c=e.indexOf(i),l=e.indexOf(t,c+1),h=c;if(c>=0&&l>0){if(i===t)return[c,l];for(s=[],n=e.length;h>=0&&!a;)h==c?(s.push(h),c=e.indexOf(i,h+1)):s.length==1?a=[s.pop(),l]:(r=s.pop(),r<n&&(n=r,o=l),l=e.indexOf(t,h+1)),h=c<l&&c>=0?c:l;s.length&&(a=[n,o])}return a}});var mr=C((sd,pr)=>{p();var cr=ar();pr.exports=Dc;var hr="\0SLASH"+Math.random()+"\0",lr="\0OPEN"+Math.random()+"\0",ji="\0CLOSE"+Math.random()+"\0",ur="\0COMMA"+Math.random()+"\0",fr="\0PERIOD"+Math.random()+"\0";function Wi(i){return parseInt(i,10)==i?parseInt(i,10):i.charCodeAt(0)}function _c(i){return i.split("\\\\").join(hr).split("\\{").join(lr).split("\\}").join(ji).split("\\,").join(ur).split("\\.").join(fr)}function Nc(i){return i.split(hr).join("\\").split(lr).join("{").split(ji).join("}").split(ur).join(",").split(fr).join(".")}function dr(i){if(!i)return[""];var t=[],e=cr("{","}",i);if(!e)return i.split(",");var s=e.pre,r=e.body,n=e.post,o=s.split(",");o[o.length-1]+="{"+r+"}";var a=dr(n);return n.length&&(o[o.length-1]+=a.shift(),o.push.apply(o,a)),t.push.apply(t,o),t}function Dc(i){return i?(i.substr(0,2)==="{}"&&(i="\\{\\}"+i.substr(2)),he(_c(i),!0).map(Nc)):[]}function Mc(i){return"{"+i+"}"}function Pc(i){return/^-?0\d/.test(i)}function Bc(i,t){return i<=t}function Lc(i,t){return i>=t}function he(i,t){var e=[],s=cr("{","}",i);if(!s)return[i];var r=s.pre,n=s.post.length?he(s.post,!1):[""];if(/\$$/.test(s.pre))for(var o=0;o<n.length;o++){var a=r+"{"+s.body+"}"+n[o];e.push(a)}else{var c=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(s.body),l=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(s.body),h=c||l,u=s.body.indexOf(",")>=0;if(!h&&!u)return s.post.match(/,.*\}/)?(i=s.pre+"{"+s.body+ji+s.post,he(i)):[i];var f;if(h)f=s.body.split(/\.\./);else if(f=dr(s.body),f.length===1&&(f=he(f[0],!1).map(Mc),f.length===1))return n.map(function(x){return s.pre+f[0]+x});var d;if(h){var g=Wi(f[0]),m=Wi(f[1]),y=Math.max(f[0].length,f[1].length),w=f.length==3?Math.abs(Wi(f[2])):1,v=Bc,b=m<g;b&&(w*=-1,v=Lc);var E=f.some(Pc);d=[];for(var F=g;v(F,m);F+=w){var M;if(l)M=String.fromCharCode(F),M==="\\"&&(M="");else if(M=String(F),E){var nt=y-M.length;if(nt>0){var ft=new Array(nt+1).join("0");F<0?M="-"+ft+M.slice(1):M=ft+M}}d.push(M)}}else{d=[];for(var S=0;S<f.length;S++)d.push.apply(d,he(f[S],!1))}for(var S=0;S<d.length;S++)for(var o=0;o<n.length;o++){var a=r+d[S]+n[o];(!t||h||a)&&e.push(a)}}return e}});var $=C(ns=>{"use strict";p();ns.fromCallback=function(i){return Object.defineProperty(function(...t){if(typeof t[t.length-1]=="function")i.apply(this,t);else return new Promise((e,s)=>{t.push((r,n)=>r!=null?s(r):e(n)),i.apply(this,t)})},"name",{value:i.name})};ns.fromPromise=function(i){return Object.defineProperty(function(...t){let e=t[t.length-1];if(typeof e!="function")return i.apply(this,t);t.pop(),i.apply(this,t).then(s=>e(null,s),e)},"name",{value:i.name})}});var nn=C((Mp,rn)=>{p();var Rt=L("constants"),nl=process.cwd,ei=null,ol=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return ei||(ei=nl.call(process)),ei};try{process.cwd()}catch{}typeof process.chdir=="function"&&(os=process.chdir,process.chdir=function(i){ei=null,os.call(process,i)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,os));var os;rn.exports=al;function al(i){Rt.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&t(i),i.lutimes||e(i),i.chown=n(i.chown),i.fchown=n(i.fchown),i.lchown=n(i.lchown),i.chmod=s(i.chmod),i.fchmod=s(i.fchmod),i.lchmod=s(i.lchmod),i.chownSync=o(i.chownSync),i.fchownSync=o(i.fchownSync),i.lchownSync=o(i.lchownSync),i.chmodSync=r(i.chmodSync),i.fchmodSync=r(i.fchmodSync),i.lchmodSync=r(i.lchmodSync),i.stat=a(i.stat),i.fstat=a(i.fstat),i.lstat=a(i.lstat),i.statSync=c(i.statSync),i.fstatSync=c(i.fstatSync),i.lstatSync=c(i.lstatSync),i.chmod&&!i.lchmod&&(i.lchmod=function(h,u,f){f&&process.nextTick(f)},i.lchmodSync=function(){}),i.chown&&!i.lchown&&(i.lchown=function(h,u,f,d){d&&process.nextTick(d)},i.lchownSync=function(){}),ol==="win32"&&(i.rename=typeof i.rename!="function"?i.rename:function(h){function u(f,d,g){var m=Date.now(),y=0;h(f,d,function w(v){if(v&&(v.code==="EACCES"||v.code==="EPERM"||v.code==="EBUSY")&&Date.now()-m<6e4){setTimeout(function(){i.stat(d,function(b,E){b&&b.code==="ENOENT"?h(f,d,w):g(v)})},y),y<100&&(y+=10);return}g&&g(v)})}return Object.setPrototypeOf&&Object.setPrototypeOf(u,h),u}(i.rename)),i.read=typeof i.read!="function"?i.read:function(h){function u(f,d,g,m,y,w){var v;if(w&&typeof w=="function"){var b=0;v=function(E,F,M){if(E&&E.code==="EAGAIN"&&b<10)return b++,h.call(i,f,d,g,m,y,v);w.apply(this,arguments)}}return h.call(i,f,d,g,m,y,v)}return Object.setPrototypeOf&&Object.setPrototypeOf(u,h),u}(i.read),i.readSync=typeof i.readSync!="function"?i.readSync:function(h){return function(u,f,d,g,m){for(var y=0;;)try{return h.call(i,u,f,d,g,m)}catch(w){if(w.code==="EAGAIN"&&y<10){y++;continue}throw w}}}(i.readSync);function t(h){h.lchmod=function(u,f,d){h.open(u,Rt.O_WRONLY|Rt.O_SYMLINK,f,function(g,m){if(g){d&&d(g);return}h.fchmod(m,f,function(y){h.close(m,function(w){d&&d(y||w)})})})},h.lchmodSync=function(u,f){var d=h.openSync(u,Rt.O_WRONLY|Rt.O_SYMLINK,f),g=!0,m;try{m=h.fchmodSync(d,f),g=!1}finally{if(g)try{h.closeSync(d)}catch{}else h.closeSync(d)}return m}}function e(h){Rt.hasOwnProperty("O_SYMLINK")&&h.futimes?(h.lutimes=function(u,f,d,g){h.open(u,Rt.O_SYMLINK,function(m,y){if(m){g&&g(m);return}h.futimes(y,f,d,function(w){h.close(y,function(v){g&&g(w||v)})})})},h.lutimesSync=function(u,f,d){var g=h.openSync(u,Rt.O_SYMLINK),m,y=!0;try{m=h.futimesSync(g,f,d),y=!1}finally{if(y)try{h.closeSync(g)}catch{}else h.closeSync(g)}return m}):h.futimes&&(h.lutimes=function(u,f,d,g){g&&process.nextTick(g)},h.lutimesSync=function(){})}function s(h){return h&&function(u,f,d){return h.call(i,u,f,function(g){l(g)&&(g=null),d&&d.apply(this,arguments)})}}function r(h){return h&&function(u,f){try{return h.call(i,u,f)}catch(d){if(!l(d))throw d}}}function n(h){return h&&function(u,f,d,g){return h.call(i,u,f,d,function(m){l(m)&&(m=null),g&&g.apply(this,arguments)})}}function o(h){return h&&function(u,f,d){try{return h.call(i,u,f,d)}catch(g){if(!l(g))throw g}}}function a(h){return h&&function(u,f,d){typeof f=="function"&&(d=f,f=null);function g(m,y){y&&(y.uid<0&&(y.uid+=4294967296),y.gid<0&&(y.gid+=4294967296)),d&&d.apply(this,arguments)}return f?h.call(i,u,f,g):h.call(i,u,g)}}function c(h){return h&&function(u,f){var d=f?h.call(i,u,f):h.call(i,u);return d&&(d.uid<0&&(d.uid+=4294967296),d.gid<0&&(d.gid+=4294967296)),d}}function l(h){if(!h||h.code==="ENOSYS")return!0;var u=!process.getuid||process.getuid()!==0;return!!(u&&(h.code==="EINVAL"||h.code==="EPERM"))}}});var cn=C((Bp,an)=>{p();var on=L("stream").Stream;an.exports=cl;function cl(i){return{ReadStream:t,WriteStream:e};function t(s,r){if(!(this instanceof t))return new t(s,r);on.call(this);var n=this;this.path=s,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,r=r||{};for(var o=Object.keys(r),a=0,c=o.length;a<c;a++){var l=o[a];this[l]=r[l]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){n._read()});return}i.open(this.path,this.flags,this.mode,function(h,u){if(h){n.emit("error",h),n.readable=!1;return}n.fd=u,n.emit("open",u),n._read()})}function e(s,r){if(!(this instanceof e))return new e(s,r);on.call(this),this.path=s,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,r=r||{};for(var n=Object.keys(r),o=0,a=n.length;o<a;o++){var c=n[o];this[c]=r[c]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=i.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}});var ln=C((Ip,hn)=>{"use strict";p();hn.exports=ll;var hl=Object.getPrototypeOf||function(i){return i.__proto__};function ll(i){if(i===null||typeof i!="object")return i;if(i instanceof Object)var t={__proto__:hl(i)};else var t=Object.create(null);return Object.getOwnPropertyNames(i).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}),t}});var Xt=C((jp,hs)=>{p();var N=L("fs"),ul=nn(),fl=cn(),dl=ln(),ii=L("util"),J,ri;typeof Symbol=="function"&&typeof Symbol.for=="function"?(J=Symbol.for("graceful-fs.queue"),ri=Symbol.for("graceful-fs.previous")):(J="___graceful-fs.queue",ri="___graceful-fs.previous");function pl(){}function dn(i,t){Object.defineProperty(i,J,{get:function(){return t}})}var Bt=pl;ii.debuglog?Bt=ii.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(Bt=function(){var i=ii.format.apply(ii,arguments);i="GFS4: "+i.split(/\n/).join(`
GFS4: `),console.error(i)});N[J]||(un=global[J]||[],dn(N,un),N.close=function(i){function t(e,s){return i.call(N,e,function(r){r||fn(),typeof s=="function"&&s.apply(this,arguments)})}return Object.defineProperty(t,ri,{value:i}),t}(N.close),N.closeSync=function(i){function t(e){i.apply(N,arguments),fn()}return Object.defineProperty(t,ri,{value:i}),t}(N.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){Bt(N[J]),L("assert").equal(N[J].length,0)}));var un;global[J]||dn(global,N[J]);hs.exports=as(dl(N));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!N.__patched&&(hs.exports=as(N),N.__patched=!0);function as(i){ul(i),i.gracefulify=as,i.createReadStream=F,i.createWriteStream=M;var t=i.readFile;i.readFile=e;function e(S,x,k){return typeof x=="function"&&(k=x,x=null),G(S,x,k);function G(z,B,R,D){return t(z,B,function(O){O&&(O.code==="EMFILE"||O.code==="ENFILE")?Zt([G,[z,B,R],O,D||Date.now(),Date.now()]):typeof R=="function"&&R.apply(this,arguments)})}}var s=i.writeFile;i.writeFile=r;function r(S,x,k,G){return typeof k=="function"&&(G=k,k=null),z(S,x,k,G);function z(B,R,D,O,H){return s(B,R,D,function(T){T&&(T.code==="EMFILE"||T.code==="ENFILE")?Zt([z,[B,R,D,O],T,H||Date.now(),Date.now()]):typeof O=="function"&&O.apply(this,arguments)})}}var n=i.appendFile;n&&(i.appendFile=o);function o(S,x,k,G){return typeof k=="function"&&(G=k,k=null),z(S,x,k,G);function z(B,R,D,O,H){return n(B,R,D,function(T){T&&(T.code==="EMFILE"||T.code==="ENFILE")?Zt([z,[B,R,D,O],T,H||Date.now(),Date.now()]):typeof O=="function"&&O.apply(this,arguments)})}}var a=i.copyFile;a&&(i.copyFile=c);function c(S,x,k,G){return typeof k=="function"&&(G=k,k=0),z(S,x,k,G);function z(B,R,D,O,H){return a(B,R,D,function(T){T&&(T.code==="EMFILE"||T.code==="ENFILE")?Zt([z,[B,R,D,O],T,H||Date.now(),Date.now()]):typeof O=="function"&&O.apply(this,arguments)})}}var l=i.readdir;i.readdir=u;var h=/^v[0-5]\./;function u(S,x,k){typeof x=="function"&&(k=x,x=null);var G=h.test(process.version)?function(R,D,O,H){return l(R,z(R,D,O,H))}:function(R,D,O,H){return l(R,D,z(R,D,O,H))};return G(S,x,k);function z(B,R,D,O){return function(H,T){H&&(H.code==="EMFILE"||H.code==="ENFILE")?Zt([G,[B,R,D],H,O||Date.now(),Date.now()]):(T&&T.sort&&T.sort(),typeof D=="function"&&D.call(this,H,T))}}}if(process.version.substr(0,4)==="v0.8"){var f=fl(i);w=f.ReadStream,b=f.WriteStream}var d=i.ReadStream;d&&(w.prototype=Object.create(d.prototype),w.prototype.open=v);var g=i.WriteStream;g&&(b.prototype=Object.create(g.prototype),b.prototype.open=E),Object.defineProperty(i,"ReadStream",{get:function(){return w},set:function(S){w=S},enumerable:!0,configurable:!0}),Object.defineProperty(i,"WriteStream",{get:function(){return b},set:function(S){b=S},enumerable:!0,configurable:!0});var m=w;Object.defineProperty(i,"FileReadStream",{get:function(){return m},set:function(S){m=S},enumerable:!0,configurable:!0});var y=b;Object.defineProperty(i,"FileWriteStream",{get:function(){return y},set:function(S){y=S},enumerable:!0,configurable:!0});function w(S,x){return this instanceof w?(d.apply(this,arguments),this):w.apply(Object.create(w.prototype),arguments)}function v(){var S=this;ft(S.path,S.flags,S.mode,function(x,k){x?(S.autoClose&&S.destroy(),S.emit("error",x)):(S.fd=k,S.emit("open",k),S.read())})}function b(S,x){return this instanceof b?(g.apply(this,arguments),this):b.apply(Object.create(b.prototype),arguments)}function E(){var S=this;ft(S.path,S.flags,S.mode,function(x,k){x?(S.destroy(),S.emit("error",x)):(S.fd=k,S.emit("open",k))})}function F(S,x){return new i.ReadStream(S,x)}function M(S,x){return new i.WriteStream(S,x)}var nt=i.open;i.open=ft;function ft(S,x,k,G){return typeof k=="function"&&(G=k,k=null),z(S,x,k,G);function z(B,R,D,O,H){return nt(B,R,D,function(T,gf){T&&(T.code==="EMFILE"||T.code==="ENFILE")?Zt([z,[B,R,D,O],T,H||Date.now(),Date.now()]):typeof O=="function"&&O.apply(this,arguments)})}}return i}function Zt(i){Bt("ENQUEUE",i[0].name,i[1]),N[J].push(i),cs()}var si;function fn(){for(var i=Date.now(),t=0;t<N[J].length;++t)N[J][t].length>2&&(N[J][t][3]=i,N[J][t][4]=i);cs()}function cs(){if(clearTimeout(si),si=void 0,N[J].length!==0){var i=N[J].shift(),t=i[0],e=i[1],s=i[2],r=i[3],n=i[4];if(r===void 0)Bt("RETRY",t.name,e),t.apply(null,e);else if(Date.now()-r>=6e4){Bt("TIMEOUT",t.name,e);var o=e.pop();typeof o=="function"&&o.call(null,s)}else{var a=Date.now()-n,c=Math.max(n-r,1),l=Math.min(c*1.2,100);a>=l?(Bt("RETRY",t.name,e),t.apply(null,e.concat([r]))):N[J].push(i)}si===void 0&&(si=setTimeout(cs,0))}}});var it=C(kt=>{"use strict";p();var pn=$().fromCallback,et=Xt(),ml=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(i=>typeof et[i]=="function");Object.assign(kt,et);ml.forEach(i=>{kt[i]=pn(et[i])});kt.exists=function(i,t){return typeof t=="function"?et.exists(i,t):new Promise(e=>et.exists(i,e))};kt.read=function(i,t,e,s,r,n){return typeof n=="function"?et.read(i,t,e,s,r,n):new Promise((o,a)=>{et.read(i,t,e,s,r,(c,l,h)=>{if(c)return a(c);o({bytesRead:l,buffer:h})})})};kt.write=function(i,t,...e){return typeof e[e.length-1]=="function"?et.write(i,t,...e):new Promise((s,r)=>{et.write(i,t,...e,(n,o,a)=>{if(n)return r(n);s({bytesWritten:o,buffer:a})})})};kt.readv=function(i,t,...e){return typeof e[e.length-1]=="function"?et.readv(i,t,...e):new Promise((s,r)=>{et.readv(i,t,...e,(n,o,a)=>{if(n)return r(n);s({bytesRead:o,buffers:a})})})};kt.writev=function(i,t,...e){return typeof e[e.length-1]=="function"?et.writev(i,t,...e):new Promise((s,r)=>{et.writev(i,t,...e,(n,o,a)=>{if(n)return r(n);s({bytesWritten:o,buffers:a})})})};typeof et.realpath.native=="function"?kt.realpath.native=pn(et.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")});var gn=C((Gp,mn)=>{"use strict";p();var gl=L("path");mn.exports.checkPath=function(t){if(process.platform==="win32"&&/[<>:"|?*]/.test(t.replace(gl.parse(t).root,""))){let s=new Error(`Path contains invalid characters: ${t}`);throw s.code="EINVAL",s}}});var bn=C((Hp,ls)=>{"use strict";p();var wn=it(),{checkPath:yn}=gn(),Sn=i=>{let t={mode:511};return typeof i=="number"?i:{...t,...i}.mode};ls.exports.makeDir=async(i,t)=>(yn(i),wn.mkdir(i,{mode:Sn(t),recursive:!0}));ls.exports.makeDirSync=(i,t)=>(yn(i),wn.mkdirSync(i,{mode:Sn(t),recursive:!0}))});var yt=C((Jp,vn)=>{"use strict";p();var wl=$().fromPromise,{makeDir:yl,makeDirSync:us}=bn(),fs=wl(yl);vn.exports={mkdirs:fs,mkdirsSync:us,mkdirp:fs,mkdirpSync:us,ensureDir:fs,ensureDirSync:us}});var _t=C((Vp,Cn)=>{"use strict";p();var Sl=$().fromPromise,En=it();function bl(i){return En.access(i).then(()=>!0).catch(()=>!1)}Cn.exports={pathExists:Sl(bl),pathExistsSync:En.existsSync}});var ds=C((Zp,xn)=>{"use strict";p();var te=it(),vl=$().fromPromise;async function El(i,t,e){let s=await te.open(i,"r+"),r=null;try{await te.futimes(s,t,e)}finally{try{await te.close(s)}catch(n){r=n}}if(r)throw r}function Cl(i,t,e){let s=te.openSync(i,"r+");return te.futimesSync(s,t,e),te.closeSync(s)}xn.exports={utimesMillis:vl(El),utimesMillisSync:Cl}});var Lt=C((tm,Tn)=>{"use strict";p();var ee=it(),U=L("path"),kn=$().fromPromise;function xl(i,t,e){let s=e.dereference?r=>ee.stat(r,{bigint:!0}):r=>ee.lstat(r,{bigint:!0});return Promise.all([s(i),s(t).catch(r=>{if(r.code==="ENOENT")return null;throw r})]).then(([r,n])=>({srcStat:r,destStat:n}))}function kl(i,t,e){let s,r=e.dereference?o=>ee.statSync(o,{bigint:!0}):o=>ee.lstatSync(o,{bigint:!0}),n=r(i);try{s=r(t)}catch(o){if(o.code==="ENOENT")return{srcStat:n,destStat:null};throw o}return{srcStat:n,destStat:s}}async function Fl(i,t,e,s){let{srcStat:r,destStat:n}=await xl(i,t,s);if(n){if(ke(r,n)){let o=U.basename(i),a=U.basename(t);if(e==="move"&&o!==a&&o.toLowerCase()===a.toLowerCase())return{srcStat:r,destStat:n,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(r.isDirectory()&&!n.isDirectory())throw new Error(`Cannot overwrite non-directory '${t}' with directory '${i}'.`);if(!r.isDirectory()&&n.isDirectory())throw new Error(`Cannot overwrite directory '${t}' with non-directory '${i}'.`)}if(r.isDirectory()&&ps(i,t))throw new Error(ni(i,t,e));return{srcStat:r,destStat:n}}function Ol(i,t,e,s){let{srcStat:r,destStat:n}=kl(i,t,s);if(n){if(ke(r,n)){let o=U.basename(i),a=U.basename(t);if(e==="move"&&o!==a&&o.toLowerCase()===a.toLowerCase())return{srcStat:r,destStat:n,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(r.isDirectory()&&!n.isDirectory())throw new Error(`Cannot overwrite non-directory '${t}' with directory '${i}'.`);if(!r.isDirectory()&&n.isDirectory())throw new Error(`Cannot overwrite directory '${t}' with non-directory '${i}'.`)}if(r.isDirectory()&&ps(i,t))throw new Error(ni(i,t,e));return{srcStat:r,destStat:n}}async function Fn(i,t,e,s){let r=U.resolve(U.dirname(i)),n=U.resolve(U.dirname(e));if(n===r||n===U.parse(n).root)return;let o;try{o=await ee.stat(n,{bigint:!0})}catch(a){if(a.code==="ENOENT")return;throw a}if(ke(t,o))throw new Error(ni(i,e,s));return Fn(i,t,n,s)}function On(i,t,e,s){let r=U.resolve(U.dirname(i)),n=U.resolve(U.dirname(e));if(n===r||n===U.parse(n).root)return;let o;try{o=ee.statSync(n,{bigint:!0})}catch(a){if(a.code==="ENOENT")return;throw a}if(ke(t,o))throw new Error(ni(i,e,s));return On(i,t,n,s)}function ke(i,t){return t.ino&&t.dev&&t.ino===i.ino&&t.dev===i.dev}function ps(i,t){let e=U.resolve(i).split(U.sep).filter(r=>r),s=U.resolve(t).split(U.sep).filter(r=>r);return e.every((r,n)=>s[n]===r)}function ni(i,t,e){return`Cannot ${e} '${i}' to a subdirectory of itself, '${t}'.`}Tn.exports={checkPaths:kn(Fl),checkPathsSync:Ol,checkParentPaths:kn(Fn),checkParentPathsSync:On,isSrcSubdir:ps,areIdentical:ke}});var Dn=C((im,Nn)=>{"use strict";p();var Q=it(),Fe=L("path"),{mkdirs:Tl}=yt(),{pathExists:Al}=_t(),{utimesMillis:Rl}=ds(),Oe=Lt();async function _l(i,t,e={}){typeof e=="function"&&(e={filter:e}),e.clobber="clobber"in e?!!e.clobber:!0,e.overwrite="overwrite"in e?!!e.overwrite:e.clobber,e.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0001");let{srcStat:s,destStat:r}=await Oe.checkPaths(i,t,"copy",e);if(await Oe.checkParentPaths(i,s,t,"copy"),!await Rn(i,t,e))return;let o=Fe.dirname(t);await Al(o)||await Tl(o),await _n(r,i,t,e)}async function Rn(i,t,e){return e.filter?e.filter(i,t):!0}async function _n(i,t,e,s){let n=await(s.dereference?Q.stat:Q.lstat)(t);if(n.isDirectory())return Pl(n,i,t,e,s);if(n.isFile()||n.isCharacterDevice()||n.isBlockDevice())return Nl(n,i,t,e,s);if(n.isSymbolicLink())return Bl(i,t,e,s);throw n.isSocket()?new Error(`Cannot copy a socket file: ${t}`):n.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${t}`):new Error(`Unknown file: ${t}`)}async function Nl(i,t,e,s,r){if(!t)return An(i,e,s,r);if(r.overwrite)return await Q.unlink(s),An(i,e,s,r);if(r.errorOnExist)throw new Error(`'${s}' already exists`)}async function An(i,t,e,s){if(await Q.copyFile(t,e),s.preserveTimestamps){Dl(i.mode)&&await Ml(e,i.mode);let r=await Q.stat(t);await Rl(e,r.atime,r.mtime)}return Q.chmod(e,i.mode)}function Dl(i){return(i&128)===0}function Ml(i,t){return Q.chmod(i,t|128)}async function Pl(i,t,e,s,r){t||await Q.mkdir(s);let n=await Q.readdir(e);await Promise.all(n.map(async o=>{let a=Fe.join(e,o),c=Fe.join(s,o);if(!await Rn(a,c,r))return;let{destStat:h}=await Oe.checkPaths(a,c,"copy",r);return _n(h,a,c,r)})),t||await Q.chmod(s,i.mode)}async function Bl(i,t,e,s){let r=await Q.readlink(t);if(s.dereference&&(r=Fe.resolve(process.cwd(),r)),!i)return Q.symlink(r,e);let n=null;try{n=await Q.readlink(e)}catch(o){if(o.code==="EINVAL"||o.code==="UNKNOWN")return Q.symlink(r,e);throw o}if(s.dereference&&(n=Fe.resolve(process.cwd(),n)),Oe.isSrcSubdir(r,n))throw new Error(`Cannot copy '${r}' to a subdirectory of itself, '${n}'.`);if(Oe.isSrcSubdir(n,r))throw new Error(`Cannot overwrite '${n}' with '${r}'.`);return await Q.unlink(e),Q.symlink(r,e)}Nn.exports=_l});var In=C((rm,Ln)=>{"use strict";p();var st=Xt(),Te=L("path"),Ll=yt().mkdirsSync,Il=ds().utimesMillisSync,Ae=Lt();function Wl(i,t,e){typeof e=="function"&&(e={filter:e}),e=e||{},e.clobber="clobber"in e?!!e.clobber:!0,e.overwrite="overwrite"in e?!!e.overwrite:e.clobber,e.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0002");let{srcStat:s,destStat:r}=Ae.checkPathsSync(i,t,"copy",e);if(Ae.checkParentPathsSync(i,s,t,"copy"),e.filter&&!e.filter(i,t))return;let n=Te.dirname(t);return st.existsSync(n)||Ll(n),Mn(r,i,t,e)}function Mn(i,t,e,s){let n=(s.dereference?st.statSync:st.lstatSync)(t);if(n.isDirectory())return Hl(n,i,t,e,s);if(n.isFile()||n.isCharacterDevice()||n.isBlockDevice())return jl(n,i,t,e,s);if(n.isSymbolicLink())return Kl(i,t,e,s);throw n.isSocket()?new Error(`Cannot copy a socket file: ${t}`):n.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${t}`):new Error(`Unknown file: ${t}`)}function jl(i,t,e,s,r){return t?ql(i,e,s,r):Pn(i,e,s,r)}function ql(i,t,e,s){if(s.overwrite)return st.unlinkSync(e),Pn(i,t,e,s);if(s.errorOnExist)throw new Error(`'${e}' already exists`)}function Pn(i,t,e,s){return st.copyFileSync(t,e),s.preserveTimestamps&&$l(i.mode,t,e),ms(e,i.mode)}function $l(i,t,e){return Ul(i)&&Gl(e,i),zl(t,e)}function Ul(i){return(i&128)===0}function Gl(i,t){return ms(i,t|128)}function ms(i,t){return st.chmodSync(i,t)}function zl(i,t){let e=st.statSync(i);return Il(t,e.atime,e.mtime)}function Hl(i,t,e,s,r){return t?Bn(e,s,r):Yl(i.mode,e,s,r)}function Yl(i,t,e,s){return st.mkdirSync(e),Bn(t,e,s),ms(e,i)}function Bn(i,t,e){st.readdirSync(i).forEach(s=>Jl(s,i,t,e))}function Jl(i,t,e,s){let r=Te.join(t,i),n=Te.join(e,i);if(s.filter&&!s.filter(r,n))return;let{destStat:o}=Ae.checkPathsSync(r,n,"copy",s);return Mn(o,r,n,s)}function Kl(i,t,e,s){let r=st.readlinkSync(t);if(s.dereference&&(r=Te.resolve(process.cwd(),r)),i){let n;try{n=st.readlinkSync(e)}catch(o){if(o.code==="EINVAL"||o.code==="UNKNOWN")return st.symlinkSync(r,e);throw o}if(s.dereference&&(n=Te.resolve(process.cwd(),n)),Ae.isSrcSubdir(r,n))throw new Error(`Cannot copy '${r}' to a subdirectory of itself, '${n}'.`);if(Ae.isSrcSubdir(n,r))throw new Error(`Cannot overwrite '${n}' with '${r}'.`);return Vl(r,e)}else return st.symlinkSync(r,e)}function Vl(i,t){return st.unlinkSync(t),st.symlinkSync(i,t)}Ln.exports=Wl});var oi=C((om,Wn)=>{"use strict";p();var Ql=$().fromPromise;Wn.exports={copy:Ql(Dn()),copySync:In()}});var Re=C((cm,qn)=>{"use strict";p();var jn=Xt(),Zl=$().fromCallback;function Xl(i,t){jn.rm(i,{recursive:!0,force:!0},t)}function tu(i){jn.rmSync(i,{recursive:!0,force:!0})}qn.exports={remove:Zl(Xl),removeSync:tu}});var Kn=C((lm,Jn)=>{"use strict";p();var eu=$().fromPromise,Gn=it(),zn=L("path"),Hn=yt(),Yn=Re(),$n=eu(async function(t){let e;try{e=await Gn.readdir(t)}catch{return Hn.mkdirs(t)}return Promise.all(e.map(s=>Yn.remove(zn.join(t,s))))});function Un(i){let t;try{t=Gn.readdirSync(i)}catch{return Hn.mkdirsSync(i)}t.forEach(e=>{e=zn.join(i,e),Yn.removeSync(e)})}Jn.exports={emptyDirSync:Un,emptydirSync:Un,emptyDir:$n,emptydir:$n}});var Xn=C((fm,Zn)=>{"use strict";p();var iu=$().fromPromise,Vn=L("path"),Ft=it(),Qn=yt();async function su(i){let t;try{t=await Ft.stat(i)}catch{}if(t&&t.isFile())return;let e=Vn.dirname(i),s=null;try{s=await Ft.stat(e)}catch(r){if(r.code==="ENOENT"){await Qn.mkdirs(e),await Ft.writeFile(i,"");return}else throw r}s.isDirectory()?await Ft.writeFile(i,""):await Ft.readdir(e)}function ru(i){let t;try{t=Ft.statSync(i)}catch{}if(t&&t.isFile())return;let e=Vn.dirname(i);try{Ft.statSync(e).isDirectory()||Ft.readdirSync(e)}catch(s){if(s&&s.code==="ENOENT")Qn.mkdirsSync(e);else throw s}Ft.writeFileSync(i,"")}Zn.exports={createFile:iu(su),createFileSync:ru}});var ro=C((pm,so)=>{"use strict";p();var nu=$().fromPromise,to=L("path"),Nt=it(),eo=yt(),{pathExists:ou}=_t(),{areIdentical:io}=Lt();async function au(i,t){let e;try{e=await Nt.lstat(t)}catch{}let s;try{s=await Nt.lstat(i)}catch(o){throw o.message=o.message.replace("lstat","ensureLink"),o}if(e&&io(s,e))return;let r=to.dirname(t);await ou(r)||await eo.mkdirs(r),await Nt.link(i,t)}function cu(i,t){let e;try{e=Nt.lstatSync(t)}catch{}try{let n=Nt.lstatSync(i);if(e&&io(n,e))return}catch(n){throw n.message=n.message.replace("lstat","ensureLink"),n}let s=to.dirname(t);return Nt.existsSync(s)||eo.mkdirsSync(s),Nt.linkSync(i,t)}so.exports={createLink:nu(au),createLinkSync:cu}});var oo=C((gm,no)=>{"use strict";p();var Dt=L("path"),_e=it(),{pathExists:hu}=_t(),lu=$().fromPromise;async function uu(i,t){if(Dt.isAbsolute(i)){try{await _e.lstat(i)}catch(n){throw n.message=n.message.replace("lstat","ensureSymlink"),n}return{toCwd:i,toDst:i}}let e=Dt.dirname(t),s=Dt.join(e,i);if(await hu(s))return{toCwd:s,toDst:i};try{await _e.lstat(i)}catch(n){throw n.message=n.message.replace("lstat","ensureSymlink"),n}return{toCwd:i,toDst:Dt.relative(e,i)}}function fu(i,t){if(Dt.isAbsolute(i)){if(!_e.existsSync(i))throw new Error("absolute srcpath does not exist");return{toCwd:i,toDst:i}}let e=Dt.dirname(t),s=Dt.join(e,i);if(_e.existsSync(s))return{toCwd:s,toDst:i};if(!_e.existsSync(i))throw new Error("relative srcpath does not exist");return{toCwd:i,toDst:Dt.relative(e,i)}}no.exports={symlinkPaths:lu(uu),symlinkPathsSync:fu}});var ho=C((ym,co)=>{"use strict";p();var ao=it(),du=$().fromPromise;async function pu(i,t){if(t)return t;let e;try{e=await ao.lstat(i)}catch{return"file"}return e&&e.isDirectory()?"dir":"file"}function mu(i,t){if(t)return t;let e;try{e=ao.lstatSync(i)}catch{return"file"}return e&&e.isDirectory()?"dir":"file"}co.exports={symlinkType:du(pu),symlinkTypeSync:mu}});var po=C((bm,fo)=>{"use strict";p();var gu=$().fromPromise,lo=L("path"),vt=it(),{mkdirs:wu,mkdirsSync:yu}=yt(),{symlinkPaths:Su,symlinkPathsSync:bu}=oo(),{symlinkType:vu,symlinkTypeSync:Eu}=ho(),{pathExists:Cu}=_t(),{areIdentical:uo}=Lt();async function xu(i,t,e){let s;try{s=await vt.lstat(t)}catch{}if(s&&s.isSymbolicLink()){let[a,c]=await Promise.all([vt.stat(i),vt.stat(t)]);if(uo(a,c))return}let r=await Su(i,t);i=r.toDst;let n=await vu(r.toCwd,e),o=lo.dirname(t);return await Cu(o)||await wu(o),vt.symlink(i,t,n)}function ku(i,t,e){let s;try{s=vt.lstatSync(t)}catch{}if(s&&s.isSymbolicLink()){let a=vt.statSync(i),c=vt.statSync(t);if(uo(a,c))return}let r=bu(i,t);i=r.toDst,e=Eu(r.toCwd,e);let n=lo.dirname(t);return vt.existsSync(n)||yu(n),vt.symlinkSync(i,t,e)}fo.exports={createSymlink:gu(xu),createSymlinkSync:ku}});var Eo=C((Em,vo)=>{"use strict";p();var{createFile:mo,createFileSync:go}=Xn(),{createLink:wo,createLinkSync:yo}=ro(),{createSymlink:So,createSymlinkSync:bo}=po();vo.exports={createFile:mo,createFileSync:go,ensureFile:mo,ensureFileSync:go,createLink:wo,createLinkSync:yo,ensureLink:wo,ensureLinkSync:yo,createSymlink:So,createSymlinkSync:bo,ensureSymlink:So,ensureSymlinkSync:bo}});var ai=C((xm,Co)=>{p();function Fu(i,{EOL:t=`
`,finalEOL:e=!0,replacer:s=null,spaces:r}={}){let n=e?t:"";return JSON.stringify(i,s,r).replace(/\n/g,t)+n}function Ou(i){return Buffer.isBuffer(i)&&(i=i.toString("utf8")),i.replace(/^\uFEFF/,"")}Co.exports={stringify:Fu,stripBom:Ou}});var Oo=C((Fm,Fo)=>{p();var ie;try{ie=Xt()}catch{ie=L("fs")}var ci=$(),{stringify:xo,stripBom:ko}=ai();async function Tu(i,t={}){typeof t=="string"&&(t={encoding:t});let e=t.fs||ie,s="throws"in t?t.throws:!0,r=await ci.fromCallback(e.readFile)(i,t);r=ko(r);let n;try{n=JSON.parse(r,t?t.reviver:null)}catch(o){if(s)throw o.message=`${i}: ${o.message}`,o;return null}return n}var Au=ci.fromPromise(Tu);function Ru(i,t={}){typeof t=="string"&&(t={encoding:t});let e=t.fs||ie,s="throws"in t?t.throws:!0;try{let r=e.readFileSync(i,t);return r=ko(r),JSON.parse(r,t.reviver)}catch(r){if(s)throw r.message=`${i}: ${r.message}`,r;return null}}async function _u(i,t,e={}){let s=e.fs||ie,r=xo(t,e);await ci.fromCallback(s.writeFile)(i,r,e)}var Nu=ci.fromPromise(_u);function Du(i,t,e={}){let s=e.fs||ie,r=xo(t,e);return s.writeFileSync(i,r,e)}var Mu={readFile:Au,readFileSync:Ru,writeFile:Nu,writeFileSync:Du};Fo.exports=Mu});var Ao=C((Tm,To)=>{"use strict";p();var hi=Oo();To.exports={readJson:hi.readFile,readJsonSync:hi.readFileSync,writeJson:hi.writeFile,writeJsonSync:hi.writeFileSync}});var li=C((Rm,No)=>{"use strict";p();var Pu=$().fromPromise,gs=it(),Ro=L("path"),_o=yt(),Bu=_t().pathExists;async function Lu(i,t,e="utf-8"){let s=Ro.dirname(i);return await Bu(s)||await _o.mkdirs(s),gs.writeFile(i,t,e)}function Iu(i,...t){let e=Ro.dirname(i);gs.existsSync(e)||_o.mkdirsSync(e),gs.writeFileSync(i,...t)}No.exports={outputFile:Pu(Lu),outputFileSync:Iu}});var Mo=C((Nm,Do)=>{"use strict";p();var{stringify:Wu}=ai(),{outputFile:ju}=li();async function qu(i,t,e={}){let s=Wu(t,e);await ju(i,s,e)}Do.exports=qu});var Bo=C((Mm,Po)=>{"use strict";p();var{stringify:$u}=ai(),{outputFileSync:Uu}=li();function Gu(i,t,e){let s=$u(t,e);Uu(i,s,e)}Po.exports=Gu});var Io=C((Bm,Lo)=>{"use strict";p();var zu=$().fromPromise,rt=Ao();rt.outputJson=zu(Mo());rt.outputJsonSync=Bo();rt.outputJSON=rt.outputJson;rt.outputJSONSync=rt.outputJsonSync;rt.writeJSON=rt.writeJson;rt.writeJSONSync=rt.writeJsonSync;rt.readJSON=rt.readJson;rt.readJSONSync=rt.readJsonSync;Lo.exports=rt});var Uo=C((Im,$o)=>{"use strict";p();var Hu=it(),Wo=L("path"),{copy:Yu}=oi(),{remove:qo}=Re(),{mkdirp:Ju}=yt(),{pathExists:Ku}=_t(),jo=Lt();async function Vu(i,t,e={}){let s=e.overwrite||e.clobber||!1,{srcStat:r,isChangingCase:n=!1}=await jo.checkPaths(i,t,"move",e);await jo.checkParentPaths(i,r,t,"move");let o=Wo.dirname(t);return Wo.parse(o).root!==o&&await Ju(o),Qu(i,t,s,n)}async function Qu(i,t,e,s){if(!s){if(e)await qo(t);else if(await Ku(t))throw new Error("dest already exists.")}try{await Hu.rename(i,t)}catch(r){if(r.code!=="EXDEV")throw r;await Zu(i,t,e)}}async function Zu(i,t,e){return await Yu(i,t,{overwrite:e,errorOnExist:!0,preserveTimestamps:!0}),qo(i)}$o.exports=Vu});var Jo=C((jm,Yo)=>{"use strict";p();var zo=Xt(),ys=L("path"),Xu=oi().copySync,Ho=Re().removeSync,tf=yt().mkdirpSync,Go=Lt();function ef(i,t,e){e=e||{};let s=e.overwrite||e.clobber||!1,{srcStat:r,isChangingCase:n=!1}=Go.checkPathsSync(i,t,"move",e);return Go.checkParentPathsSync(i,r,t,"move"),sf(t)||tf(ys.dirname(t)),rf(i,t,s,n)}function sf(i){let t=ys.dirname(i);return ys.parse(t).root===t}function rf(i,t,e,s){if(s)return ws(i,t,e);if(e)return Ho(t),ws(i,t,e);if(zo.existsSync(t))throw new Error("dest already exists.");return ws(i,t,e)}function ws(i,t,e){try{zo.renameSync(i,t)}catch(s){if(s.code!=="EXDEV")throw s;return nf(i,t,e)}}function nf(i,t,e){return Xu(i,t,{overwrite:e,errorOnExist:!0,preserveTimestamps:!0}),Ho(i)}Yo.exports=ef});var Vo=C(($m,Ko)=>{"use strict";p();var of=$().fromPromise;Ko.exports={move:of(Uo()),moveSync:Jo()}});var Zo=C((Gm,Qo)=>{"use strict";p();Qo.exports={...it(),...oi(),...Kn(),...Eo(),...Io(),...yt(),...Vo(),...li(),..._t(),...Re()}});p();import{PGlite as df}from"@electric-sql/pglite";p();p();var Cs=(i=0)=>t=>`\x1B[${t+i}m`,xs=(i=0)=>t=>`\x1B[${38+i};5;${t}m`,ks=(i=0)=>(t,e,s)=>`\x1B[${38+i};2;${t};${e};${s}m`,A={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}},vf=Object.keys(A.modifier),ua=Object.keys(A.color),fa=Object.keys(A.bgColor),Ef=[...ua,...fa];function da(){let i=new Map;for(let[t,e]of Object.entries(A)){for(let[s,r]of Object.entries(e))A[s]={open:`\x1B[${r[0]}m`,close:`\x1B[${r[1]}m`},e[s]=A[s],i.set(r[0],r[1]);Object.defineProperty(A,t,{value:e,enumerable:!1})}return Object.defineProperty(A,"codes",{value:i,enumerable:!1}),A.color.close="\x1B[39m",A.bgColor.close="\x1B[49m",A.color.ansi=Cs(),A.color.ansi256=xs(),A.color.ansi16m=ks(),A.bgColor.ansi=Cs(10),A.bgColor.ansi256=xs(10),A.bgColor.ansi16m=ks(10),Object.defineProperties(A,{rgbToAnsi256:{value(t,e,s){return t===e&&e===s?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(e/255*5)+Math.round(s/255*5)},enumerable:!1},hexToRgb:{value(t){let e=/[a-f\d]{6}|[a-f\d]{3}/i.exec(t.toString(16));if(!e)return[0,0,0];let[s]=e;s.length===3&&(s=[...s].map(n=>n+n).join(""));let r=Number.parseInt(s,16);return[r>>16&255,r>>8&255,r&255]},enumerable:!1},hexToAnsi256:{value:t=>A.rgbToAnsi256(...A.hexToRgb(t)),enumerable:!1},ansi256ToAnsi:{value(t){if(t<8)return 30+t;if(t<16)return 90+(t-8);let e,s,r;if(t>=232)e=((t-232)*10+8)/255,s=e,r=e;else{t-=16;let a=t%36;e=Math.floor(t/36)/5,s=Math.floor(a/6)/5,r=a%6/5}let n=Math.max(e,s,r)*2;if(n===0)return 30;let o=30+(Math.round(r)<<2|Math.round(s)<<1|Math.round(e));return n===2&&(o+=60),o},enumerable:!1},rgbToAnsi:{value:(t,e,s)=>A.ansi256ToAnsi(A.rgbToAnsi256(t,e,s)),enumerable:!1},hexToAnsi:{value:t=>A.ansi256ToAnsi(A.hexToAnsi256(t)),enumerable:!1}}),A}var pa=da(),dt=pa;p();import di from"node:process";import ma from"node:os";import Fs from"node:tty";function ct(i,t=globalThis.Deno?globalThis.Deno.args:di.argv){let e=i.startsWith("-")?"":i.length===1?"-":"--",s=t.indexOf(e+i),r=t.indexOf("--");return s!==-1&&(r===-1||s<r)}var{env:_}=di,Ne;ct("no-color")||ct("no-colors")||ct("color=false")||ct("color=never")?Ne=0:(ct("color")||ct("colors")||ct("color=true")||ct("color=always"))&&(Ne=1);function ga(){if("FORCE_COLOR"in _)return _.FORCE_COLOR==="true"?1:_.FORCE_COLOR==="false"?0:_.FORCE_COLOR.length===0?1:Math.min(Number.parseInt(_.FORCE_COLOR,10),3)}function wa(i){return i===0?!1:{level:i,hasBasic:!0,has256:i>=2,has16m:i>=3}}function ya(i,{streamIsTTY:t,sniffFlags:e=!0}={}){let s=ga();s!==void 0&&(Ne=s);let r=e?Ne:s;if(r===0)return 0;if(e){if(ct("color=16m")||ct("color=full")||ct("color=truecolor"))return 3;if(ct("color=256"))return 2}if("TF_BUILD"in _&&"AGENT_NAME"in _)return 1;if(i&&!t&&r===void 0)return 0;let n=r||0;if(_.TERM==="dumb")return n;if(di.platform==="win32"){let o=ma.release().split(".");return Number(o[0])>=10&&Number(o[2])>=10586?Number(o[2])>=14931?3:2:1}if("CI"in _)return"GITHUB_ACTIONS"in _||"GITEA_ACTIONS"in _?3:["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","BUILDKITE","DRONE"].some(o=>o in _)||_.CI_NAME==="codeship"?1:n;if("TEAMCITY_VERSION"in _)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(_.TEAMCITY_VERSION)?1:0;if(_.COLORTERM==="truecolor"||_.TERM==="xterm-kitty")return 3;if("TERM_PROGRAM"in _){let o=Number.parseInt((_.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(_.TERM_PROGRAM){case"iTerm.app":return o>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(_.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(_.TERM)||"COLORTERM"in _?1:n}function Os(i,t={}){let e=ya(i,{streamIsTTY:i&&i.isTTY,...t});return wa(e)}var Sa={stdout:Os({isTTY:Fs.isatty(1)}),stderr:Os({isTTY:Fs.isatty(2)})},Ts=Sa;p();function As(i,t,e){let s=i.indexOf(t);if(s===-1)return i;let r=t.length,n=0,o="";do o+=i.slice(n,s)+t+e,n=s+r,s=i.indexOf(t,n);while(s!==-1);return o+=i.slice(n),o}function Rs(i,t,e,s){let r=0,n="";do{let o=i[s-1]==="\r";n+=i.slice(r,o?s-1:s)+t+(o?`\r
`:`
`)+e,r=s+1,s=i.indexOf(`
`,r)}while(s!==-1);return n+=i.slice(r),n}var{stdout:_s,stderr:Ns}=Ts,pi=Symbol("GENERATOR"),It=Symbol("STYLER"),se=Symbol("IS_EMPTY"),Ds=["ansi","ansi","ansi256","ansi16m"],Wt=Object.create(null),ba=(i,t={})=>{if(t.level&&!(Number.isInteger(t.level)&&t.level>=0&&t.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");let e=_s?_s.level:0;i.level=t.level===void 0?e:t.level};var va=i=>{let t=(...e)=>e.join(" ");return ba(t,i),Object.setPrototypeOf(t,re.prototype),t};function re(i){return va(i)}Object.setPrototypeOf(re.prototype,Function.prototype);for(let[i,t]of Object.entries(dt))Wt[i]={get(){let e=De(this,gi(t.open,t.close,this[It]),this[se]);return Object.defineProperty(this,i,{value:e}),e}};Wt.visible={get(){let i=De(this,this[It],!0);return Object.defineProperty(this,"visible",{value:i}),i}};var mi=(i,t,e,...s)=>i==="rgb"?t==="ansi16m"?dt[e].ansi16m(...s):t==="ansi256"?dt[e].ansi256(dt.rgbToAnsi256(...s)):dt[e].ansi(dt.rgbToAnsi(...s)):i==="hex"?mi("rgb",t,e,...dt.hexToRgb(...s)):dt[e][i](...s),Ea=["rgb","hex","ansi256"];for(let i of Ea){Wt[i]={get(){let{level:e}=this;return function(...s){let r=gi(mi(i,Ds[e],"color",...s),dt.color.close,this[It]);return De(this,r,this[se])}}};let t="bg"+i[0].toUpperCase()+i.slice(1);Wt[t]={get(){let{level:e}=this;return function(...s){let r=gi(mi(i,Ds[e],"bgColor",...s),dt.bgColor.close,this[It]);return De(this,r,this[se])}}}}var Ca=Object.defineProperties(()=>{},{...Wt,level:{enumerable:!0,get(){return this[pi].level},set(i){this[pi].level=i}}}),gi=(i,t,e)=>{let s,r;return e===void 0?(s=i,r=t):(s=e.openAll+i,r=t+e.closeAll),{open:i,close:t,openAll:s,closeAll:r,parent:e}},De=(i,t,e)=>{let s=(...r)=>xa(s,r.length===1?""+r[0]:r.join(" "));return Object.setPrototypeOf(s,Ca),s[pi]=i,s[It]=t,s[se]=e,s},xa=(i,t)=>{if(i.level<=0||!t)return i[se]?"":t;let e=i[It];if(e===void 0)return t;let{openAll:s,closeAll:r}=e;if(t.includes("\x1B"))for(;e!==void 0;)t=As(t,e.close,e.open),e=e.parent;let n=t.indexOf(`
`);return n!==-1&&(t=Rs(t,r,s,n)),s+t+r};Object.defineProperties(re.prototype,Wt);var ka=re(),Pf=re({level:Ns?Ns.level:0});var jt=ka;p();p();var wi=i=>Array.isArray(i)?i:[i],Ms=i=>i.replace(/[\W_]([a-z\d])?/gi,(t,e)=>e?e.toUpperCase():"");function Fa(i,t){return t.length!==i.length?!1:i.every((e,s)=>e===t[s])}function Ps(i,t){return t.length>i.length?!1:Fa(i.slice(0,t.length),t)}p();function yi(i){if(i===null||typeof i!="object")return!1;let t=Object.getPrototypeOf(i);return t!==null&&t!==Object.prototype&&Object.getPrototypeOf(t)!==null||Symbol.iterator in i?!1:Symbol.toStringTag in i?Object.prototype.toString.call(i)==="[object Module]":!0}function Si(i,t,e=".",s){if(!yi(t))return Si(i,{},e,s);let r=Object.assign({},t);for(let n in i){if(n==="__proto__"||n==="constructor")continue;let o=i[n];o!=null&&(s&&s(r,n,o,e)||(Array.isArray(o)&&Array.isArray(r[n])?r[n]=[...o,...r[n]]:yi(o)&&yi(r[n])?r[n]=Si(o,r[n],(e?`${e}.`:"")+n.toString(),s):r[n]=o))}return r}function bi(i){return(...t)=>t.reduce((e,s)=>Si(e,s,"",i),{})}var Oa=bi(),jf=bi((i,t,e)=>{if(i[t]!==void 0&&typeof e=="function")return i[t]=e(i[t]),!0}),qf=bi((i,t,e)=>{if(Array.isArray(i[t])&&typeof e=="function")return i[t]=e(i[t]),!0});p();var Ta="known-flag",Aa="unknown-flag",Ra="argument",{stringify:ne}=JSON,_a=/\B([A-Z])/g,Na=i=>i.replace(_a,"-$1").toLowerCase(),{hasOwnProperty:Da}=Object.prototype,oe=(i,t)=>Da.call(i,t),Ma=i=>Array.isArray(i),Bs=i=>typeof i=="function"?[i,!1]:Ma(i)?[i[0],!0]:Bs(i.type),Pa=(i,t)=>i===Boolean?t!=="false":t,Ba=(i,t)=>typeof t=="boolean"?t:i===Number&&t===""?Number.NaN:i(t),La=/[\s.:=]/,Ia=i=>{let t=`Flag name ${ne(i)}`;if(i.length===0)throw new Error(`${t} cannot be empty`);if(i.length===1)throw new Error(`${t} must be longer than a character`);let e=i.match(La);if(e)throw new Error(`${t} cannot contain ${ne(e?.[0])}`)},Wa=i=>{let t={},e=(s,r)=>{if(oe(t,s))throw new Error(`Duplicate flags named ${ne(s)}`);t[s]=r};for(let s in i){if(!oe(i,s))continue;Ia(s);let r=i[s],n=[[],...Bs(r),r];e(s,n);let o=Na(s);if(s!==o&&e(o,n),"alias"in r&&typeof r.alias=="string"){let{alias:a}=r,c=`Flag alias ${ne(a)} for flag ${ne(s)}`;if(a.length===0)throw new Error(`${c} cannot be empty`);if(a.length>1)throw new Error(`${c} must be a single character`);e(a,n)}}return t},ja=(i,t)=>{let e={};for(let s in i){if(!oe(i,s))continue;let[r,,n,o]=t[s];if(r.length===0&&"default"in o){let{default:a}=o;typeof a=="function"&&(a=a()),e[s]=a}else e[s]=n?r:r.pop()}return e},Me="--",qa=/[.:=]/,$a=/^-{1,2}\w/,Ua=i=>{if(!$a.test(i))return;let t=!i.startsWith(Me),e=i.slice(t?1:2),s,r=e.match(qa);if(r){let{index:n}=r;s=e.slice(n+1),e=e.slice(0,n)}return[e,s,t]},Ga=(i,{onFlag:t,onArgument:e})=>{let s,r=(n,o)=>{if(typeof s!="function")return!0;s(n,o),s=void 0};for(let n=0;n<i.length;n+=1){let o=i[n];if(o===Me){r();let c=i.slice(n+1);e?.(c,[n],!0);break}let a=Ua(o);if(a){if(r(),!t)continue;let[c,l,h]=a;if(h)for(let u=0;u<c.length;u+=1){r();let f=u===c.length-1;s=t(c[u],f?l:void 0,[n,u+1,f])}else s=t(c,l,[n])}else r(o,[n])&&e?.([o],[n])}r()},za=(i,t)=>{for(let[e,s,r]of t.reverse()){if(s){let n=i[e],o=n.slice(0,s);if(r||(o+=n.slice(s+1)),o!=="-"){i[e]=o;continue}}i.splice(e,1)}},vi=(i,t=process.argv.slice(2),{ignore:e}={})=>{let s=[],r=Wa(i),n={},o=[];return o[Me]=[],Ga(t,{onFlag(a,c,l){let h=oe(r,a);if(!e?.(h?Ta:Aa,a,c)){if(h){let[u,f]=r[a],d=Pa(f,c),g=(m,y)=>{s.push(l),y&&s.push(y),u.push(Ba(f,m||""))};return d===void 0?g:g(d)}oe(n,a)||(n[a]=[]),n[a].push(c===void 0?!0:c),s.push(l)}},onArgument(a,c,l){e?.(Ra,t[c[0]])||(o.push(...a),l?(o[Me]=a,t.splice(c[0])):s.push(c))}}),za(t,s),{flags:ja(i,r),unknownFlags:n,_:o}};var ce=JSON.stringify,xi=class extends Error{constructor(t,e){super(e("core.commandExists",ce(t))),this.commandName=t}},ki=class extends Error{constructor(t,e){super(e("core.noSuchCommand",ce(t))),this.commandName=t}},Fi=class extends Error{constructor(t){super(t("core.noCommandGiven"))}},Oi=class extends Error{constructor(t,e,s){super(s("core.commandNameConflict",ce(t),ce(e))),this.n1=t,this.n2=e}},Ti=class extends Error{constructor(t){super(t("core.scriptNameNotSet"))}},Ai=class extends Error{constructor(t){super(t("core.descriptionNotSet"))}},Ri=class extends Error{constructor(t){super(t("core.versionNotSet"))}},_i=class extends Error{constructor(t,e){super(e("core.badNameFormat",ce(t))),this.commandName=t}};var Ha={en:{"core.commandExists":'Command "%s" exists.',"core.noSuchCommand":"No such command: %s.","core.noCommandGiven":"No command given.","core.commandNameConflict":"Command name %s conflicts with %s. Maybe caused by alias.","core.scriptNameNotSet":"Name not set.","core.descriptionNotSet":"Description not set.","core.versionNotSet":"Version not set.","core.badNameFormat":"Bad name format: %s.","core.localeMustBeCalledFirst":"locale() or fallbackLocale() must be called at first.","core.cliParseMustBeCalled":"cli.parse() must be called.","core.spreadParameterMustBeLast":"Invalid Parameter: Spread parameter %s must be last.","core.requiredParameterCannotComeAfterOptionalParameter":"Invalid Parameter: Required parameter %s cannot come after optional parameter %s.","core.parameterMustBeWrappedInBrackets":"Invalid Parameter: Parameter %s must be wrapped in <> (required parameter) or [] (optional parameter).","core.parameterIsUsedMoreThanOnce":"Invalid Parameter: Parameter %s is used more than once.","core.missingRequiredParameter":"Missing required parameter %s."},"zh-CN":{"core.commandExists":'\u547D\u4EE4 "%s" \u5DF2\u5B58\u5728\u3002',"core.noSuchCommand":"\u627E\u4E0D\u5230\u547D\u4EE4: %s\u3002","core.noCommandGiven":"\u6CA1\u6709\u8F93\u5165\u547D\u4EE4\u3002","core.commandNameConflict":"\u547D\u4EE4\u540D\u79F0 %s \u548C %s \u51B2\u7A81\u3002 \u53EF\u80FD\u662F\u7531\u4E8E\u522B\u540D\u5BFC\u81F4\u7684\u3002","core.scriptNameNotSet":"\u672A\u8BBE\u7F6E CLI Script \u540D\u79F0\u3002","core.descriptionNotSet":"\u672A\u8BBE\u7F6E CLI \u63CF\u8FF0\u3002","core.versionNotSet":"\u672A\u8BBE\u7F6E CLI \u7248\u672C\u3002","core.badNameFormat":"\u9519\u8BEF\u7684\u547D\u4EE4\u540D\u5B57\u683C\u5F0F: %s\u3002","core.localeMustBeCalledFirst":"locale() \u6216 fallbackLocale() \u5FC5\u987B\u5728\u6700\u5F00\u59CB\u8C03\u7528\u3002","core.cliParseMustBeCalled":"cli.parse() \u5FC5\u987B\u88AB\u8C03\u7528\u3002","core.spreadParameterMustBeLast":"\u4E0D\u5408\u6CD5\u7684\u53C2\u6570: \u5C55\u5F00\u53C2\u6570 %s \u5FC5\u987B\u5728\u6700\u540E\u3002","core.requiredParameterCannotComeAfterOptionalParameter":"\u4E0D\u5408\u6CD5\u7684\u53C2\u6570: \u5FC5\u586B\u53C2\u6570 %s \u4E0D\u80FD\u5728\u53EF\u9009\u53C2\u6570 %s \u4E4B\u540E\u3002","core.parameterMustBeWrappedInBrackets":"\u4E0D\u5408\u6CD5\u7684\u53C2\u6570: \u53C2\u6570 %s \u5FC5\u987B\u88AB <> (\u5FC5\u586B\u53C2\u6570) \u6216 [] (\u53EF\u9009\u53C2\u6570) \u5305\u88F9\u3002","core.parameterIsUsedMoreThanOnce":"\u4E0D\u5408\u6CD5\u7684\u53C2\u6570: \u53C2\u6570 %s \u88AB\u4F7F\u7528\u4E86\u591A\u6B21\u3002","core.missingRequiredParameter":"\u7F3A\u5C11\u5FC5\u586B\u53C2\u6570 %s\u3002"}},{stringify:qt}=JSON;function Ei(i,t){let e=[],s,r;for(let n of i){if(r)throw new Error(t("core.spreadParameterMustBeLast",qt(r)));let o=n[0],a=n[n.length-1],c;if(o==="<"&&a===">"&&(c=!0,s))throw new Error(t("core.requiredParameterMustBeBeforeOptional",qt(n),qt(s)));if(o==="["&&a==="]"&&(c=!1,s=n),c===void 0)throw new Error(t("core.parameterMustBeWrappedInBrackets",qt(n)));let l=n.slice(1,-1),h=l.slice(-3)==="...";h&&(r=n,l=l.slice(0,-3)),e.push({name:l,required:c,spread:h})}return e}function Ci(i,t,e,s){for(let r=0;r<t.length;r+=1){let{name:n,required:o,spread:a}=t[r],c=Ms(n);if(c in i)throw new Error(s("core.parameterIsUsedMoreThanOnce",qt(n)));let l=a?e.slice(r):e[r];if(a&&(r=t.length),o&&(!l||a&&l.length===0))throw new Error(s("core.missingRequiredParameter",qt(n)));i[c]=l}}function Ls(i,t,e,s){if(e.alias){let r=wi(e.alias);for(let n of r){if(n in t)throw new Oi(t[n].name,e.name,s);i.set(typeof n=="symbol"?n:n.split(" "),{...e,__isAlias:!0})}}}function Ya(i,t){let e=new Map;i[Z]&&(e.set(Z,i[Z]),Ls(e,i,i[Z],t));for(let s of Object.values(i))Ls(e,i,s,t),e.set(s.name.split(" "),s);return e}function Ja(i,t,e){var s;let r=Ya(i,e);for(let[n,o]of r.entries()){let a=vi((s=o?.flags)!=null?s:Object.create(null),[...t]),{_:c}=a;if(n!==Z&&Ps(c,n))return[o,n]}return r.has(Z)?[r.get(Z),Z]:[void 0,void 0]}function Ka(i){let t={pre:[],normal:[],post:[]};for(let s of i){let r=typeof s=="object"?s:{fn:s},{enforce:n,fn:o}=r;n==="post"||n==="pre"?t[n].push(o):t.normal.push(o)}let e=[...t.pre,...t.normal,...t.post];return s=>{return r(0);function r(n){let o=e[n];return o(s,r.bind(null,n+1))}}}var Va=/\s{2,}/,Qa=i=>i===Z?!0:!(i.startsWith(" ")||i.endsWith(" "))&&!Va.test(i);var Za="<Root>",Xa=i=>Array.isArray(i)?i.join(" "):typeof i=="string"?i:Za;var tc=i=>i.filter(t=>!t.startsWith("-")),Di=(i,t,e)=>{if(!t.has(i))throw TypeError("Cannot "+e)},I=(i,t,e)=>(Di(i,t,"read from private field"),e?e.call(i):t.get(i));var ec=(i,t,e,s)=>(Di(i,t,"write to private field"),s?s.call(i,e):t.set(i,e),e),Pe=(i,t,e)=>(Di(i,t,"access private method"),e),ic,Is,Ws,js,qs,Mi,$s,Us,ae,Pi,Ni,Gs,sc,rc,nc,zs,Hs,Ys,Js,oc,ac,Bi,Li,cc,hc,lc,uc,Ks,Vs,Qs,Zs,fc,dc,pc,mc,Z=Symbol.for("Clerc.Root");ic=new WeakMap;Is=new WeakMap;Ws=new WeakMap;js=new WeakMap;qs=new WeakMap;Mi=new WeakMap;$s=new WeakMap;Us=new WeakMap;ae=new WeakMap;Pi=new WeakMap;Ni=new WeakMap;Gs=new WeakMap;sc=new WeakMap;rc=new WeakMap;nc=new WeakMap;zs=new WeakSet;Hs=function(){return I(this,ae).has(Z)};Ys=new WeakSet;Js=function(){return Object.prototype.hasOwnProperty.call(this._commands,Z)};oc=new WeakSet;ac=function(){this.i18n.add(Ha)};Bi=new WeakSet;Li=function(){ec(this,Gs,!0)};cc=new WeakSet;hc=function(i,t,e={}){Pe(this,Bi,Li).call(this);let{t:s}=this.i18n,n=(u=>!(typeof u=="string"||u===Z))(i),o=n?i.name:i;if(!Qa(o))throw new _i(o,s);let{handler:a=void 0,...c}=n?i:{name:o,description:t,...e},l=[c.name],h=c.alias?wi(c.alias):[];c.alias&&l.push(...h);for(let u of l)if(I(this,ae).has(u))throw new xi(Xa(u),s);I(this,Mi)[o]=c,I(this,ae).add(c.name);for(let u of h)I(this,ae).add(u);return n&&a&&this.on(i.name,a),this};lc=new WeakSet;uc=function(){let{t:i}=this.i18n;if(!I(this,Is))throw new Ti(i);if(!I(this,Ws))throw new Ai(i);if(!I(this,js))throw new Ri(i)};Ks=new WeakSet;Vs=function(i){var t;let e=I(this,Pi),{t:s}=this.i18n,[r,n]=i(),o=!!r,a={...I(this,Us),...r?.flags},c=vi(a,[...e]),l=r?.name===Z||n===Z?0:n?.length?n.length:r?.name.split(" ").length,{_:h,flags:u,unknownFlags:f}=c,d=!o||r.name===Z?h:h.slice(l),g=(t=r?.parameters)!=null?t:[],m=g.indexOf("--"),y=g.slice(m+1)||[],w=Object.create(null);if(m>-1&&y.length>0){g=g.slice(0,m);let E=h["--"];d=d.slice(0,-E.length||void 0),Ci(w,Ei(g,s),d,s),Ci(w,Ei(y,s),E,s)}else Ci(w,Ei(g,s),d,s);let v={...u,...f};return{name:r?.name,called:Array.isArray(n)?n.join(" "):n,resolved:o,hasRootOrAlias:I(this,zs,Hs),hasRoot:I(this,Ys,Js),raw:{...c,parameters:d,mergedFlags:v},parameters:w,flags:u,unknownFlags:f,cli:this}};Qs=new WeakSet;Zs=function(i){if(I(this,Ni).length>0)for(let t of I(this,Ni))t(i);else throw i};fc=new WeakSet;dc=function(i){try{i()}catch(t){Pe(this,Qs,Zs).call(this,t)}};pc=new WeakSet;mc=function(){Pe(this,Bi,Li).call(this);let{t:i}=this.i18n,t=I(this,Pi);if(!t)throw new Error(i("core.cliParseMustBeCalled"));let e=()=>Ja(I(this,Mi),t,i),s=()=>Pe(this,Ks,Vs).call(this,e),r={enforce:"post",fn:a=>{let[c]=e(),l=tc(t).join(" ");if(!c)throw l?new ki(l,i):new Fi(i);I(this,$s).emit(c.name,a)}},n=[...I(this,qs),r];Ka(n)(s())};var Xs=(i,t)=>({...i,handler:t});import{existsSync as pf}from"fs";import ta from"path";p();import*as er from"node:net";var gc=1,wc={66:"Bind",67:"Close",102:"CopyFail",68:"Describe",69:"Execute",72:"Flush",70:"FunctionCall",112:"GSSResponse",80:"Parse",112:"PasswordMessage",81:"Query",112:"SASLResponse",83:"Sync",88:"Terminate"},yc={name:"Unknown",length:0,buffer:Buffer.alloc(0)},tr={name:"Unknown",length:0,buffer:Buffer.alloc(0)};function Sc(i){return i.at(4)===4&&i.at(5)===210&&i.at(6)===22&&i.at(7)===46}function bc(i){return i.at(4)===4&&i.at(5)===210&&i.at(6)===22&&i.at(7)===48}function vc(i){return i.at(4)===4&&i.at(5)===210&&i.at(6)===22&&i.at(7)===47}function Ec(i){return i.at(4)===0&&i.at(5)===3&&i.at(6)===0&&i.at(7)===0}function Cc(i){if(i.length===0)return tr;if(Sc(i)){let s=i.readUint32BE(0);return{name:"CancelRequest",length:s,buffer:Buffer.from(i.subarray(0,s))}}if(bc(i)){let s=i.readUint32BE(0);return{name:"GSSENCRequest",length:s,buffer:Buffer.from(i.subarray(0,s))}}if(vc(i)){let s=i.readUint32BE(0);return{name:"SSLRequest",length:s,buffer:Buffer.from(i.subarray(0,s))}}if(Ec(i)){let s=i.readUint32BE(0);return{name:"StartupMessage",length:s,buffer:Buffer.from(i.subarray(0,s))}}let t=wc[i.at(0)];if(!t)return yc;let e=i.readUint32BE(1)+gc;return i.length<e?tr:{name:t,length:e,buffer:Buffer.from(i.subarray(0,e))}}var Et=class{#t=Buffer.alloc(16);#e=0;write(i){this.updateCapacity(i.length),this.#t.write(i,this.#e),this.#e+=i.length}writeUint8(i){this.updateCapacity(1),this.#t.writeUint8(i,this.#e),this.#e+=1}writeUint32BE(i){this.updateCapacity(4),this.#t.writeUint32BE(i,this.#e),this.#e+=4}updateCapacity(i){for(;this.#t.byteLength<this.#e+i;){let t=Buffer.alloc(this.#t.byteLength*2);this.#t.copy(t,0,0,this.#e),this.#t=t}}toBuffer(){return Buffer.from(this.#t.subarray(0,this.#e))}};function xc(){return new Et().toBuffer()}function kc(){return new Et().toBuffer()}function Fc(){let i=new Et;return i.write("N"),i.toBuffer()}function Oc(){let i=new Et;i.write("R"),i.writeUint32BE(8),i.writeUint32BE(0);let t=new Et,e="server_version",s="pglite";t.write("S"),t.writeUint32BE(6+e.length+s.length),t.write(e),t.writeUint8(0),t.write(s),t.writeUint8(0);let r=new Et;r.write("K"),r.writeUint32BE(12),r.writeUint32BE(1),r.writeUint32BE(2);let n=new Et;return n.write("Z"),n.writeUint32BE(5),n.write("I"),Buffer.concat([i.toBuffer(),t.toBuffer(),r.toBuffer(),n.toBuffer()])}function Tc(i){let t=new Et;t.write("E"),t.writeUint32BE(7+i.length),t.write("M"),t.write(i),t.writeUint8(0),t.writeUint8(0);let e=new Et;return e.write("Z"),e.writeUint32BE(5),e.write("I"),Buffer.concat([t.toBuffer(),e.toBuffer()])}async function Ac(i,t){switch(i.name){case"CancelRequest":return xc();case"GSSENCRequest":return kc();case"SSLRequest":return Fc();case"StartupMessage":return Oc();default:try{let e=await t.execProtocol(i.buffer);return Buffer.concat(e.map(([s,r])=>r))}catch(e){let s=e instanceof Error?e.message:"Unknown error message";return Tc(s)}}}var Ii=(i=>(i[i.Error=0]="Error",i[i.Warn=1]="Warn",i[i.Info=2]="Info",i[i.Debug=3]="Debug",i))(Ii||{}),Rc=class{constructor(i=2,t){this.logLevel=i,this.prefix=`[${t}]:`}prefix;debug(...i){this.logLevel<3||console.debug(this.prefix,...i)}info(...i){this.logLevel<2||console.info(this.prefix,...i)}warn(...i){this.logLevel<1||console.warn(this.prefix,...i)}error(...i){console.error(this.prefix,...i)}};function ir(i,t={logLevel:2}){let e=er.createServer(t);return e.on("connection",function(s){let r=Buffer.allocUnsafe(0),n=`${s.remoteAddress}:${s.remotePort}`,o=new Rc(t.logLevel,n);o.info("Client connected"),s.on("data",async a=>{for(r=Buffer.concat([r,a]);r.length>0;){let c=Cc(r);if(o.debug(`${"-".repeat(42)}
`),o.debug("> Current buffer"),o.debug(`> Length: ${r.length}`),o.debug("> Raw:",r),o.debug(`> Text: ${r.toString()}`),o.debug(""),o.debug(`>> Message name: ${c.name}`),o.debug(`>> Message length: ${c.length}`),o.debug(">> Message buffer raw:",c.buffer),o.debug(`>> Message buffer text: ${c.buffer.toString()}`),o.debug(""),c.name==="InsufficientData")continue;if(c.name==="Unknown"||c.name==="Terminate"){s.end();return}let l=await Ac(c,i);s.write(l),r=Buffer.from(r.subarray(c.length)),o.debug("> Remaining buffer"),o.debug(`> Length: ${r.length}`),o.debug("> Raw:",r),o.debug(`> Text: ${r.toString()||"<empty>"}`),o.debug("")}}),s.on("end",()=>{o.info("Client disconnected")}),s.on("error",a=>{o.error("Client error:",a),s.end()})}),e.on("error",s=>{throw s}),e}p();p();p();p();var Cr=Es(mr(),1);p();var le=i=>{if(typeof i!="string")throw new TypeError("invalid pattern");if(i.length>65536)throw new TypeError("pattern is too long")};p();p();var Ic={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},ue=i=>i.replace(/[[\]\\-]/g,"\\$&"),Wc=i=>i.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),gr=i=>i.join(""),wr=(i,t)=>{let e=t;if(i.charAt(e)!=="[")throw new Error("not in a brace expression");let s=[],r=[],n=e+1,o=!1,a=!1,c=!1,l=!1,h=e,u="";t:for(;n<i.length;){let m=i.charAt(n);if((m==="!"||m==="^")&&n===e+1){l=!0,n++;continue}if(m==="]"&&o&&!c){h=n+1;break}if(o=!0,m==="\\"&&!c){c=!0,n++;continue}if(m==="["&&!c){for(let[y,[w,v,b]]of Object.entries(Ic))if(i.startsWith(y,n)){if(u)return["$.",!1,i.length-e,!0];n+=y.length,b?r.push(w):s.push(w),a=a||v;continue t}}if(c=!1,u){m>u?s.push(ue(u)+"-"+ue(m)):m===u&&s.push(ue(m)),u="",n++;continue}if(i.startsWith("-]",n+1)){s.push(ue(m+"-")),n+=2;continue}if(i.startsWith("-",n+1)){u=m,n+=2;continue}s.push(ue(m)),n++}if(h<n)return["",!1,0,!1];if(!s.length&&!r.length)return["$.",!1,i.length-e,!0];if(r.length===0&&s.length===1&&/^\\?.$/.test(s[0])&&!l){let m=s[0].length===2?s[0].slice(-1):s[0];return[Wc(m),!1,h-e,!1]}let f="["+(l?"^":"")+gr(s)+"]",d="["+(l?"":"^")+gr(r)+"]";return[s.length&&r.length?"("+f+"|"+d+")":s.length?f:d,a,h-e,!0]};p();var pt=(i,{windowsPathsNoEscape:t=!1}={})=>t?i.replace(/\[([^\/\\])\]/g,"$1"):i.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1");var jc=new Set(["!","?","+","*","@"]),yr=i=>jc.has(i),qc="(?!(?:^|/)\\.\\.?(?:$|/))",Be="(?!\\.)",$c=new Set(["[","."]),Uc=new Set(["..","."]),Gc=new Set("().*{}+?[]^$\\!"),zc=i=>i.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),qi="[^/]",Sr=qi+"*?",br=qi+"+?",$t=class i{type;#t;#e;#n=!1;#s=[];#o;#b;#h;#u=!1;#a;#c;#r=!1;constructor(t,e,s={}){this.type=t,t&&(this.#e=!0),this.#o=e,this.#t=this.#o?this.#o.#t:this,this.#a=this.#t===this?s:this.#t.#a,this.#h=this.#t===this?[]:this.#t.#h,t==="!"&&!this.#t.#u&&this.#h.push(this),this.#b=this.#o?this.#o.#s.length:0}get hasMagic(){if(this.#e!==void 0)return this.#e;for(let t of this.#s)if(typeof t!="string"&&(t.type||t.hasMagic))return this.#e=!0;return this.#e}toString(){return this.#c!==void 0?this.#c:this.type?this.#c=this.type+"("+this.#s.map(t=>String(t)).join("|")+")":this.#c=this.#s.map(t=>String(t)).join("")}#g(){if(this!==this.#t)throw new Error("should only call on root");if(this.#u)return this;this.toString(),this.#u=!0;let t;for(;t=this.#h.pop();){if(t.type!=="!")continue;let e=t,s=e.#o;for(;s;){for(let r=e.#b+1;!s.type&&r<s.#s.length;r++)for(let n of t.#s){if(typeof n=="string")throw new Error("string part in extglob AST??");n.copyIn(s.#s[r])}e=s,s=e.#o}}return this}push(...t){for(let e of t)if(e!==""){if(typeof e!="string"&&!(e instanceof i&&e.#o===this))throw new Error("invalid part: "+e);this.#s.push(e)}}toJSON(){let t=this.type===null?this.#s.slice().map(e=>typeof e=="string"?e:e.toJSON()):[this.type,...this.#s.map(e=>e.toJSON())];return this.isStart()&&!this.type&&t.unshift([]),this.isEnd()&&(this===this.#t||this.#t.#u&&this.#o?.type==="!")&&t.push({}),t}isStart(){if(this.#t===this)return!0;if(!this.#o?.isStart())return!1;if(this.#b===0)return!0;let t=this.#o;for(let e=0;e<this.#b;e++){let s=t.#s[e];if(!(s instanceof i&&s.type==="!"))return!1}return!0}isEnd(){if(this.#t===this||this.#o?.type==="!")return!0;if(!this.#o?.isEnd())return!1;if(!this.type)return this.#o?.isEnd();let t=this.#o?this.#o.#s.length:0;return this.#b===t-1}copyIn(t){typeof t=="string"?this.push(t):this.push(t.clone(this))}clone(t){let e=new i(this.type,t);for(let s of this.#s)e.copyIn(s);return e}static#w(t,e,s,r){let n=!1,o=!1,a=-1,c=!1;if(e.type===null){let d=s,g="";for(;d<t.length;){let m=t.charAt(d++);if(n||m==="\\"){n=!n,g+=m;continue}if(o){d===a+1?(m==="^"||m==="!")&&(c=!0):m==="]"&&!(d===a+2&&c)&&(o=!1),g+=m;continue}else if(m==="["){o=!0,a=d,c=!1,g+=m;continue}if(!r.noext&&yr(m)&&t.charAt(d)==="("){e.push(g),g="";let y=new i(m,e);d=i.#w(t,y,d,r),e.push(y);continue}g+=m}return e.push(g),d}let l=s+1,h=new i(null,e),u=[],f="";for(;l<t.length;){let d=t.charAt(l++);if(n||d==="\\"){n=!n,f+=d;continue}if(o){l===a+1?(d==="^"||d==="!")&&(c=!0):d==="]"&&!(l===a+2&&c)&&(o=!1),f+=d;continue}else if(d==="["){o=!0,a=l,c=!1,f+=d;continue}if(yr(d)&&t.charAt(l)==="("){h.push(f),f="";let g=new i(d,h);h.push(g),l=i.#w(t,g,l,r);continue}if(d==="|"){h.push(f),f="",u.push(h),h=new i(null,e);continue}if(d===")")return f===""&&e.#s.length===0&&(e.#r=!0),h.push(f),f="",e.push(...u,h),l;f+=d}return e.type=null,e.#e=void 0,e.#s=[t.substring(s-1)],l}static fromGlob(t,e={}){let s=new i(null,void 0,e);return i.#w(t,s,0,e),s}toMMPattern(){if(this!==this.#t)return this.#t.toMMPattern();let t=this.toString(),[e,s,r,n]=this.toRegExpSource();if(!(r||this.#e||this.#a.nocase&&!this.#a.nocaseMagicOnly&&t.toUpperCase()!==t.toLowerCase()))return s;let a=(this.#a.nocase?"i":"")+(n?"u":"");return Object.assign(new RegExp(`^${e}$`,a),{_src:e,_glob:t})}get options(){return this.#a}toRegExpSource(t){let e=t??!!this.#a.dot;if(this.#t===this&&this.#g(),!this.type){let c=this.isStart()&&this.isEnd(),l=this.#s.map(d=>{let[g,m,y,w]=typeof d=="string"?i.#f(d,this.#e,c):d.toRegExpSource(t);return this.#e=this.#e||y,this.#n=this.#n||w,g}).join(""),h="";if(this.isStart()&&typeof this.#s[0]=="string"&&!(this.#s.length===1&&Uc.has(this.#s[0]))){let g=$c,m=e&&g.has(l.charAt(0))||l.startsWith("\\.")&&g.has(l.charAt(2))||l.startsWith("\\.\\.")&&g.has(l.charAt(4)),y=!e&&!t&&g.has(l.charAt(0));h=m?qc:y?Be:""}let u="";return this.isEnd()&&this.#t.#u&&this.#o?.type==="!"&&(u="(?:$|\\/)"),[h+l+u,pt(l),this.#e=!!this.#e,this.#n]}let s=this.type==="*"||this.type==="+",r=this.type==="!"?"(?:(?!(?:":"(?:",n=this.#d(e);if(this.isStart()&&this.isEnd()&&!n&&this.type!=="!"){let c=this.toString();return this.#s=[c],this.type=null,this.#e=void 0,[c,pt(this.toString()),!1,!1]}let o=!s||t||e||!Be?"":this.#d(!0);o===n&&(o=""),o&&(n=`(?:${n})(?:${o})*?`);let a="";if(this.type==="!"&&this.#r)a=(this.isStart()&&!e?Be:"")+br;else{let c=this.type==="!"?"))"+(this.isStart()&&!e&&!t?Be:"")+Sr+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&o?")":this.type==="*"&&o?")?":`)${this.type}`;a=r+n+c}return[a,pt(n),this.#e=!!this.#e,this.#n]}#d(t){return this.#s.map(e=>{if(typeof e=="string")throw new Error("string type in extglob ast??");let[s,r,n,o]=e.toRegExpSource(t);return this.#n=this.#n||o,s}).filter(e=>!(this.isStart()&&this.isEnd())||!!e).join("|")}static#f(t,e,s=!1){let r=!1,n="",o=!1;for(let a=0;a<t.length;a++){let c=t.charAt(a);if(r){r=!1,n+=(Gc.has(c)?"\\":"")+c;continue}if(c==="\\"){a===t.length-1?n+="\\\\":r=!0;continue}if(c==="["){let[l,h,u,f]=wr(t,a);if(u){n+=l,o=o||h,a+=u-1,e=e||f;continue}}if(c==="*"){s&&t==="*"?n+=br:n+=Sr,e=!0;continue}if(c==="?"){n+=qi,e=!0;continue}n+=zc(c)}return[n,pt(t),!!e,o]}};p();var Ut=(i,{windowsPathsNoEscape:t=!1}={})=>t?i.replace(/[?*()[\]]/g,"[$&]"):i.replace(/[?*()[\]\\]/g,"\\$&");var X=(i,t,e={})=>(le(t),!e.nocomment&&t.charAt(0)==="#"?!1:new ot(t,e).match(i)),Hc=/^\*+([^+@!?\*\[\(]*)$/,Yc=i=>t=>!t.startsWith(".")&&t.endsWith(i),Jc=i=>t=>t.endsWith(i),Kc=i=>(i=i.toLowerCase(),t=>!t.startsWith(".")&&t.toLowerCase().endsWith(i)),Vc=i=>(i=i.toLowerCase(),t=>t.toLowerCase().endsWith(i)),Qc=/^\*+\.\*+$/,Zc=i=>!i.startsWith(".")&&i.includes("."),Xc=i=>i!=="."&&i!==".."&&i.includes("."),th=/^\.\*+$/,eh=i=>i!=="."&&i!==".."&&i.startsWith("."),ih=/^\*+$/,sh=i=>i.length!==0&&!i.startsWith("."),rh=i=>i.length!==0&&i!=="."&&i!=="..",nh=/^\?+([^+@!?\*\[\(]*)?$/,oh=([i,t=""])=>{let e=xr([i]);return t?(t=t.toLowerCase(),s=>e(s)&&s.toLowerCase().endsWith(t)):e},ah=([i,t=""])=>{let e=kr([i]);return t?(t=t.toLowerCase(),s=>e(s)&&s.toLowerCase().endsWith(t)):e},ch=([i,t=""])=>{let e=kr([i]);return t?s=>e(s)&&s.endsWith(t):e},hh=([i,t=""])=>{let e=xr([i]);return t?s=>e(s)&&s.endsWith(t):e},xr=([i])=>{let t=i.length;return e=>e.length===t&&!e.startsWith(".")},kr=([i])=>{let t=i.length;return e=>e.length===t&&e!=="."&&e!==".."},Fr=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",vr={win32:{sep:"\\"},posix:{sep:"/"}},lh=Fr==="win32"?vr.win32.sep:vr.posix.sep;X.sep=lh;var Y=Symbol("globstar **");X.GLOBSTAR=Y;var uh="[^/]",fh=uh+"*?",dh="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",ph="(?:(?!(?:\\/|^)\\.).)*?",mh=(i,t={})=>e=>X(e,i,t);X.filter=mh;var ht=(i,t={})=>Object.assign({},i,t),gh=i=>{if(!i||typeof i!="object"||!Object.keys(i).length)return X;let t=X;return Object.assign((s,r,n={})=>t(s,r,ht(i,n)),{Minimatch:class extends t.Minimatch{constructor(r,n={}){super(r,ht(i,n))}static defaults(r){return t.defaults(ht(i,r)).Minimatch}},AST:class extends t.AST{constructor(r,n,o={}){super(r,n,ht(i,o))}static fromGlob(r,n={}){return t.AST.fromGlob(r,ht(i,n))}},unescape:(s,r={})=>t.unescape(s,ht(i,r)),escape:(s,r={})=>t.escape(s,ht(i,r)),filter:(s,r={})=>t.filter(s,ht(i,r)),defaults:s=>t.defaults(ht(i,s)),makeRe:(s,r={})=>t.makeRe(s,ht(i,r)),braceExpand:(s,r={})=>t.braceExpand(s,ht(i,r)),match:(s,r,n={})=>t.match(s,r,ht(i,n)),sep:t.sep,GLOBSTAR:Y})};X.defaults=gh;var Or=(i,t={})=>(le(i),t.nobrace||!/\{(?:(?!\{).)*\}/.test(i)?[i]:(0,Cr.default)(i));X.braceExpand=Or;var wh=(i,t={})=>new ot(i,t).makeRe();X.makeRe=wh;var yh=(i,t,e={})=>{let s=new ot(t,e);return i=i.filter(r=>s.match(r)),s.options.nonull&&!i.length&&i.push(t),i};X.match=yh;var Er=/[?*]|[+@!]\(.*?\)|\[|\]/,Sh=i=>i.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),ot=class{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(t,e={}){le(t),e=e||{},this.options=e,this.pattern=t,this.platform=e.platform||Fr,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!e.windowsPathsNoEscape||e.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!e.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!e.nonegate,this.comment=!1,this.empty=!1,this.partial=!!e.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=e.windowsNoMagicRoot!==void 0?e.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let t of this.set)for(let e of t)if(typeof e!="string")return!0;return!1}debug(...t){}make(){let t=this.pattern,e=this.options;if(!e.nocomment&&t.charAt(0)==="#"){this.comment=!0;return}if(!t){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],e.debug&&(this.debug=(...n)=>console.error(...n)),this.debug(this.pattern,this.globSet);let s=this.globSet.map(n=>this.slashSplit(n));this.globParts=this.preprocess(s),this.debug(this.pattern,this.globParts);let r=this.globParts.map((n,o,a)=>{if(this.isWindows&&this.windowsNoMagicRoot){let c=n[0]===""&&n[1]===""&&(n[2]==="?"||!Er.test(n[2]))&&!Er.test(n[3]),l=/^[a-z]:/i.test(n[0]);if(c)return[...n.slice(0,4),...n.slice(4).map(h=>this.parse(h))];if(l)return[n[0],...n.slice(1).map(h=>this.parse(h))]}return n.map(c=>this.parse(c))});if(this.debug(this.pattern,r),this.set=r.filter(n=>n.indexOf(!1)===-1),this.isWindows)for(let n=0;n<this.set.length;n++){let o=this.set[n];o[0]===""&&o[1]===""&&this.globParts[n][2]==="?"&&typeof o[3]=="string"&&/^[a-z]:$/i.test(o[3])&&(o[2]="?")}this.debug(this.pattern,this.set)}preprocess(t){if(this.options.noglobstar)for(let s=0;s<t.length;s++)for(let r=0;r<t[s].length;r++)t[s][r]==="**"&&(t[s][r]="*");let{optimizationLevel:e=1}=this.options;return e>=2?(t=this.firstPhasePreProcess(t),t=this.secondPhasePreProcess(t)):e>=1?t=this.levelOneOptimize(t):t=this.adjascentGlobstarOptimize(t),t}adjascentGlobstarOptimize(t){return t.map(e=>{let s=-1;for(;(s=e.indexOf("**",s+1))!==-1;){let r=s;for(;e[r+1]==="**";)r++;r!==s&&e.splice(s,r-s)}return e})}levelOneOptimize(t){return t.map(e=>(e=e.reduce((s,r)=>{let n=s[s.length-1];return r==="**"&&n==="**"?s:r===".."&&n&&n!==".."&&n!=="."&&n!=="**"?(s.pop(),s):(s.push(r),s)},[]),e.length===0?[""]:e))}levelTwoFileOptimize(t){Array.isArray(t)||(t=this.slashSplit(t));let e=!1;do{if(e=!1,!this.preserveMultipleSlashes){for(let r=1;r<t.length-1;r++){let n=t[r];r===1&&n===""&&t[0]===""||(n==="."||n==="")&&(e=!0,t.splice(r,1),r--)}t[0]==="."&&t.length===2&&(t[1]==="."||t[1]==="")&&(e=!0,t.pop())}let s=0;for(;(s=t.indexOf("..",s+1))!==-1;){let r=t[s-1];r&&r!=="."&&r!==".."&&r!=="**"&&(e=!0,t.splice(s-1,2),s-=2)}}while(e);return t.length===0?[""]:t}firstPhasePreProcess(t){let e=!1;do{e=!1;for(let s of t){let r=-1;for(;(r=s.indexOf("**",r+1))!==-1;){let o=r;for(;s[o+1]==="**";)o++;o>r&&s.splice(r+1,o-r);let a=s[r+1],c=s[r+2],l=s[r+3];if(a!==".."||!c||c==="."||c===".."||!l||l==="."||l==="..")continue;e=!0,s.splice(r,1);let h=s.slice(0);h[r]="**",t.push(h),r--}if(!this.preserveMultipleSlashes){for(let o=1;o<s.length-1;o++){let a=s[o];o===1&&a===""&&s[0]===""||(a==="."||a==="")&&(e=!0,s.splice(o,1),o--)}s[0]==="."&&s.length===2&&(s[1]==="."||s[1]==="")&&(e=!0,s.pop())}let n=0;for(;(n=s.indexOf("..",n+1))!==-1;){let o=s[n-1];if(o&&o!=="."&&o!==".."&&o!=="**"){e=!0;let c=n===1&&s[n+1]==="**"?["."]:[];s.splice(n-1,2,...c),s.length===0&&s.push(""),n-=2}}}}while(e);return t}secondPhasePreProcess(t){for(let e=0;e<t.length-1;e++)for(let s=e+1;s<t.length;s++){let r=this.partsMatch(t[e],t[s],!this.preserveMultipleSlashes);if(r){t[e]=[],t[s]=r;break}}return t.filter(e=>e.length)}partsMatch(t,e,s=!1){let r=0,n=0,o=[],a="";for(;r<t.length&&n<e.length;)if(t[r]===e[n])o.push(a==="b"?e[n]:t[r]),r++,n++;else if(s&&t[r]==="**"&&e[n]===t[r+1])o.push(t[r]),r++;else if(s&&e[n]==="**"&&t[r]===e[n+1])o.push(e[n]),n++;else if(t[r]==="*"&&e[n]&&(this.options.dot||!e[n].startsWith("."))&&e[n]!=="**"){if(a==="b")return!1;a="a",o.push(t[r]),r++,n++}else if(e[n]==="*"&&t[r]&&(this.options.dot||!t[r].startsWith("."))&&t[r]!=="**"){if(a==="a")return!1;a="b",o.push(e[n]),r++,n++}else return!1;return t.length===e.length&&o}parseNegate(){if(this.nonegate)return;let t=this.pattern,e=!1,s=0;for(let r=0;r<t.length&&t.charAt(r)==="!";r++)e=!e,s++;s&&(this.pattern=t.slice(s)),this.negate=e}matchOne(t,e,s=!1){let r=this.options;if(this.isWindows){let m=typeof t[0]=="string"&&/^[a-z]:$/i.test(t[0]),y=!m&&t[0]===""&&t[1]===""&&t[2]==="?"&&/^[a-z]:$/i.test(t[3]),w=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),v=!w&&e[0]===""&&e[1]===""&&e[2]==="?"&&typeof e[3]=="string"&&/^[a-z]:$/i.test(e[3]),b=y?3:m?0:void 0,E=v?3:w?0:void 0;if(typeof b=="number"&&typeof E=="number"){let[F,M]=[t[b],e[E]];F.toLowerCase()===M.toLowerCase()&&(e[E]=F,E>b?e=e.slice(E):b>E&&(t=t.slice(b)))}}let{optimizationLevel:n=1}=this.options;n>=2&&(t=this.levelTwoFileOptimize(t)),this.debug("matchOne",this,{file:t,pattern:e}),this.debug("matchOne",t.length,e.length);for(var o=0,a=0,c=t.length,l=e.length;o<c&&a<l;o++,a++){this.debug("matchOne loop");var h=e[a],u=t[o];if(this.debug(e,h,u),h===!1)return!1;if(h===Y){this.debug("GLOBSTAR",[e,h,u]);var f=o,d=a+1;if(d===l){for(this.debug("** at the end");o<c;o++)if(t[o]==="."||t[o]===".."||!r.dot&&t[o].charAt(0)===".")return!1;return!0}for(;f<c;){var g=t[f];if(this.debug(`
globstar while`,t,f,e,d,g),this.matchOne(t.slice(f),e.slice(d),s))return this.debug("globstar found match!",f,c,g),!0;if(g==="."||g===".."||!r.dot&&g.charAt(0)==="."){this.debug("dot detected!",t,f,e,d);break}this.debug("globstar swallow a segment, and continue"),f++}return!!(s&&(this.debug(`
>>> no match, partial?`,t,f,e,d),f===c))}let m;if(typeof h=="string"?(m=u===h,this.debug("string match",h,u,m)):(m=h.test(u),this.debug("pattern match",h,u,m)),!m)return!1}if(o===c&&a===l)return!0;if(o===c)return s;if(a===l)return o===c-1&&t[o]==="";throw new Error("wtf?")}braceExpand(){return Or(this.pattern,this.options)}parse(t){le(t);let e=this.options;if(t==="**")return Y;if(t==="")return"";let s,r=null;(s=t.match(ih))?r=e.dot?rh:sh:(s=t.match(Hc))?r=(e.nocase?e.dot?Vc:Kc:e.dot?Jc:Yc)(s[1]):(s=t.match(nh))?r=(e.nocase?e.dot?ah:oh:e.dot?ch:hh)(s):(s=t.match(Qc))?r=e.dot?Xc:Zc:(s=t.match(th))&&(r=eh);let n=$t.fromGlob(t,this.options).toMMPattern();return r&&typeof n=="object"&&Reflect.defineProperty(n,"test",{value:r}),n}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let t=this.set;if(!t.length)return this.regexp=!1,this.regexp;let e=this.options,s=e.noglobstar?fh:e.dot?dh:ph,r=new Set(e.nocase?["i"]:[]),n=t.map(c=>{let l=c.map(h=>{if(h instanceof RegExp)for(let u of h.flags.split(""))r.add(u);return typeof h=="string"?Sh(h):h===Y?Y:h._src});return l.forEach((h,u)=>{let f=l[u+1],d=l[u-1];h!==Y||d===Y||(d===void 0?f!==void 0&&f!==Y?l[u+1]="(?:\\/|"+s+"\\/)?"+f:l[u]=s:f===void 0?l[u-1]=d+"(?:\\/|"+s+")?":f!==Y&&(l[u-1]=d+"(?:\\/|\\/"+s+"\\/)"+f,l[u+1]=Y))}),l.filter(h=>h!==Y).join("/")}).join("|"),[o,a]=t.length>1?["(?:",")"]:["",""];n="^"+o+n+a+"$",this.negate&&(n="^(?!"+n+").+$");try{this.regexp=new RegExp(n,[...r].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(t){return this.preserveMultipleSlashes?t.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(t)?["",...t.split(/\/+/)]:t.split(/\/+/)}match(t,e=this.partial){if(this.debug("match",t,this.pattern),this.comment)return!1;if(this.empty)return t==="";if(t==="/"&&e)return!0;let s=this.options;this.isWindows&&(t=t.split("\\").join("/"));let r=this.slashSplit(t);this.debug(this.pattern,"split",r);let n=this.set;this.debug(this.pattern,"set",n);let o=r[r.length-1];if(!o)for(let a=r.length-2;!o&&a>=0;a--)o=r[a];for(let a=0;a<n.length;a++){let c=n[a],l=r;if(s.matchBase&&c.length===1&&(l=[o]),this.matchOne(l,c,e))return s.flipNegate?!0:!this.negate}return s.flipNegate?!1:this.negate}static defaults(t){return X.defaults(t).Minimatch}};X.AST=$t;X.Minimatch=ot;X.escape=Ut;X.unescape=pt;p();import{fileURLToPath as Qh}from"node:url";p();p();var Gt=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,Ar=new Set,$i=typeof process=="object"&&process?process:{},Rr=(i,t,e,s)=>{typeof $i.emitWarning=="function"?$i.emitWarning(i,t,e,s):console.error(`[${e}] ${t}: ${i}`)},Le=globalThis.AbortController,Tr=globalThis.AbortSignal;if(typeof Le>"u"){Tr=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(s,r){this._onabort.push(r)}},Le=class{constructor(){t()}signal=new Tr;abort(s){if(!this.signal.aborted){this.signal.reason=s,this.signal.aborted=!0;for(let r of this.signal._onabort)r(s);this.signal.onabort?.(s)}}};let i=$i.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",t=()=>{i&&(i=!1,Rr("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",t))}}var bh=i=>!Ar.has(i),Rd=Symbol("type"),Ot=i=>i&&i===Math.floor(i)&&i>0&&isFinite(i),_r=i=>Ot(i)?i<=Math.pow(2,8)?Uint8Array:i<=Math.pow(2,16)?Uint16Array:i<=Math.pow(2,32)?Uint32Array:i<=Number.MAX_SAFE_INTEGER?zt:null:null,zt=class extends Array{constructor(t){super(t),this.fill(0)}},Ui=class i{heap;length;static#t=!1;static create(t){let e=_r(t);if(!e)return[];i.#t=!0;let s=new i(t,e);return i.#t=!1,s}constructor(t,e){if(!i.#t)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new e(t),this.length=0}push(t){this.heap[this.length++]=t}pop(){return this.heap[--this.length]}},fe=class i{#t;#e;#n;#s;#o;#b;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#h;#u;#a;#c;#r;#g;#w;#d;#f;#C;#m;#x;#k;#S;#v;#E;#p;static unsafeExposeInternals(t){return{starts:t.#k,ttls:t.#S,sizes:t.#x,keyMap:t.#a,keyList:t.#c,valList:t.#r,next:t.#g,prev:t.#w,get head(){return t.#d},get tail(){return t.#f},free:t.#C,isBackgroundFetch:e=>t.#l(e),backgroundFetch:(e,s,r,n)=>t.#I(e,s,r,n),moveToTail:e=>t.#j(e),indexes:e=>t.#O(e),rindexes:e=>t.#T(e),isStale:e=>t.#y(e)}}get max(){return this.#t}get maxSize(){return this.#e}get calculatedSize(){return this.#u}get size(){return this.#h}get fetchMethod(){return this.#o}get memoMethod(){return this.#b}get dispose(){return this.#n}get disposeAfter(){return this.#s}constructor(t){let{max:e=0,ttl:s,ttlResolution:r=1,ttlAutopurge:n,updateAgeOnGet:o,updateAgeOnHas:a,allowStale:c,dispose:l,disposeAfter:h,noDisposeOnSet:u,noUpdateTTL:f,maxSize:d=0,maxEntrySize:g=0,sizeCalculation:m,fetchMethod:y,memoMethod:w,noDeleteOnFetchRejection:v,noDeleteOnStaleGet:b,allowStaleOnFetchRejection:E,allowStaleOnFetchAbort:F,ignoreFetchAbort:M}=t;if(e!==0&&!Ot(e))throw new TypeError("max option must be a nonnegative integer");let nt=e?_r(e):Array;if(!nt)throw new Error("invalid max value: "+e);if(this.#t=e,this.#e=d,this.maxEntrySize=g||this.#e,this.sizeCalculation=m,this.sizeCalculation){if(!this.#e&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(w!==void 0&&typeof w!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#b=w,y!==void 0&&typeof y!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#o=y,this.#E=!!y,this.#a=new Map,this.#c=new Array(e).fill(void 0),this.#r=new Array(e).fill(void 0),this.#g=new nt(e),this.#w=new nt(e),this.#d=0,this.#f=0,this.#C=Ui.create(e),this.#h=0,this.#u=0,typeof l=="function"&&(this.#n=l),typeof h=="function"?(this.#s=h,this.#m=[]):(this.#s=void 0,this.#m=void 0),this.#v=!!this.#n,this.#p=!!this.#s,this.noDisposeOnSet=!!u,this.noUpdateTTL=!!f,this.noDeleteOnFetchRejection=!!v,this.allowStaleOnFetchRejection=!!E,this.allowStaleOnFetchAbort=!!F,this.ignoreFetchAbort=!!M,this.maxEntrySize!==0){if(this.#e!==0&&!Ot(this.#e))throw new TypeError("maxSize must be a positive integer if specified");if(!Ot(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#R()}if(this.allowStale=!!c,this.noDeleteOnStaleGet=!!b,this.updateAgeOnGet=!!o,this.updateAgeOnHas=!!a,this.ttlResolution=Ot(r)||r===0?r:1,this.ttlAutopurge=!!n,this.ttl=s||0,this.ttl){if(!Ot(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#A()}if(this.#t===0&&this.ttl===0&&this.#e===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#t&&!this.#e){let ft="LRU_CACHE_UNBOUNDED";bh(ft)&&(Ar.add(ft),Rr("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",ft,i))}}getRemainingTTL(t){return this.#a.has(t)?1/0:0}#A(){let t=new zt(this.#t),e=new zt(this.#t);this.#S=t,this.#k=e,this.#N=(n,o,a=Gt.now())=>{if(e[n]=o!==0?a:0,t[n]=o,o!==0&&this.ttlAutopurge){let c=setTimeout(()=>{this.#y(n)&&this.#_(this.#c[n],"expire")},o+1);c.unref&&c.unref()}},this.#F=n=>{e[n]=t[n]!==0?Gt.now():0},this.#i=(n,o)=>{if(t[o]){let a=t[o],c=e[o];if(!a||!c)return;n.ttl=a,n.start=c,n.now=s||r();let l=n.now-c;n.remainingTTL=a-l}};let s=0,r=()=>{let n=Gt.now();if(this.ttlResolution>0){s=n;let o=setTimeout(()=>s=0,this.ttlResolution);o.unref&&o.unref()}return n};this.getRemainingTTL=n=>{let o=this.#a.get(n);if(o===void 0)return 0;let a=t[o],c=e[o];if(!a||!c)return 1/0;let l=(s||r())-c;return a-l},this.#y=n=>{let o=e[n],a=t[n];return!!a&&!!o&&(s||r())-o>a}}#F=()=>{};#i=()=>{};#N=()=>{};#y=()=>!1;#R(){let t=new zt(this.#t);this.#u=0,this.#x=t,this.#D=e=>{this.#u-=t[e],t[e]=0},this.#P=(e,s,r,n)=>{if(this.#l(s))return 0;if(!Ot(r))if(n){if(typeof n!="function")throw new TypeError("sizeCalculation must be a function");if(r=n(s,e),!Ot(r))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return r},this.#M=(e,s,r)=>{if(t[e]=s,this.#e){let n=this.#e-t[e];for(;this.#u>n;)this.#L(!0)}this.#u+=t[e],r&&(r.entrySize=s,r.totalCalculatedSize=this.#u)}}#D=t=>{};#M=(t,e,s)=>{};#P=(t,e,s,r)=>{if(s||r)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#O({allowStale:t=this.allowStale}={}){if(this.#h)for(let e=this.#f;!(!this.#B(e)||((t||!this.#y(e))&&(yield e),e===this.#d));)e=this.#w[e]}*#T({allowStale:t=this.allowStale}={}){if(this.#h)for(let e=this.#d;!(!this.#B(e)||((t||!this.#y(e))&&(yield e),e===this.#f));)e=this.#g[e]}#B(t){return t!==void 0&&this.#a.get(this.#c[t])===t}*entries(){for(let t of this.#O())this.#r[t]!==void 0&&this.#c[t]!==void 0&&!this.#l(this.#r[t])&&(yield[this.#c[t],this.#r[t]])}*rentries(){for(let t of this.#T())this.#r[t]!==void 0&&this.#c[t]!==void 0&&!this.#l(this.#r[t])&&(yield[this.#c[t],this.#r[t]])}*keys(){for(let t of this.#O()){let e=this.#c[t];e!==void 0&&!this.#l(this.#r[t])&&(yield e)}}*rkeys(){for(let t of this.#T()){let e=this.#c[t];e!==void 0&&!this.#l(this.#r[t])&&(yield e)}}*values(){for(let t of this.#O())this.#r[t]!==void 0&&!this.#l(this.#r[t])&&(yield this.#r[t])}*rvalues(){for(let t of this.#T())this.#r[t]!==void 0&&!this.#l(this.#r[t])&&(yield this.#r[t])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(t,e={}){for(let s of this.#O()){let r=this.#r[s],n=this.#l(r)?r.__staleWhileFetching:r;if(n!==void 0&&t(n,this.#c[s],this))return this.get(this.#c[s],e)}}forEach(t,e=this){for(let s of this.#O()){let r=this.#r[s],n=this.#l(r)?r.__staleWhileFetching:r;n!==void 0&&t.call(e,n,this.#c[s],this)}}rforEach(t,e=this){for(let s of this.#T()){let r=this.#r[s],n=this.#l(r)?r.__staleWhileFetching:r;n!==void 0&&t.call(e,n,this.#c[s],this)}}purgeStale(){let t=!1;for(let e of this.#T({allowStale:!0}))this.#y(e)&&(this.#_(this.#c[e],"expire"),t=!0);return t}info(t){let e=this.#a.get(t);if(e===void 0)return;let s=this.#r[e],r=this.#l(s)?s.__staleWhileFetching:s;if(r===void 0)return;let n={value:r};if(this.#S&&this.#k){let o=this.#S[e],a=this.#k[e];if(o&&a){let c=o-(Gt.now()-a);n.ttl=c,n.start=Date.now()}}return this.#x&&(n.size=this.#x[e]),n}dump(){let t=[];for(let e of this.#O({allowStale:!0})){let s=this.#c[e],r=this.#r[e],n=this.#l(r)?r.__staleWhileFetching:r;if(n===void 0||s===void 0)continue;let o={value:n};if(this.#S&&this.#k){o.ttl=this.#S[e];let a=Gt.now()-this.#k[e];o.start=Math.floor(Date.now()-a)}this.#x&&(o.size=this.#x[e]),t.unshift([s,o])}return t}load(t){this.clear();for(let[e,s]of t){if(s.start){let r=Date.now()-s.start;s.start=Gt.now()-r}this.set(e,s.value,s)}}set(t,e,s={}){if(e===void 0)return this.delete(t),this;let{ttl:r=this.ttl,start:n,noDisposeOnSet:o=this.noDisposeOnSet,sizeCalculation:a=this.sizeCalculation,status:c}=s,{noUpdateTTL:l=this.noUpdateTTL}=s,h=this.#P(t,e,s.size||0,a);if(this.maxEntrySize&&h>this.maxEntrySize)return c&&(c.set="miss",c.maxEntrySizeExceeded=!0),this.#_(t,"set"),this;let u=this.#h===0?void 0:this.#a.get(t);if(u===void 0)u=this.#h===0?this.#f:this.#C.length!==0?this.#C.pop():this.#h===this.#t?this.#L(!1):this.#h,this.#c[u]=t,this.#r[u]=e,this.#a.set(t,u),this.#g[this.#f]=u,this.#w[u]=this.#f,this.#f=u,this.#h++,this.#M(u,h,c),c&&(c.set="add"),l=!1;else{this.#j(u);let f=this.#r[u];if(e!==f){if(this.#E&&this.#l(f)){f.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:d}=f;d!==void 0&&!o&&(this.#v&&this.#n?.(d,t,"set"),this.#p&&this.#m?.push([d,t,"set"]))}else o||(this.#v&&this.#n?.(f,t,"set"),this.#p&&this.#m?.push([f,t,"set"]));if(this.#D(u),this.#M(u,h,c),this.#r[u]=e,c){c.set="replace";let d=f&&this.#l(f)?f.__staleWhileFetching:f;d!==void 0&&(c.oldValue=d)}}else c&&(c.set="update")}if(r!==0&&!this.#S&&this.#A(),this.#S&&(l||this.#N(u,r,n),c&&this.#i(c,u)),!o&&this.#p&&this.#m){let f=this.#m,d;for(;d=f?.shift();)this.#s?.(...d)}return this}pop(){try{for(;this.#h;){let t=this.#r[this.#d];if(this.#L(!0),this.#l(t)){if(t.__staleWhileFetching)return t.__staleWhileFetching}else if(t!==void 0)return t}}finally{if(this.#p&&this.#m){let t=this.#m,e;for(;e=t?.shift();)this.#s?.(...e)}}}#L(t){let e=this.#d,s=this.#c[e],r=this.#r[e];return this.#E&&this.#l(r)?r.__abortController.abort(new Error("evicted")):(this.#v||this.#p)&&(this.#v&&this.#n?.(r,s,"evict"),this.#p&&this.#m?.push([r,s,"evict"])),this.#D(e),t&&(this.#c[e]=void 0,this.#r[e]=void 0,this.#C.push(e)),this.#h===1?(this.#d=this.#f=0,this.#C.length=0):this.#d=this.#g[e],this.#a.delete(s),this.#h--,e}has(t,e={}){let{updateAgeOnHas:s=this.updateAgeOnHas,status:r}=e,n=this.#a.get(t);if(n!==void 0){let o=this.#r[n];if(this.#l(o)&&o.__staleWhileFetching===void 0)return!1;if(this.#y(n))r&&(r.has="stale",this.#i(r,n));else return s&&this.#F(n),r&&(r.has="hit",this.#i(r,n)),!0}else r&&(r.has="miss");return!1}peek(t,e={}){let{allowStale:s=this.allowStale}=e,r=this.#a.get(t);if(r===void 0||!s&&this.#y(r))return;let n=this.#r[r];return this.#l(n)?n.__staleWhileFetching:n}#I(t,e,s,r){let n=e===void 0?void 0:this.#r[e];if(this.#l(n))return n;let o=new Le,{signal:a}=s;a?.addEventListener("abort",()=>o.abort(a.reason),{signal:o.signal});let c={signal:o.signal,options:s,context:r},l=(m,y=!1)=>{let{aborted:w}=o.signal,v=s.ignoreFetchAbort&&m!==void 0;if(s.status&&(w&&!y?(s.status.fetchAborted=!0,s.status.fetchError=o.signal.reason,v&&(s.status.fetchAbortIgnored=!0)):s.status.fetchResolved=!0),w&&!v&&!y)return u(o.signal.reason);let b=d;return this.#r[e]===d&&(m===void 0?b.__staleWhileFetching?this.#r[e]=b.__staleWhileFetching:this.#_(t,"fetch"):(s.status&&(s.status.fetchUpdated=!0),this.set(t,m,c.options))),m},h=m=>(s.status&&(s.status.fetchRejected=!0,s.status.fetchError=m),u(m)),u=m=>{let{aborted:y}=o.signal,w=y&&s.allowStaleOnFetchAbort,v=w||s.allowStaleOnFetchRejection,b=v||s.noDeleteOnFetchRejection,E=d;if(this.#r[e]===d&&(!b||E.__staleWhileFetching===void 0?this.#_(t,"fetch"):w||(this.#r[e]=E.__staleWhileFetching)),v)return s.status&&E.__staleWhileFetching!==void 0&&(s.status.returnedStale=!0),E.__staleWhileFetching;if(E.__returned===E)throw m},f=(m,y)=>{let w=this.#o?.(t,n,c);w&&w instanceof Promise&&w.then(v=>m(v===void 0?void 0:v),y),o.signal.addEventListener("abort",()=>{(!s.ignoreFetchAbort||s.allowStaleOnFetchAbort)&&(m(void 0),s.allowStaleOnFetchAbort&&(m=v=>l(v,!0)))})};s.status&&(s.status.fetchDispatched=!0);let d=new Promise(f).then(l,h),g=Object.assign(d,{__abortController:o,__staleWhileFetching:n,__returned:void 0});return e===void 0?(this.set(t,g,{...c.options,status:void 0}),e=this.#a.get(t)):this.#r[e]=g,g}#l(t){if(!this.#E)return!1;let e=t;return!!e&&e instanceof Promise&&e.hasOwnProperty("__staleWhileFetching")&&e.__abortController instanceof Le}async fetch(t,e={}){let{allowStale:s=this.allowStale,updateAgeOnGet:r=this.updateAgeOnGet,noDeleteOnStaleGet:n=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:c=0,sizeCalculation:l=this.sizeCalculation,noUpdateTTL:h=this.noUpdateTTL,noDeleteOnFetchRejection:u=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:f=this.allowStaleOnFetchRejection,ignoreFetchAbort:d=this.ignoreFetchAbort,allowStaleOnFetchAbort:g=this.allowStaleOnFetchAbort,context:m,forceRefresh:y=!1,status:w,signal:v}=e;if(!this.#E)return w&&(w.fetch="get"),this.get(t,{allowStale:s,updateAgeOnGet:r,noDeleteOnStaleGet:n,status:w});let b={allowStale:s,updateAgeOnGet:r,noDeleteOnStaleGet:n,ttl:o,noDisposeOnSet:a,size:c,sizeCalculation:l,noUpdateTTL:h,noDeleteOnFetchRejection:u,allowStaleOnFetchRejection:f,allowStaleOnFetchAbort:g,ignoreFetchAbort:d,status:w,signal:v},E=this.#a.get(t);if(E===void 0){w&&(w.fetch="miss");let F=this.#I(t,E,b,m);return F.__returned=F}else{let F=this.#r[E];if(this.#l(F)){let x=s&&F.__staleWhileFetching!==void 0;return w&&(w.fetch="inflight",x&&(w.returnedStale=!0)),x?F.__staleWhileFetching:F.__returned=F}let M=this.#y(E);if(!y&&!M)return w&&(w.fetch="hit"),this.#j(E),r&&this.#F(E),w&&this.#i(w,E),F;let nt=this.#I(t,E,b,m),S=nt.__staleWhileFetching!==void 0&&s;return w&&(w.fetch=M?"stale":"refresh",S&&M&&(w.returnedStale=!0)),S?nt.__staleWhileFetching:nt.__returned=nt}}async forceFetch(t,e={}){let s=await this.fetch(t,e);if(s===void 0)throw new Error("fetch() returned undefined");return s}memo(t,e={}){let s=this.#b;if(!s)throw new Error("no memoMethod provided to constructor");let{context:r,forceRefresh:n,...o}=e,a=this.get(t,o);if(!n&&a!==void 0)return a;let c=s(t,a,{options:o,context:r});return this.set(t,c,o),c}get(t,e={}){let{allowStale:s=this.allowStale,updateAgeOnGet:r=this.updateAgeOnGet,noDeleteOnStaleGet:n=this.noDeleteOnStaleGet,status:o}=e,a=this.#a.get(t);if(a!==void 0){let c=this.#r[a],l=this.#l(c);return o&&this.#i(o,a),this.#y(a)?(o&&(o.get="stale"),l?(o&&s&&c.__staleWhileFetching!==void 0&&(o.returnedStale=!0),s?c.__staleWhileFetching:void 0):(n||this.#_(t,"expire"),o&&s&&(o.returnedStale=!0),s?c:void 0)):(o&&(o.get="hit"),l?c.__staleWhileFetching:(this.#j(a),r&&this.#F(a),c))}else o&&(o.get="miss")}#W(t,e){this.#w[e]=t,this.#g[t]=e}#j(t){t!==this.#f&&(t===this.#d?this.#d=this.#g[t]:this.#W(this.#w[t],this.#g[t]),this.#W(this.#f,t),this.#f=t)}delete(t){return this.#_(t,"delete")}#_(t,e){let s=!1;if(this.#h!==0){let r=this.#a.get(t);if(r!==void 0)if(s=!0,this.#h===1)this.#q(e);else{this.#D(r);let n=this.#r[r];if(this.#l(n)?n.__abortController.abort(new Error("deleted")):(this.#v||this.#p)&&(this.#v&&this.#n?.(n,t,e),this.#p&&this.#m?.push([n,t,e])),this.#a.delete(t),this.#c[r]=void 0,this.#r[r]=void 0,r===this.#f)this.#f=this.#w[r];else if(r===this.#d)this.#d=this.#g[r];else{let o=this.#w[r];this.#g[o]=this.#g[r];let a=this.#g[r];this.#w[a]=this.#w[r]}this.#h--,this.#C.push(r)}}if(this.#p&&this.#m?.length){let r=this.#m,n;for(;n=r?.shift();)this.#s?.(...n)}return s}clear(){return this.#q("delete")}#q(t){for(let e of this.#T({allowStale:!0})){let s=this.#r[e];if(this.#l(s))s.__abortController.abort(new Error("deleted"));else{let r=this.#c[e];this.#v&&this.#n?.(s,r,t),this.#p&&this.#m?.push([s,r,t])}}if(this.#a.clear(),this.#r.fill(void 0),this.#c.fill(void 0),this.#S&&this.#k&&(this.#S.fill(0),this.#k.fill(0)),this.#x&&this.#x.fill(0),this.#d=0,this.#f=0,this.#C.length=0,this.#u=0,this.#h=0,this.#p&&this.#m){let e=this.#m,s;for(;s=e?.shift();)this.#s?.(...s)}}};import{posix as _h,win32 as Xi}from"node:path";import{fileURLToPath as Nh}from"node:url";import{lstatSync as Dh,readdir as Mh,readdirSync as Ph,readlinkSync as Bh,realpathSync as Lh}from"fs";import*as Ih from"node:fs";import{lstat as jh,readdir as qh,readlink as $h,realpath as Uh}from"node:fs/promises";p();import{EventEmitter as Vi}from"node:events";import Br from"node:stream";import{StringDecoder as vh}from"node:string_decoder";var Nr=typeof process=="object"&&process?process:{stdout:null,stderr:null},Eh=i=>!!i&&typeof i=="object"&&(i instanceof At||i instanceof Br||Ch(i)||xh(i)),Ch=i=>!!i&&typeof i=="object"&&i instanceof Vi&&typeof i.pipe=="function"&&i.pipe!==Br.Writable.prototype.pipe,xh=i=>!!i&&typeof i=="object"&&i instanceof Vi&&typeof i.write=="function"&&typeof i.end=="function",Ct=Symbol("EOF"),xt=Symbol("maybeEmitEnd"),Tt=Symbol("emittedEnd"),Ie=Symbol("emittingEnd"),de=Symbol("emittedError"),We=Symbol("closed"),Dr=Symbol("read"),je=Symbol("flush"),Mr=Symbol("flushChunk"),mt=Symbol("encoding"),Ht=Symbol("decoder"),W=Symbol("flowing"),pe=Symbol("paused"),Yt=Symbol("resume"),j=Symbol("buffer"),tt=Symbol("pipes"),q=Symbol("bufferLength"),Gi=Symbol("bufferPush"),qe=Symbol("bufferShift"),K=Symbol("objectMode"),P=Symbol("destroyed"),zi=Symbol("error"),Hi=Symbol("emitData"),Pr=Symbol("emitEnd"),Yi=Symbol("emitEnd2"),St=Symbol("async"),Ji=Symbol("abort"),$e=Symbol("aborted"),me=Symbol("signal"),Mt=Symbol("dataListeners"),at=Symbol("discarded"),ge=i=>Promise.resolve().then(i),kh=i=>i(),Fh=i=>i==="end"||i==="finish"||i==="prefinish",Oh=i=>i instanceof ArrayBuffer||!!i&&typeof i=="object"&&i.constructor&&i.constructor.name==="ArrayBuffer"&&i.byteLength>=0,Th=i=>!Buffer.isBuffer(i)&&ArrayBuffer.isView(i),Ue=class{src;dest;opts;ondrain;constructor(t,e,s){this.src=t,this.dest=e,this.opts=s,this.ondrain=()=>t[Yt](),this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(t){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},Ki=class extends Ue{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(t,e,s){super(t,e,s),this.proxyErrors=r=>e.emit("error",r),t.on("error",this.proxyErrors)}},Ah=i=>!!i.objectMode,Rh=i=>!i.objectMode&&!!i.encoding&&i.encoding!=="buffer",At=class extends Vi{[W]=!1;[pe]=!1;[tt]=[];[j]=[];[K];[mt];[St];[Ht];[Ct]=!1;[Tt]=!1;[Ie]=!1;[We]=!1;[de]=null;[q]=0;[P]=!1;[me];[$e]=!1;[Mt]=0;[at]=!1;writable=!0;readable=!0;constructor(...t){let e=t[0]||{};if(super(),e.objectMode&&typeof e.encoding=="string")throw new TypeError("Encoding and objectMode may not be used together");Ah(e)?(this[K]=!0,this[mt]=null):Rh(e)?(this[mt]=e.encoding,this[K]=!1):(this[K]=!1,this[mt]=null),this[St]=!!e.async,this[Ht]=this[mt]?new vh(this[mt]):null,e&&e.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[j]}),e&&e.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[tt]});let{signal:s}=e;s&&(this[me]=s,s.aborted?this[Ji]():s.addEventListener("abort",()=>this[Ji]()))}get bufferLength(){return this[q]}get encoding(){return this[mt]}set encoding(t){throw new Error("Encoding must be set at instantiation time")}setEncoding(t){throw new Error("Encoding must be set at instantiation time")}get objectMode(){return this[K]}set objectMode(t){throw new Error("objectMode must be set at instantiation time")}get async(){return this[St]}set async(t){this[St]=this[St]||!!t}[Ji](){this[$e]=!0,this.emit("abort",this[me]?.reason),this.destroy(this[me]?.reason)}get aborted(){return this[$e]}set aborted(t){}write(t,e,s){if(this[$e])return!1;if(this[Ct])throw new Error("write after end");if(this[P])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof e=="function"&&(s=e,e="utf8"),e||(e="utf8");let r=this[St]?ge:kh;if(!this[K]&&!Buffer.isBuffer(t)){if(Th(t))t=Buffer.from(t.buffer,t.byteOffset,t.byteLength);else if(Oh(t))t=Buffer.from(t);else if(typeof t!="string")throw new Error("Non-contiguous data written to non-objectMode stream")}return this[K]?(this[W]&&this[q]!==0&&this[je](!0),this[W]?this.emit("data",t):this[Gi](t),this[q]!==0&&this.emit("readable"),s&&r(s),this[W]):t.length?(typeof t=="string"&&!(e===this[mt]&&!this[Ht]?.lastNeed)&&(t=Buffer.from(t,e)),Buffer.isBuffer(t)&&this[mt]&&(t=this[Ht].write(t)),this[W]&&this[q]!==0&&this[je](!0),this[W]?this.emit("data",t):this[Gi](t),this[q]!==0&&this.emit("readable"),s&&r(s),this[W]):(this[q]!==0&&this.emit("readable"),s&&r(s),this[W])}read(t){if(this[P])return null;if(this[at]=!1,this[q]===0||t===0||t&&t>this[q])return this[xt](),null;this[K]&&(t=null),this[j].length>1&&!this[K]&&(this[j]=[this[mt]?this[j].join(""):Buffer.concat(this[j],this[q])]);let e=this[Dr](t||null,this[j][0]);return this[xt](),e}[Dr](t,e){if(this[K])this[qe]();else{let s=e;t===s.length||t===null?this[qe]():typeof s=="string"?(this[j][0]=s.slice(t),e=s.slice(0,t),this[q]-=t):(this[j][0]=s.subarray(t),e=s.subarray(0,t),this[q]-=t)}return this.emit("data",e),!this[j].length&&!this[Ct]&&this.emit("drain"),e}end(t,e,s){return typeof t=="function"&&(s=t,t=void 0),typeof e=="function"&&(s=e,e="utf8"),t!==void 0&&this.write(t,e),s&&this.once("end",s),this[Ct]=!0,this.writable=!1,(this[W]||!this[pe])&&this[xt](),this}[Yt](){this[P]||(!this[Mt]&&!this[tt].length&&(this[at]=!0),this[pe]=!1,this[W]=!0,this.emit("resume"),this[j].length?this[je]():this[Ct]?this[xt]():this.emit("drain"))}resume(){return this[Yt]()}pause(){this[W]=!1,this[pe]=!0,this[at]=!1}get destroyed(){return this[P]}get flowing(){return this[W]}get paused(){return this[pe]}[Gi](t){this[K]?this[q]+=1:this[q]+=t.length,this[j].push(t)}[qe](){return this[K]?this[q]-=1:this[q]-=this[j][0].length,this[j].shift()}[je](t=!1){do;while(this[Mr](this[qe]())&&this[j].length);!t&&!this[j].length&&!this[Ct]&&this.emit("drain")}[Mr](t){return this.emit("data",t),this[W]}pipe(t,e){if(this[P])return t;this[at]=!1;let s=this[Tt];return e=e||{},t===Nr.stdout||t===Nr.stderr?e.end=!1:e.end=e.end!==!1,e.proxyErrors=!!e.proxyErrors,s?e.end&&t.end():(this[tt].push(e.proxyErrors?new Ki(this,t,e):new Ue(this,t,e)),this[St]?ge(()=>this[Yt]()):this[Yt]()),t}unpipe(t){let e=this[tt].find(s=>s.dest===t);e&&(this[tt].length===1?(this[W]&&this[Mt]===0&&(this[W]=!1),this[tt]=[]):this[tt].splice(this[tt].indexOf(e),1),e.unpipe())}addListener(t,e){return this.on(t,e)}on(t,e){let s=super.on(t,e);if(t==="data")this[at]=!1,this[Mt]++,!this[tt].length&&!this[W]&&this[Yt]();else if(t==="readable"&&this[q]!==0)super.emit("readable");else if(Fh(t)&&this[Tt])super.emit(t),this.removeAllListeners(t);else if(t==="error"&&this[de]){let r=e;this[St]?ge(()=>r.call(this,this[de])):r.call(this,this[de])}return s}removeListener(t,e){return this.off(t,e)}off(t,e){let s=super.off(t,e);return t==="data"&&(this[Mt]=this.listeners("data").length,this[Mt]===0&&!this[at]&&!this[tt].length&&(this[W]=!1)),s}removeAllListeners(t){let e=super.removeAllListeners(t);return(t==="data"||t===void 0)&&(this[Mt]=0,!this[at]&&!this[tt].length&&(this[W]=!1)),e}get emittedEnd(){return this[Tt]}[xt](){!this[Ie]&&!this[Tt]&&!this[P]&&this[j].length===0&&this[Ct]&&(this[Ie]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[We]&&this.emit("close"),this[Ie]=!1)}emit(t,...e){let s=e[0];if(t!=="error"&&t!=="close"&&t!==P&&this[P])return!1;if(t==="data")return!this[K]&&!s?!1:this[St]?(ge(()=>this[Hi](s)),!0):this[Hi](s);if(t==="end")return this[Pr]();if(t==="close"){if(this[We]=!0,!this[Tt]&&!this[P])return!1;let n=super.emit("close");return this.removeAllListeners("close"),n}else if(t==="error"){this[de]=s,super.emit(zi,s);let n=!this[me]||this.listeners("error").length?super.emit("error",s):!1;return this[xt](),n}else if(t==="resume"){let n=super.emit("resume");return this[xt](),n}else if(t==="finish"||t==="prefinish"){let n=super.emit(t);return this.removeAllListeners(t),n}let r=super.emit(t,...e);return this[xt](),r}[Hi](t){for(let s of this[tt])s.dest.write(t)===!1&&this.pause();let e=this[at]?!1:super.emit("data",t);return this[xt](),e}[Pr](){return this[Tt]?!1:(this[Tt]=!0,this.readable=!1,this[St]?(ge(()=>this[Yi]()),!0):this[Yi]())}[Yi](){if(this[Ht]){let e=this[Ht].end();if(e){for(let s of this[tt])s.dest.write(e);this[at]||super.emit("data",e)}}for(let e of this[tt])e.end();let t=super.emit("end");return this.removeAllListeners("end"),t}async collect(){let t=Object.assign([],{dataLength:0});this[K]||(t.dataLength=0);let e=this.promise();return this.on("data",s=>{t.push(s),this[K]||(t.dataLength+=s.length)}),await e,t}async concat(){if(this[K])throw new Error("cannot concat in objectMode");let t=await this.collect();return this[mt]?t.join(""):Buffer.concat(t,t.dataLength)}async promise(){return new Promise((t,e)=>{this.on(P,()=>e(new Error("stream destroyed"))),this.on("error",s=>e(s)),this.on("end",()=>t())})}[Symbol.asyncIterator](){this[at]=!1;let t=!1,e=async()=>(this.pause(),t=!0,{value:void 0,done:!0});return{next:()=>{if(t)return e();let r=this.read();if(r!==null)return Promise.resolve({done:!1,value:r});if(this[Ct])return e();let n,o,a=u=>{this.off("data",c),this.off("end",l),this.off(P,h),e(),o(u)},c=u=>{this.off("error",a),this.off("end",l),this.off(P,h),this.pause(),n({value:u,done:!!this[Ct]})},l=()=>{this.off("error",a),this.off("data",c),this.off(P,h),e(),n({done:!0,value:void 0})},h=()=>a(new Error("stream destroyed"));return new Promise((u,f)=>{o=f,n=u,this.once(P,h),this.once("error",a),this.once("end",l),this.once("data",c)})},throw:e,return:e,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[at]=!1;let t=!1,e=()=>(this.pause(),this.off(zi,e),this.off(P,e),this.off("end",e),t=!0,{done:!0,value:void 0}),s=()=>{if(t)return e();let r=this.read();return r===null?e():{done:!1,value:r}};return this.once("end",e),this.once(zi,e),this.once(P,e),{next:s,throw:e,return:e,[Symbol.iterator](){return this}}}destroy(t){if(this[P])return t?this.emit("error",t):this.emit(P),this;this[P]=!0,this[at]=!0,this[j].length=0,this[q]=0;let e=this;return typeof e.close=="function"&&!this[We]&&e.close(),t?this.emit("error",t):this.emit(P),this}static get isStream(){return Eh}};var Wh=Lh.native,ye={lstatSync:Dh,readdir:Mh,readdirSync:Ph,readlinkSync:Bh,realpathSync:Wh,promises:{lstat:jh,readdir:qh,readlink:$h,realpath:Uh}},qr=i=>!i||i===ye||i===Ih?ye:{...ye,...i,promises:{...ye.promises,...i.promises||{}}},$r=/^\\\\\?\\([a-z]:)\\?$/i,Gh=i=>i.replace(/\//g,"\\").replace($r,"$1\\"),zh=/[\\\/]/,ut=0,Ur=1,Gr=2,bt=4,zr=6,Hr=8,Pt=10,Yr=12,lt=15,we=~lt,Qi=16,Lr=32,Se=64,gt=128,Ge=256,He=512,Ir=Se|gt|He,Hh=1023,Zi=i=>i.isFile()?Hr:i.isDirectory()?bt:i.isSymbolicLink()?Pt:i.isCharacterDevice()?Gr:i.isBlockDevice()?zr:i.isSocket()?Yr:i.isFIFO()?Ur:ut,Wr=new Map,be=i=>{let t=Wr.get(i);if(t)return t;let e=i.normalize("NFKD");return Wr.set(i,e),e},jr=new Map,ze=i=>{let t=jr.get(i);if(t)return t;let e=be(i.toLowerCase());return jr.set(i,e),e},Ye=class extends fe{constructor(){super({max:256})}},ts=class extends fe{constructor(t=16*1024){super({maxSize:t,sizeCalculation:e=>e.length+1})}},Jr=Symbol("PathScurry setAsCwd"),V=class{name;root;roots;parent;nocase;isCWD=!1;#t;#e;get dev(){return this.#e}#n;get mode(){return this.#n}#s;get nlink(){return this.#s}#o;get uid(){return this.#o}#b;get gid(){return this.#b}#h;get rdev(){return this.#h}#u;get blksize(){return this.#u}#a;get ino(){return this.#a}#c;get size(){return this.#c}#r;get blocks(){return this.#r}#g;get atimeMs(){return this.#g}#w;get mtimeMs(){return this.#w}#d;get ctimeMs(){return this.#d}#f;get birthtimeMs(){return this.#f}#C;get atime(){return this.#C}#m;get mtime(){return this.#m}#x;get ctime(){return this.#x}#k;get birthtime(){return this.#k}#S;#v;#E;#p;#A;#F;#i;#N;#y;#R;get parentPath(){return(this.parent||this).fullpath()}get path(){return this.parentPath}constructor(t,e=ut,s,r,n,o,a){this.name=t,this.#S=n?ze(t):be(t),this.#i=e&Hh,this.nocase=n,this.roots=r,this.root=s||this,this.#N=o,this.#E=a.fullpath,this.#A=a.relative,this.#F=a.relativePosix,this.parent=a.parent,this.parent?this.#t=this.parent.#t:this.#t=qr(a.fs)}depth(){return this.#v!==void 0?this.#v:this.parent?this.#v=this.parent.depth()+1:this.#v=0}childrenCache(){return this.#N}resolve(t){if(!t)return this;let e=this.getRootString(t),r=t.substring(e.length).split(this.splitSep);return e?this.getRoot(e).#D(r):this.#D(r)}#D(t){let e=this;for(let s of t)e=e.child(s);return e}children(){let t=this.#N.get(this);if(t)return t;let e=Object.assign([],{provisional:0});return this.#N.set(this,e),this.#i&=~Qi,e}child(t,e){if(t===""||t===".")return this;if(t==="..")return this.parent||this;let s=this.children(),r=this.nocase?ze(t):be(t);for(let c of s)if(c.#S===r)return c;let n=this.parent?this.sep:"",o=this.#E?this.#E+n+t:void 0,a=this.newChild(t,ut,{...e,parent:this,fullpath:o});return this.canReaddir()||(a.#i|=gt),s.push(a),a}relative(){if(this.isCWD)return"";if(this.#A!==void 0)return this.#A;let t=this.name,e=this.parent;if(!e)return this.#A=this.name;let s=e.relative();return s+(!s||!e.parent?"":this.sep)+t}relativePosix(){if(this.sep==="/")return this.relative();if(this.isCWD)return"";if(this.#F!==void 0)return this.#F;let t=this.name,e=this.parent;if(!e)return this.#F=this.fullpathPosix();let s=e.relativePosix();return s+(!s||!e.parent?"":"/")+t}fullpath(){if(this.#E!==void 0)return this.#E;let t=this.name,e=this.parent;if(!e)return this.#E=this.name;let r=e.fullpath()+(e.parent?this.sep:"")+t;return this.#E=r}fullpathPosix(){if(this.#p!==void 0)return this.#p;if(this.sep==="/")return this.#p=this.fullpath();if(!this.parent){let r=this.fullpath().replace(/\\/g,"/");return/^[a-z]:\//i.test(r)?this.#p=`//?/${r}`:this.#p=r}let t=this.parent,e=t.fullpathPosix(),s=e+(!e||!t.parent?"":"/")+this.name;return this.#p=s}isUnknown(){return(this.#i&lt)===ut}isType(t){return this[`is${t}`]()}getType(){return this.isUnknown()?"Unknown":this.isDirectory()?"Directory":this.isFile()?"File":this.isSymbolicLink()?"SymbolicLink":this.isFIFO()?"FIFO":this.isCharacterDevice()?"CharacterDevice":this.isBlockDevice()?"BlockDevice":this.isSocket()?"Socket":"Unknown"}isFile(){return(this.#i&lt)===Hr}isDirectory(){return(this.#i&lt)===bt}isCharacterDevice(){return(this.#i&lt)===Gr}isBlockDevice(){return(this.#i&lt)===zr}isFIFO(){return(this.#i&lt)===Ur}isSocket(){return(this.#i&lt)===Yr}isSymbolicLink(){return(this.#i&Pt)===Pt}lstatCached(){return this.#i&Lr?this:void 0}readlinkCached(){return this.#y}realpathCached(){return this.#R}readdirCached(){let t=this.children();return t.slice(0,t.provisional)}canReadlink(){if(this.#y)return!0;if(!this.parent)return!1;let t=this.#i&lt;return!(t!==ut&&t!==Pt||this.#i&Ge||this.#i&gt)}calledReaddir(){return!!(this.#i&Qi)}isENOENT(){return!!(this.#i&gt)}isNamed(t){return this.nocase?this.#S===ze(t):this.#S===be(t)}async readlink(){let t=this.#y;if(t)return t;if(this.canReadlink()&&this.parent)try{let e=await this.#t.promises.readlink(this.fullpath()),s=(await this.parent.realpath())?.resolve(e);if(s)return this.#y=s}catch(e){this.#l(e.code);return}}readlinkSync(){let t=this.#y;if(t)return t;if(this.canReadlink()&&this.parent)try{let e=this.#t.readlinkSync(this.fullpath()),s=this.parent.realpathSync()?.resolve(e);if(s)return this.#y=s}catch(e){this.#l(e.code);return}}#M(t){this.#i|=Qi;for(let e=t.provisional;e<t.length;e++){let s=t[e];s&&s.#P()}}#P(){this.#i&gt||(this.#i=(this.#i|gt)&we,this.#O())}#O(){let t=this.children();t.provisional=0;for(let e of t)e.#P()}#T(){this.#i|=He,this.#B()}#B(){if(this.#i&Se)return;let t=this.#i;(t&lt)===bt&&(t&=we),this.#i=t|Se,this.#O()}#L(t=""){t==="ENOTDIR"||t==="EPERM"?this.#B():t==="ENOENT"?this.#P():this.children().provisional=0}#I(t=""){t==="ENOTDIR"?this.parent.#B():t==="ENOENT"&&this.#P()}#l(t=""){let e=this.#i;e|=Ge,t==="ENOENT"&&(e|=gt),(t==="EINVAL"||t==="UNKNOWN")&&(e&=we),this.#i=e,t==="ENOTDIR"&&this.parent&&this.parent.#B()}#W(t,e){return this.#_(t,e)||this.#j(t,e)}#j(t,e){let s=Zi(t),r=this.newChild(t.name,s,{parent:this}),n=r.#i&lt;return n!==bt&&n!==Pt&&n!==ut&&(r.#i|=Se),e.unshift(r),e.provisional++,r}#_(t,e){for(let s=e.provisional;s<e.length;s++){let r=e[s];if((this.nocase?ze(t.name):be(t.name))===r.#S)return this.#q(t,r,s,e)}}#q(t,e,s,r){let n=e.name;return e.#i=e.#i&we|Zi(t),n!==t.name&&(e.name=t.name),s!==r.provisional&&(s===r.length-1?r.pop():r.splice(s,1),r.unshift(e)),r.provisional++,e}async lstat(){if(!(this.#i&gt))try{return this.#z(await this.#t.promises.lstat(this.fullpath())),this}catch(t){this.#I(t.code)}}lstatSync(){if(!(this.#i&gt))try{return this.#z(this.#t.lstatSync(this.fullpath())),this}catch(t){this.#I(t.code)}}#z(t){let{atime:e,atimeMs:s,birthtime:r,birthtimeMs:n,blksize:o,blocks:a,ctime:c,ctimeMs:l,dev:h,gid:u,ino:f,mode:d,mtime:g,mtimeMs:m,nlink:y,rdev:w,size:v,uid:b}=t;this.#C=e,this.#g=s,this.#k=r,this.#f=n,this.#u=o,this.#r=a,this.#x=c,this.#d=l,this.#e=h,this.#b=u,this.#a=f,this.#n=d,this.#m=g,this.#w=m,this.#s=y,this.#h=w,this.#c=v,this.#o=b;let E=Zi(t);this.#i=this.#i&we|E|Lr,E!==ut&&E!==bt&&E!==Pt&&(this.#i|=Se)}#U=[];#G=!1;#H(t){this.#G=!1;let e=this.#U.slice();this.#U.length=0,e.forEach(s=>s(null,t))}readdirCB(t,e=!1){if(!this.canReaddir()){e?t(null,[]):queueMicrotask(()=>t(null,[]));return}let s=this.children();if(this.calledReaddir()){let n=s.slice(0,s.provisional);e?t(null,n):queueMicrotask(()=>t(null,n));return}if(this.#U.push(t),this.#G)return;this.#G=!0;let r=this.fullpath();this.#t.readdir(r,{withFileTypes:!0},(n,o)=>{if(n)this.#L(n.code),s.provisional=0;else{for(let a of o)this.#W(a,s);this.#M(s)}this.#H(s.slice(0,s.provisional))})}#$;async readdir(){if(!this.canReaddir())return[];let t=this.children();if(this.calledReaddir())return t.slice(0,t.provisional);let e=this.fullpath();if(this.#$)await this.#$;else{let s=()=>{};this.#$=new Promise(r=>s=r);try{for(let r of await this.#t.promises.readdir(e,{withFileTypes:!0}))this.#W(r,t);this.#M(t)}catch(r){this.#L(r.code),t.provisional=0}this.#$=void 0,s()}return t.slice(0,t.provisional)}readdirSync(){if(!this.canReaddir())return[];let t=this.children();if(this.calledReaddir())return t.slice(0,t.provisional);let e=this.fullpath();try{for(let s of this.#t.readdirSync(e,{withFileTypes:!0}))this.#W(s,t);this.#M(t)}catch(s){this.#L(s.code),t.provisional=0}return t.slice(0,t.provisional)}canReaddir(){if(this.#i&Ir)return!1;let t=lt&this.#i;return t===ut||t===bt||t===Pt}shouldWalk(t,e){return(this.#i&bt)===bt&&!(this.#i&Ir)&&!t.has(this)&&(!e||e(this))}async realpath(){if(this.#R)return this.#R;if(!((He|Ge|gt)&this.#i))try{let t=await this.#t.promises.realpath(this.fullpath());return this.#R=this.resolve(t)}catch{this.#T()}}realpathSync(){if(this.#R)return this.#R;if(!((He|Ge|gt)&this.#i))try{let t=this.#t.realpathSync(this.fullpath());return this.#R=this.resolve(t)}catch{this.#T()}}[Jr](t){if(t===this)return;t.isCWD=!1,this.isCWD=!0;let e=new Set([]),s=[],r=this;for(;r&&r.parent;)e.add(r),r.#A=s.join(this.sep),r.#F=s.join("/"),r=r.parent,s.push("..");for(r=t;r&&r.parent&&!e.has(r);)r.#A=void 0,r.#F=void 0,r=r.parent}},Je=class i extends V{sep="\\";splitSep=zh;constructor(t,e=ut,s,r,n,o,a){super(t,e,s,r,n,o,a)}newChild(t,e=ut,s={}){return new i(t,e,this.root,this.roots,this.nocase,this.childrenCache(),s)}getRootString(t){return Xi.parse(t).root}getRoot(t){if(t=Gh(t.toUpperCase()),t===this.root.name)return this.root;for(let[e,s]of Object.entries(this.roots))if(this.sameRoot(t,e))return this.roots[t]=s;return this.roots[t]=new Jt(t,this).root}sameRoot(t,e=this.root.name){return t=t.toUpperCase().replace(/\//g,"\\").replace($r,"$1\\"),t===e}},Ke=class i extends V{splitSep="/";sep="/";constructor(t,e=ut,s,r,n,o,a){super(t,e,s,r,n,o,a)}getRootString(t){return t.startsWith("/")?"/":""}getRoot(t){return this.root}newChild(t,e=ut,s={}){return new i(t,e,this.root,this.roots,this.nocase,this.childrenCache(),s)}},Ve=class{root;rootPath;roots;cwd;#t;#e;#n;nocase;#s;constructor(t=process.cwd(),e,s,{nocase:r,childrenCacheSize:n=16*1024,fs:o=ye}={}){this.#s=qr(o),(t instanceof URL||t.startsWith("file://"))&&(t=Nh(t));let a=e.resolve(t);this.roots=Object.create(null),this.rootPath=this.parseRootPath(a),this.#t=new Ye,this.#e=new Ye,this.#n=new ts(n);let c=a.substring(this.rootPath.length).split(s);if(c.length===1&&!c[0]&&c.pop(),r===void 0)throw new TypeError("must provide nocase setting to PathScurryBase ctor");this.nocase=r,this.root=this.newRoot(this.#s),this.roots[this.rootPath]=this.root;let l=this.root,h=c.length-1,u=e.sep,f=this.rootPath,d=!1;for(let g of c){let m=h--;l=l.child(g,{relative:new Array(m).fill("..").join(u),relativePosix:new Array(m).fill("..").join("/"),fullpath:f+=(d?"":u)+g}),d=!0}this.cwd=l}depth(t=this.cwd){return typeof t=="string"&&(t=this.cwd.resolve(t)),t.depth()}childrenCache(){return this.#n}resolve(...t){let e="";for(let n=t.length-1;n>=0;n--){let o=t[n];if(!(!o||o===".")&&(e=e?`${o}/${e}`:o,this.isAbsolute(o)))break}let s=this.#t.get(e);if(s!==void 0)return s;let r=this.cwd.resolve(e).fullpath();return this.#t.set(e,r),r}resolvePosix(...t){let e="";for(let n=t.length-1;n>=0;n--){let o=t[n];if(!(!o||o===".")&&(e=e?`${o}/${e}`:o,this.isAbsolute(o)))break}let s=this.#e.get(e);if(s!==void 0)return s;let r=this.cwd.resolve(e).fullpathPosix();return this.#e.set(e,r),r}relative(t=this.cwd){return typeof t=="string"&&(t=this.cwd.resolve(t)),t.relative()}relativePosix(t=this.cwd){return typeof t=="string"&&(t=this.cwd.resolve(t)),t.relativePosix()}basename(t=this.cwd){return typeof t=="string"&&(t=this.cwd.resolve(t)),t.name}dirname(t=this.cwd){return typeof t=="string"&&(t=this.cwd.resolve(t)),(t.parent||t).fullpath()}async readdir(t=this.cwd,e={withFileTypes:!0}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof V||(e=t,t=this.cwd);let{withFileTypes:s}=e;if(t.canReaddir()){let r=await t.readdir();return s?r:r.map(n=>n.name)}else return[]}readdirSync(t=this.cwd,e={withFileTypes:!0}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof V||(e=t,t=this.cwd);let{withFileTypes:s=!0}=e;return t.canReaddir()?s?t.readdirSync():t.readdirSync().map(r=>r.name):[]}async lstat(t=this.cwd){return typeof t=="string"&&(t=this.cwd.resolve(t)),t.lstat()}lstatSync(t=this.cwd){return typeof t=="string"&&(t=this.cwd.resolve(t)),t.lstatSync()}async readlink(t=this.cwd,{withFileTypes:e}={withFileTypes:!1}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof V||(e=t.withFileTypes,t=this.cwd);let s=await t.readlink();return e?s:s?.fullpath()}readlinkSync(t=this.cwd,{withFileTypes:e}={withFileTypes:!1}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof V||(e=t.withFileTypes,t=this.cwd);let s=t.readlinkSync();return e?s:s?.fullpath()}async realpath(t=this.cwd,{withFileTypes:e}={withFileTypes:!1}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof V||(e=t.withFileTypes,t=this.cwd);let s=await t.realpath();return e?s:s?.fullpath()}realpathSync(t=this.cwd,{withFileTypes:e}={withFileTypes:!1}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof V||(e=t.withFileTypes,t=this.cwd);let s=t.realpathSync();return e?s:s?.fullpath()}async walk(t=this.cwd,e={}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof V||(e=t,t=this.cwd);let{withFileTypes:s=!0,follow:r=!1,filter:n,walkFilter:o}=e,a=[];(!n||n(t))&&a.push(s?t:t.fullpath());let c=new Set,l=(u,f)=>{c.add(u),u.readdirCB((d,g)=>{if(d)return f(d);let m=g.length;if(!m)return f();let y=()=>{--m===0&&f()};for(let w of g)(!n||n(w))&&a.push(s?w:w.fullpath()),r&&w.isSymbolicLink()?w.realpath().then(v=>v?.isUnknown()?v.lstat():v).then(v=>v?.shouldWalk(c,o)?l(v,y):y()):w.shouldWalk(c,o)?l(w,y):y()},!0)},h=t;return new Promise((u,f)=>{l(h,d=>{if(d)return f(d);u(a)})})}walkSync(t=this.cwd,e={}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof V||(e=t,t=this.cwd);let{withFileTypes:s=!0,follow:r=!1,filter:n,walkFilter:o}=e,a=[];(!n||n(t))&&a.push(s?t:t.fullpath());let c=new Set([t]);for(let l of c){let h=l.readdirSync();for(let u of h){(!n||n(u))&&a.push(s?u:u.fullpath());let f=u;if(u.isSymbolicLink()){if(!(r&&(f=u.realpathSync())))continue;f.isUnknown()&&f.lstatSync()}f.shouldWalk(c,o)&&c.add(f)}}return a}[Symbol.asyncIterator](){return this.iterate()}iterate(t=this.cwd,e={}){return typeof t=="string"?t=this.cwd.resolve(t):t instanceof V||(e=t,t=this.cwd),this.stream(t,e)[Symbol.asyncIterator]()}[Symbol.iterator](){return this.iterateSync()}*iterateSync(t=this.cwd,e={}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof V||(e=t,t=this.cwd);let{withFileTypes:s=!0,follow:r=!1,filter:n,walkFilter:o}=e;(!n||n(t))&&(yield s?t:t.fullpath());let a=new Set([t]);for(let c of a){let l=c.readdirSync();for(let h of l){(!n||n(h))&&(yield s?h:h.fullpath());let u=h;if(h.isSymbolicLink()){if(!(r&&(u=h.realpathSync())))continue;u.isUnknown()&&u.lstatSync()}u.shouldWalk(a,o)&&a.add(u)}}}stream(t=this.cwd,e={}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof V||(e=t,t=this.cwd);let{withFileTypes:s=!0,follow:r=!1,filter:n,walkFilter:o}=e,a=new At({objectMode:!0});(!n||n(t))&&a.write(s?t:t.fullpath());let c=new Set,l=[t],h=0,u=()=>{let f=!1;for(;!f;){let d=l.shift();if(!d){h===0&&a.end();return}h++,c.add(d);let g=(y,w,v=!1)=>{if(y)return a.emit("error",y);if(r&&!v){let b=[];for(let E of w)E.isSymbolicLink()&&b.push(E.realpath().then(F=>F?.isUnknown()?F.lstat():F));if(b.length){Promise.all(b).then(()=>g(null,w,!0));return}}for(let b of w)b&&(!n||n(b))&&(a.write(s?b:b.fullpath())||(f=!0));h--;for(let b of w){let E=b.realpathCached()||b;E.shouldWalk(c,o)&&l.push(E)}f&&!a.flowing?a.once("drain",u):m||u()},m=!0;d.readdirCB(g,!0),m=!1}};return u(),a}streamSync(t=this.cwd,e={}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof V||(e=t,t=this.cwd);let{withFileTypes:s=!0,follow:r=!1,filter:n,walkFilter:o}=e,a=new At({objectMode:!0}),c=new Set;(!n||n(t))&&a.write(s?t:t.fullpath());let l=[t],h=0,u=()=>{let f=!1;for(;!f;){let d=l.shift();if(!d){h===0&&a.end();return}h++,c.add(d);let g=d.readdirSync();for(let m of g)(!n||n(m))&&(a.write(s?m:m.fullpath())||(f=!0));h--;for(let m of g){let y=m;if(m.isSymbolicLink()){if(!(r&&(y=m.realpathSync())))continue;y.isUnknown()&&y.lstatSync()}y.shouldWalk(c,o)&&l.push(y)}}f&&!a.flowing&&a.once("drain",u)};return u(),a}chdir(t=this.cwd){let e=this.cwd;this.cwd=typeof t=="string"?this.cwd.resolve(t):t,this.cwd[Jr](e)}},Jt=class extends Ve{sep="\\";constructor(t=process.cwd(),e={}){let{nocase:s=!0}=e;super(t,Xi,"\\",{...e,nocase:s}),this.nocase=s;for(let r=this.cwd;r;r=r.parent)r.nocase=this.nocase}parseRootPath(t){return Xi.parse(t).root.toUpperCase()}newRoot(t){return new Je(this.rootPath,bt,void 0,this.roots,this.nocase,this.childrenCache(),{fs:t})}isAbsolute(t){return t.startsWith("/")||t.startsWith("\\")||/^[a-z]:(\/|\\)/i.test(t)}},Kt=class extends Ve{sep="/";constructor(t=process.cwd(),e={}){let{nocase:s=!1}=e;super(t,_h,"/",{...e,nocase:s}),this.nocase=s}parseRootPath(t){return"/"}newRoot(t){return new Ke(this.rootPath,bt,void 0,this.roots,this.nocase,this.childrenCache(),{fs:t})}isAbsolute(t){return t.startsWith("/")}},ve=class extends Kt{constructor(t=process.cwd(),e={}){let{nocase:s=!0}=e;super(t,{...e,nocase:s})}},Gd=process.platform==="win32"?Je:Ke,Kr=process.platform==="win32"?Jt:process.platform==="darwin"?ve:Kt;p();var Yh=i=>i.length>=1,Jh=i=>i.length>=1,Vt=class i{#t;#e;#n;length;#s;#o;#b;#h;#u;#a;#c=!0;constructor(t,e,s,r){if(!Yh(t))throw new TypeError("empty pattern list");if(!Jh(e))throw new TypeError("empty glob list");if(e.length!==t.length)throw new TypeError("mismatched pattern list and glob list lengths");if(this.length=t.length,s<0||s>=this.length)throw new TypeError("index out of range");if(this.#t=t,this.#e=e,this.#n=s,this.#s=r,this.#n===0){if(this.isUNC()){let[n,o,a,c,...l]=this.#t,[h,u,f,d,...g]=this.#e;l[0]===""&&(l.shift(),g.shift());let m=[n,o,a,c,""].join("/"),y=[h,u,f,d,""].join("/");this.#t=[m,...l],this.#e=[y,...g],this.length=this.#t.length}else if(this.isDrive()||this.isAbsolute()){let[n,...o]=this.#t,[a,...c]=this.#e;o[0]===""&&(o.shift(),c.shift());let l=n+"/",h=a+"/";this.#t=[l,...o],this.#e=[h,...c],this.length=this.#t.length}}}pattern(){return this.#t[this.#n]}isString(){return typeof this.#t[this.#n]=="string"}isGlobstar(){return this.#t[this.#n]===Y}isRegExp(){return this.#t[this.#n]instanceof RegExp}globString(){return this.#b=this.#b||(this.#n===0?this.isAbsolute()?this.#e[0]+this.#e.slice(1).join("/"):this.#e.join("/"):this.#e.slice(this.#n).join("/"))}hasMore(){return this.length>this.#n+1}rest(){return this.#o!==void 0?this.#o:this.hasMore()?(this.#o=new i(this.#t,this.#e,this.#n+1,this.#s),this.#o.#a=this.#a,this.#o.#u=this.#u,this.#o.#h=this.#h,this.#o):this.#o=null}isUNC(){let t=this.#t;return this.#u!==void 0?this.#u:this.#u=this.#s==="win32"&&this.#n===0&&t[0]===""&&t[1]===""&&typeof t[2]=="string"&&!!t[2]&&typeof t[3]=="string"&&!!t[3]}isDrive(){let t=this.#t;return this.#h!==void 0?this.#h:this.#h=this.#s==="win32"&&this.#n===0&&this.length>1&&typeof t[0]=="string"&&/^[a-z]:$/i.test(t[0])}isAbsolute(){let t=this.#t;return this.#a!==void 0?this.#a:this.#a=t[0]===""&&t.length>1||this.isDrive()||this.isUNC()}root(){let t=this.#t[0];return typeof t=="string"&&this.isAbsolute()&&this.#n===0?t:""}checkFollowGlobstar(){return!(this.#n===0||!this.isGlobstar()||!this.#c)}markFollowGlobstar(){return this.#n===0||!this.isGlobstar()||!this.#c?!1:(this.#c=!1,!0)}};p();p();var Kh=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",Qt=class{relative;relativeChildren;absolute;absoluteChildren;platform;mmopts;constructor(t,{nobrace:e,nocase:s,noext:r,noglobstar:n,platform:o=Kh}){this.relative=[],this.absolute=[],this.relativeChildren=[],this.absoluteChildren=[],this.platform=o,this.mmopts={dot:!0,nobrace:e,nocase:s,noext:r,noglobstar:n,optimizationLevel:2,platform:o,nocomment:!0,nonegate:!0};for(let a of t)this.add(a)}add(t){let e=new ot(t,this.mmopts);for(let s=0;s<e.set.length;s++){let r=e.set[s],n=e.globParts[s];if(!r||!n)throw new Error("invalid pattern object");for(;r[0]==="."&&n[0]===".";)r.shift(),n.shift();let o=new Vt(r,n,0,this.platform),a=new ot(o.globString(),this.mmopts),c=n[n.length-1]==="**",l=o.isAbsolute();l?this.absolute.push(a):this.relative.push(a),c&&(l?this.absoluteChildren.push(a):this.relativeChildren.push(a))}}ignored(t){let e=t.fullpath(),s=`${e}/`,r=t.relative()||".",n=`${r}/`;for(let o of this.relative)if(o.match(r)||o.match(n))return!0;for(let o of this.absolute)if(o.match(e)||o.match(s))return!0;return!1}childrenIgnored(t){let e=t.fullpath()+"/",s=(t.relative()||".")+"/";for(let r of this.relativeChildren)if(r.match(s))return!0;for(let r of this.absoluteChildren)if(r.match(e))return!0;return!1}};p();var es=class i{store;constructor(t=new Map){this.store=t}copy(){return new i(new Map(this.store))}hasWalked(t,e){return this.store.get(t.fullpath())?.has(e.globString())}storeWalked(t,e){let s=t.fullpath(),r=this.store.get(s);r?r.add(e.globString()):this.store.set(s,new Set([e.globString()]))}},is=class{store=new Map;add(t,e,s){let r=(e?2:0)|(s?1:0),n=this.store.get(t);this.store.set(t,n===void 0?r:r&n)}entries(){return[...this.store.entries()].map(([t,e])=>[t,!!(e&2),!!(e&1)])}},ss=class{store=new Map;add(t,e){if(!t.canReaddir())return;let s=this.store.get(t);s?s.find(r=>r.globString()===e.globString())||s.push(e):this.store.set(t,[e])}get(t){let e=this.store.get(t);if(!e)throw new Error("attempting to walk unknown path");return e}entries(){return this.keys().map(t=>[t,this.store.get(t)])}keys(){return[...this.store.keys()].filter(t=>t.canReaddir())}},Ee=class i{hasWalkedCache;matches=new is;subwalks=new ss;patterns;follow;dot;opts;constructor(t,e){this.opts=t,this.follow=!!t.follow,this.dot=!!t.dot,this.hasWalkedCache=e?e.copy():new es}processPatterns(t,e){this.patterns=e;let s=e.map(r=>[t,r]);for(let[r,n]of s){this.hasWalkedCache.storeWalked(r,n);let o=n.root(),a=n.isAbsolute()&&this.opts.absolute!==!1;if(o){r=r.resolve(o==="/"&&this.opts.root!==void 0?this.opts.root:o);let u=n.rest();if(u)n=u;else{this.matches.add(r,!0,!1);continue}}if(r.isENOENT())continue;let c,l,h=!1;for(;typeof(c=n.pattern())=="string"&&(l=n.rest());)r=r.resolve(c),n=l,h=!0;if(c=n.pattern(),l=n.rest(),h){if(this.hasWalkedCache.hasWalked(r,n))continue;this.hasWalkedCache.storeWalked(r,n)}if(typeof c=="string"){let u=c===".."||c===""||c===".";this.matches.add(r.resolve(c),a,u);continue}else if(c===Y){(!r.isSymbolicLink()||this.follow||n.checkFollowGlobstar())&&this.subwalks.add(r,n);let u=l?.pattern(),f=l?.rest();if(!l||(u===""||u===".")&&!f)this.matches.add(r,a,u===""||u===".");else if(u===".."){let d=r.parent||r;f?this.hasWalkedCache.hasWalked(d,f)||this.subwalks.add(d,f):this.matches.add(d,a,!0)}}else c instanceof RegExp&&this.subwalks.add(r,n)}return this}subwalkTargets(){return this.subwalks.keys()}child(){return new i(this.opts,this.hasWalkedCache)}filterEntries(t,e){let s=this.subwalks.get(t),r=this.child();for(let n of e)for(let o of s){let a=o.isAbsolute(),c=o.pattern(),l=o.rest();c===Y?r.testGlobstar(n,o,l,a):c instanceof RegExp?r.testRegExp(n,c,l,a):r.testString(n,c,l,a)}return r}testGlobstar(t,e,s,r){if((this.dot||!t.name.startsWith("."))&&(e.hasMore()||this.matches.add(t,r,!1),t.canReaddir()&&(this.follow||!t.isSymbolicLink()?this.subwalks.add(t,e):t.isSymbolicLink()&&(s&&e.checkFollowGlobstar()?this.subwalks.add(t,s):e.markFollowGlobstar()&&this.subwalks.add(t,e)))),s){let n=s.pattern();if(typeof n=="string"&&n!==".."&&n!==""&&n!==".")this.testString(t,n,s.rest(),r);else if(n===".."){let o=t.parent||t;this.subwalks.add(o,s)}else n instanceof RegExp&&this.testRegExp(t,n,s.rest(),r)}}testRegExp(t,e,s,r){e.test(t.name)&&(s?this.subwalks.add(t,s):this.matches.add(t,r,!1))}testString(t,e,s,r){t.isNamed(e)&&(s?this.subwalks.add(t,s):this.matches.add(t,r,!1))}};var Vh=(i,t)=>typeof i=="string"?new Qt([i],t):Array.isArray(i)?new Qt(i,t):i,Qe=class{path;patterns;opts;seen=new Set;paused=!1;aborted=!1;#t=[];#e;#n;signal;maxDepth;includeChildMatches;constructor(t,e,s){if(this.patterns=t,this.path=e,this.opts=s,this.#n=!s.posix&&s.platform==="win32"?"\\":"/",this.includeChildMatches=s.includeChildMatches!==!1,(s.ignore||!this.includeChildMatches)&&(this.#e=Vh(s.ignore??[],s),!this.includeChildMatches&&typeof this.#e.add!="function")){let r="cannot ignore child matches, ignore lacks add() method.";throw new Error(r)}this.maxDepth=s.maxDepth||1/0,s.signal&&(this.signal=s.signal,this.signal.addEventListener("abort",()=>{this.#t.length=0}))}#s(t){return this.seen.has(t)||!!this.#e?.ignored?.(t)}#o(t){return!!this.#e?.childrenIgnored?.(t)}pause(){this.paused=!0}resume(){if(this.signal?.aborted)return;this.paused=!1;let t;for(;!this.paused&&(t=this.#t.shift());)t()}onResume(t){this.signal?.aborted||(this.paused?this.#t.push(t):t())}async matchCheck(t,e){if(e&&this.opts.nodir)return;let s;if(this.opts.realpath){if(s=t.realpathCached()||await t.realpath(),!s)return;t=s}let n=t.isUnknown()||this.opts.stat?await t.lstat():t;if(this.opts.follow&&this.opts.nodir&&n?.isSymbolicLink()){let o=await n.realpath();o&&(o.isUnknown()||this.opts.stat)&&await o.lstat()}return this.matchCheckTest(n,e)}matchCheckTest(t,e){return t&&(this.maxDepth===1/0||t.depth()<=this.maxDepth)&&(!e||t.canReaddir())&&(!this.opts.nodir||!t.isDirectory())&&(!this.opts.nodir||!this.opts.follow||!t.isSymbolicLink()||!t.realpathCached()?.isDirectory())&&!this.#s(t)?t:void 0}matchCheckSync(t,e){if(e&&this.opts.nodir)return;let s;if(this.opts.realpath){if(s=t.realpathCached()||t.realpathSync(),!s)return;t=s}let n=t.isUnknown()||this.opts.stat?t.lstatSync():t;if(this.opts.follow&&this.opts.nodir&&n?.isSymbolicLink()){let o=n.realpathSync();o&&(o?.isUnknown()||this.opts.stat)&&o.lstatSync()}return this.matchCheckTest(n,e)}matchFinish(t,e){if(this.#s(t))return;if(!this.includeChildMatches&&this.#e?.add){let n=`${t.relativePosix()}/**`;this.#e.add(n)}let s=this.opts.absolute===void 0?e:this.opts.absolute;this.seen.add(t);let r=this.opts.mark&&t.isDirectory()?this.#n:"";if(this.opts.withFileTypes)this.matchEmit(t);else if(s){let n=this.opts.posix?t.fullpathPosix():t.fullpath();this.matchEmit(n+r)}else{let n=this.opts.posix?t.relativePosix():t.relative(),o=this.opts.dotRelative&&!n.startsWith(".."+this.#n)?"."+this.#n:"";this.matchEmit(n?o+n+r:"."+r)}}async match(t,e,s){let r=await this.matchCheck(t,s);r&&this.matchFinish(r,e)}matchSync(t,e,s){let r=this.matchCheckSync(t,s);r&&this.matchFinish(r,e)}walkCB(t,e,s){this.signal?.aborted&&s(),this.walkCB2(t,e,new Ee(this.opts),s)}walkCB2(t,e,s,r){if(this.#o(t))return r();if(this.signal?.aborted&&r(),this.paused){this.onResume(()=>this.walkCB2(t,e,s,r));return}s.processPatterns(t,e);let n=1,o=()=>{--n===0&&r()};for(let[a,c,l]of s.matches.entries())this.#s(a)||(n++,this.match(a,c,l).then(()=>o()));for(let a of s.subwalkTargets()){if(this.maxDepth!==1/0&&a.depth()>=this.maxDepth)continue;n++;let c=a.readdirCached();a.calledReaddir()?this.walkCB3(a,c,s,o):a.readdirCB((l,h)=>this.walkCB3(a,h,s,o),!0)}o()}walkCB3(t,e,s,r){s=s.filterEntries(t,e);let n=1,o=()=>{--n===0&&r()};for(let[a,c,l]of s.matches.entries())this.#s(a)||(n++,this.match(a,c,l).then(()=>o()));for(let[a,c]of s.subwalks.entries())n++,this.walkCB2(a,c,s.child(),o);o()}walkCBSync(t,e,s){this.signal?.aborted&&s(),this.walkCB2Sync(t,e,new Ee(this.opts),s)}walkCB2Sync(t,e,s,r){if(this.#o(t))return r();if(this.signal?.aborted&&r(),this.paused){this.onResume(()=>this.walkCB2Sync(t,e,s,r));return}s.processPatterns(t,e);let n=1,o=()=>{--n===0&&r()};for(let[a,c,l]of s.matches.entries())this.#s(a)||this.matchSync(a,c,l);for(let a of s.subwalkTargets()){if(this.maxDepth!==1/0&&a.depth()>=this.maxDepth)continue;n++;let c=a.readdirSync();this.walkCB3Sync(a,c,s,o)}o()}walkCB3Sync(t,e,s,r){s=s.filterEntries(t,e);let n=1,o=()=>{--n===0&&r()};for(let[a,c,l]of s.matches.entries())this.#s(a)||this.matchSync(a,c,l);for(let[a,c]of s.subwalks.entries())n++,this.walkCB2Sync(a,c,s.child(),o);o()}},Ce=class extends Qe{matches=new Set;constructor(t,e,s){super(t,e,s)}matchEmit(t){this.matches.add(t)}async walk(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&await this.path.lstat(),await new Promise((t,e)=>{this.walkCB(this.path,this.patterns,()=>{this.signal?.aborted?e(this.signal.reason):t(this.matches)})}),this.matches}walkSync(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>{if(this.signal?.aborted)throw this.signal.reason}),this.matches}},xe=class extends Qe{results;constructor(t,e,s){super(t,e,s),this.results=new At({signal:this.signal,objectMode:!0}),this.results.on("drain",()=>this.resume()),this.results.on("resume",()=>this.resume())}matchEmit(t){this.results.write(t),this.results.flowing||this.pause()}stream(){let t=this.path;return t.isUnknown()?t.lstat().then(()=>{this.walkCB(t,this.patterns,()=>this.results.end())}):this.walkCB(t,this.patterns,()=>this.results.end()),this.results}streamSync(){return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>this.results.end()),this.results}};var Zh=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",wt=class{absolute;cwd;root;dot;dotRelative;follow;ignore;magicalBraces;mark;matchBase;maxDepth;nobrace;nocase;nodir;noext;noglobstar;pattern;platform;realpath;scurry;stat;signal;windowsPathsNoEscape;withFileTypes;includeChildMatches;opts;patterns;constructor(t,e){if(!e)throw new TypeError("glob options required");if(this.withFileTypes=!!e.withFileTypes,this.signal=e.signal,this.follow=!!e.follow,this.dot=!!e.dot,this.dotRelative=!!e.dotRelative,this.nodir=!!e.nodir,this.mark=!!e.mark,e.cwd?(e.cwd instanceof URL||e.cwd.startsWith("file://"))&&(e.cwd=Qh(e.cwd)):this.cwd="",this.cwd=e.cwd||"",this.root=e.root,this.magicalBraces=!!e.magicalBraces,this.nobrace=!!e.nobrace,this.noext=!!e.noext,this.realpath=!!e.realpath,this.absolute=e.absolute,this.includeChildMatches=e.includeChildMatches!==!1,this.noglobstar=!!e.noglobstar,this.matchBase=!!e.matchBase,this.maxDepth=typeof e.maxDepth=="number"?e.maxDepth:1/0,this.stat=!!e.stat,this.ignore=e.ignore,this.withFileTypes&&this.absolute!==void 0)throw new Error("cannot set absolute and withFileTypes:true");if(typeof t=="string"&&(t=[t]),this.windowsPathsNoEscape=!!e.windowsPathsNoEscape||e.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(t=t.map(c=>c.replace(/\\/g,"/"))),this.matchBase){if(e.noglobstar)throw new TypeError("base matching requires globstar");t=t.map(c=>c.includes("/")?c:`./**/${c}`)}if(this.pattern=t,this.platform=e.platform||Zh,this.opts={...e,platform:this.platform},e.scurry){if(this.scurry=e.scurry,e.nocase!==void 0&&e.nocase!==e.scurry.nocase)throw new Error("nocase option contradicts provided scurry option")}else{let c=e.platform==="win32"?Jt:e.platform==="darwin"?ve:e.platform?Kt:Kr;this.scurry=new c(this.cwd,{nocase:e.nocase,fs:e.fs})}this.nocase=this.scurry.nocase;let s=this.platform==="darwin"||this.platform==="win32",r={...e,dot:this.dot,matchBase:this.matchBase,nobrace:this.nobrace,nocase:this.nocase,nocaseMagicOnly:s,nocomment:!0,noext:this.noext,nonegate:!0,optimizationLevel:2,platform:this.platform,windowsPathsNoEscape:this.windowsPathsNoEscape,debug:!!this.opts.debug},n=this.pattern.map(c=>new ot(c,r)),[o,a]=n.reduce((c,l)=>(c[0].push(...l.set),c[1].push(...l.globParts),c),[[],[]]);this.patterns=o.map((c,l)=>{let h=a[l];if(!h)throw new Error("invalid pattern object");return new Vt(c,h,0,this.platform)})}async walk(){return[...await new Ce(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walk()]}walkSync(){return[...new Ce(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walkSync()]}stream(){return new xe(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).stream()}streamSync(){return new xe(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).streamSync()}iterateSync(){return this.streamSync()[Symbol.iterator]()}[Symbol.iterator](){return this.iterateSync()}iterate(){return this.stream()[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterate()}};p();var rs=(i,t={})=>{Array.isArray(i)||(i=[i]);for(let e of i)if(new ot(e,t).hasMagic())return!0;return!1};function Xe(i,t={}){return new wt(i,t).streamSync()}function Qr(i,t={}){return new wt(i,t).stream()}function Zr(i,t={}){return new wt(i,t).walkSync()}async function Vr(i,t={}){return new wt(i,t).walk()}function ti(i,t={}){return new wt(i,t).iterateSync()}function Xr(i,t={}){return new wt(i,t).iterate()}var Xh=Xe,tl=Object.assign(Qr,{sync:Xe}),el=ti,il=Object.assign(Xr,{sync:ti}),sl=Object.assign(Zr,{stream:Xe,iterate:ti}),Ze=Object.assign(Vr,{glob:Vr,globSync:Zr,sync:sl,globStream:Qr,stream:tl,globStreamSync:Xe,streamSync:Xh,globIterate:Xr,iterate:il,globIterateSync:ti,iterateSync:el,Glob:wt,hasMagic:rs,escape:Ut,unescape:pt});Ze.glob=Ze;import tn from"path";import{fileURLToPath as rl}from"url";function en(i){return tn.dirname(rl(i))}async function sn(...i){let t=[];return await Promise.all(i.map(async e=>{(await Ze(e.split(tn.sep).join("/"))).forEach(r=>{t.includes(r)||t.push(`file://${r}`)})})),t}var Ss=Es(Zo(),1);import{existsSync as af}from"fs";import{homedir as cf}from"os";import ui from"path";var hf=await sn(`${en(import.meta.url)}/commands/*.{ts,js}`),lf=ui.join(cf(),".tdb"),bs=ui.join(lf,"data"),uf=ui.join(bs,"mysql"),fi=ui.join(bs,"postgres");if(!af(bs))throw new Error("Data directory does not exist. Please run the `postinstall` script.");await Promise.all([(0,Ss.ensureDir)(uf),(0,Ss.ensureDir)(fi)]);var Vm=await Promise.all(hf.map(async i=>{let{command:t}=await import(i);return t}));p();import{createServer as ff}from"net";function Xo(i){return new Promise((t,e)=>{let s=ff().once("error",r=>{if(r.code!="EADDRINUSE"){e(r);return}t(!0)}).once("listening",function(){s.once("close",function(){t(!1)}).close()}).listen(i,"127.0.0.1")})}function mf(i){if(i)return`file://${ta.join(fi,`${i}`)}`}var lg=Xs({name:"postgres",description:"Launch a PostgreSQL instance",alias:"pg",flags:{port:{type:Number,alias:"p",default:5432,description:"Port to launch PostgreSQL on"},logs:{type:Boolean,alias:"l",default:!1,description:"Show PostgreSQL logs"},save:{type:String,alias:"s",default:null,description:"Save state with a given name"}},parameters:[]},async i=>{for(;await Xo(i.flags.port);)console.log(`Port ${jt.bold(i.flags.port)} is already in use. Trying ${jt.bold(++i.flags.port)}...`);let t=i.flags.save&&!!pf(ta.join(fi,`${i.flags.save}`));console.log(t?`Restoring state from ${jt.bold(i.flags.save)}`:"Loading blank instance");let e=new df(mf(i.flags.save),{debug:i.flags.logs?1:0});await e.waitReady,ir(e,{logLevel:i.flags.logs?Ii.Info:void 0}).listen(i.flags.port,()=>{console.log(`Instance is ready on port ${jt.bold(i.flags.port)}`),console.log(`Persisting state to ${jt.bold(i.flags.save)}`)})});export{lg as command};
