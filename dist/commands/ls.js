var Ct=(t,e)=>()=>(t&&(e=t(t=0)),e);import{createRequire as wt}from"node:module";import _t from"node:path";import vt from"node:url";var p=Ct(()=>{"use strict";globalThis.require=wt(import.meta.url);globalThis.__filename=vt.fileURLToPath(import.meta.url);globalThis.__dirname=_t.dirname(__filename)});p();p();p();var b=t=>Array.isArray(t)?t:[t],K=t=>t.replace(/[\W_]([a-z\d])?/gi,(e,r)=>r?r.toUpperCase():"");function Et(t,e){return e.length!==t.length?!1:t.every((r,n)=>r===e[n])}function Q(t,e){return e.length>t.length?!1:Et(t.slice(0,e.length),e)}p();function S(t){if(t===null||typeof t!="object")return!1;let e=Object.getPrototypeOf(t);return e!==null&&e!==Object.prototype&&Object.getPrototypeOf(e)!==null||Symbol.iterator in t?!1:Symbol.toStringTag in t?Object.prototype.toString.call(t)==="[object Module]":!0}function W(t,e,r=".",n){if(!S(e))return W(t,{},r,n);let o=Object.assign({},e);for(let s in t){if(s==="__proto__"||s==="constructor")continue;let a=t[s];a!=null&&(n&&n(o,s,a,r)||(Array.isArray(a)&&Array.isArray(o[s])?o[s]=[...a,...o[s]]:S(a)&&S(o[s])?o[s]=W(a,o[s],(r?`${r}.`:"")+s.toString(),n):o[s]=a))}return o}function O(t){return(...e)=>e.reduce((r,n)=>W(r,n,"",t),{})}var yt=O(),Ee=O((t,e,r)=>{if(t[e]!==void 0&&typeof r=="function")return t[e]=r(t[e]),!0}),ye=O((t,e,r)=>{if(Array.isArray(t[e])&&typeof r=="function")return t[e]=r(t[e]),!0});p();var Ft="known-flag",At="unknown-flag",Mt="argument",{stringify:E}=JSON,Bt=/\B([A-Z])/g,kt=t=>t.replace(Bt,"-$1").toLowerCase(),{hasOwnProperty:bt}=Object.prototype,y=(t,e)=>bt.call(t,e),St=t=>Array.isArray(t),X=t=>typeof t=="function"?[t,!1]:St(t)?[t[0],!0]:X(t.type),Wt=(t,e)=>t===Boolean?e!=="false":e,Ot=(t,e)=>typeof e=="boolean"?e:t===Number&&e===""?Number.NaN:t(e),Nt=/[\s.:=]/,Pt=t=>{let e=`Flag name ${E(t)}`;if(t.length===0)throw new Error(`${e} cannot be empty`);if(t.length===1)throw new Error(`${e} must be longer than a character`);let r=t.match(Nt);if(r)throw new Error(`${e} cannot contain ${E(r?.[0])}`)},Dt=t=>{let e={},r=(n,o)=>{if(y(e,n))throw new Error(`Duplicate flags named ${E(n)}`);e[n]=o};for(let n in t){if(!y(t,n))continue;Pt(n);let o=t[n],s=[[],...X(o),o];r(n,s);let a=kt(n);if(n!==a&&r(a,s),"alias"in o&&typeof o.alias=="string"){let{alias:c}=o,i=`Flag alias ${E(c)} for flag ${E(n)}`;if(c.length===0)throw new Error(`${i} cannot be empty`);if(c.length>1)throw new Error(`${i} must be a single character`);r(c,s)}}return e},Lt=(t,e)=>{let r={};for(let n in t){if(!y(t,n))continue;let[o,,s,a]=e[n];if(o.length===0&&"default"in a){let{default:c}=a;typeof c=="function"&&(c=c()),r[n]=c}else r[n]=s?o:o.pop()}return r},B="--",It=/[.:=]/,xt=/^-{1,2}\w/,Rt=t=>{if(!xt.test(t))return;let e=!t.startsWith(B),r=t.slice(e?1:2),n,o=r.match(It);if(o){let{index:s}=o;n=r.slice(s+1),r=r.slice(0,s)}return[r,n,e]},$t=(t,{onFlag:e,onArgument:r})=>{let n,o=(s,a)=>{if(typeof n!="function")return!0;n(s,a),n=void 0};for(let s=0;s<t.length;s+=1){let a=t[s];if(a===B){o();let i=t.slice(s+1);r?.(i,[s],!0);break}let c=Rt(a);if(c){if(o(),!e)continue;let[i,u,f]=c;if(f)for(let l=0;l<i.length;l+=1){o();let g=l===i.length-1;n=e(i[l],g?u:void 0,[s,l+1,g])}else n=e(i,u,[s])}else o(a,[s])&&r?.([a],[s])}o()},jt=(t,e)=>{for(let[r,n,o]of e.reverse()){if(n){let s=t[r],a=s.slice(0,n);if(o||(a+=s.slice(n+1)),a!=="-"){t[r]=a;continue}}t.splice(r,1)}},N=(t,e=process.argv.slice(2),{ignore:r}={})=>{let n=[],o=Dt(t),s={},a=[];return a[B]=[],$t(e,{onFlag(c,i,u){let f=y(o,c);if(!r?.(f?Ft:At,c,i)){if(f){let[l,g]=o[c],C=Wt(g,i),d=(_,v)=>{n.push(u),v&&n.push(v),l.push(Ot(g,_||""))};return C===void 0?d:d(C)}y(s,c)||(s[c]=[]),s[c].push(i===void 0?!0:i),n.push(u)}},onArgument(c,i,u){r?.(Mt,e[i[0]])||(a.push(...c),u?(a[B]=c,e.splice(i[0])):n.push(i))}}),jt(e,n),{flags:Lt(t,o),unknownFlags:s,_:a}};var A=JSON.stringify,L=class extends Error{constructor(e,r){super(r("core.commandExists",A(e))),this.commandName=e}},I=class extends Error{constructor(e,r){super(r("core.noSuchCommand",A(e))),this.commandName=e}},x=class extends Error{constructor(e){super(e("core.noCommandGiven"))}},R=class extends Error{constructor(e,r,n){super(n("core.commandNameConflict",A(e),A(r))),this.n1=e,this.n2=r}},$=class extends Error{constructor(e){super(e("core.scriptNameNotSet"))}},j=class extends Error{constructor(e){super(e("core.descriptionNotSet"))}},T=class extends Error{constructor(e){super(e("core.versionNotSet"))}},q=class extends Error{constructor(e,r){super(r("core.badNameFormat",A(e))),this.commandName=e}};var Tt={en:{"core.commandExists":'Command "%s" exists.',"core.noSuchCommand":"No such command: %s.","core.noCommandGiven":"No command given.","core.commandNameConflict":"Command name %s conflicts with %s. Maybe caused by alias.","core.scriptNameNotSet":"Name not set.","core.descriptionNotSet":"Description not set.","core.versionNotSet":"Version not set.","core.badNameFormat":"Bad name format: %s.","core.localeMustBeCalledFirst":"locale() or fallbackLocale() must be called at first.","core.cliParseMustBeCalled":"cli.parse() must be called.","core.spreadParameterMustBeLast":"Invalid Parameter: Spread parameter %s must be last.","core.requiredParameterCannotComeAfterOptionalParameter":"Invalid Parameter: Required parameter %s cannot come after optional parameter %s.","core.parameterMustBeWrappedInBrackets":"Invalid Parameter: Parameter %s must be wrapped in <> (required parameter) or [] (optional parameter).","core.parameterIsUsedMoreThanOnce":"Invalid Parameter: Parameter %s is used more than once.","core.missingRequiredParameter":"Missing required parameter %s."},"zh-CN":{"core.commandExists":'\u547D\u4EE4 "%s" \u5DF2\u5B58\u5728\u3002',"core.noSuchCommand":"\u627E\u4E0D\u5230\u547D\u4EE4: %s\u3002","core.noCommandGiven":"\u6CA1\u6709\u8F93\u5165\u547D\u4EE4\u3002","core.commandNameConflict":"\u547D\u4EE4\u540D\u79F0 %s \u548C %s \u51B2\u7A81\u3002 \u53EF\u80FD\u662F\u7531\u4E8E\u522B\u540D\u5BFC\u81F4\u7684\u3002","core.scriptNameNotSet":"\u672A\u8BBE\u7F6E CLI Script \u540D\u79F0\u3002","core.descriptionNotSet":"\u672A\u8BBE\u7F6E CLI \u63CF\u8FF0\u3002","core.versionNotSet":"\u672A\u8BBE\u7F6E CLI \u7248\u672C\u3002","core.badNameFormat":"\u9519\u8BEF\u7684\u547D\u4EE4\u540D\u5B57\u683C\u5F0F: %s\u3002","core.localeMustBeCalledFirst":"locale() \u6216 fallbackLocale() \u5FC5\u987B\u5728\u6700\u5F00\u59CB\u8C03\u7528\u3002","core.cliParseMustBeCalled":"cli.parse() \u5FC5\u987B\u88AB\u8C03\u7528\u3002","core.spreadParameterMustBeLast":"\u4E0D\u5408\u6CD5\u7684\u53C2\u6570: \u5C55\u5F00\u53C2\u6570 %s \u5FC5\u987B\u5728\u6700\u540E\u3002","core.requiredParameterCannotComeAfterOptionalParameter":"\u4E0D\u5408\u6CD5\u7684\u53C2\u6570: \u5FC5\u586B\u53C2\u6570 %s \u4E0D\u80FD\u5728\u53EF\u9009\u53C2\u6570 %s \u4E4B\u540E\u3002","core.parameterMustBeWrappedInBrackets":"\u4E0D\u5408\u6CD5\u7684\u53C2\u6570: \u53C2\u6570 %s \u5FC5\u987B\u88AB <> (\u5FC5\u586B\u53C2\u6570) \u6216 [] (\u53EF\u9009\u53C2\u6570) \u5305\u88F9\u3002","core.parameterIsUsedMoreThanOnce":"\u4E0D\u5408\u6CD5\u7684\u53C2\u6570: \u53C2\u6570 %s \u88AB\u4F7F\u7528\u4E86\u591A\u6B21\u3002","core.missingRequiredParameter":"\u7F3A\u5C11\u5FC5\u586B\u53C2\u6570 %s\u3002"}},{stringify:w}=JSON;function P(t,e){let r=[],n,o;for(let s of t){if(o)throw new Error(e("core.spreadParameterMustBeLast",w(o)));let a=s[0],c=s[s.length-1],i;if(a==="<"&&c===">"&&(i=!0,n))throw new Error(e("core.requiredParameterMustBeBeforeOptional",w(s),w(n)));if(a==="["&&c==="]"&&(i=!1,n=s),i===void 0)throw new Error(e("core.parameterMustBeWrappedInBrackets",w(s)));let u=s.slice(1,-1),f=u.slice(-3)==="...";f&&(o=s,u=u.slice(0,-3)),r.push({name:u,required:i,spread:f})}return r}function D(t,e,r,n){for(let o=0;o<e.length;o+=1){let{name:s,required:a,spread:c}=e[o],i=K(s);if(i in t)throw new Error(n("core.parameterIsUsedMoreThanOnce",w(s)));let u=c?r.slice(o):r[o];if(c&&(o=e.length),a&&(!u||c&&u.length===0))throw new Error(n("core.missingRequiredParameter",w(s)));t[i]=u}}function Y(t,e,r,n){if(r.alias){let o=b(r.alias);for(let s of o){if(s in e)throw new R(e[s].name,r.name,n);t.set(typeof s=="symbol"?s:s.split(" "),{...r,__isAlias:!0})}}}function qt(t,e){let r=new Map;t[m]&&(r.set(m,t[m]),Y(r,t,t[m],e));for(let n of Object.values(t))Y(r,t,n,e),r.set(n.name.split(" "),n);return r}function Ht(t,e,r){var n;let o=qt(t,r);for(let[s,a]of o.entries()){let c=N((n=a?.flags)!=null?n:Object.create(null),[...e]),{_:i}=c;if(s!==m&&Q(i,s))return[a,s]}return o.has(m)?[o.get(m),m]:[void 0,void 0]}function Ut(t){let e={pre:[],normal:[],post:[]};for(let n of t){let o=typeof n=="object"?n:{fn:n},{enforce:s,fn:a}=o;s==="post"||s==="pre"?e[s].push(a):e.normal.push(a)}let r=[...e.pre,...e.normal,...e.post];return n=>{return o(0);function o(s){let a=r[s];return a(n,o.bind(null,s+1))}}}var Gt=/\s{2,}/,zt=t=>t===m?!0:!(t.startsWith(" ")||t.endsWith(" "))&&!Gt.test(t);var Jt="<Root>",Vt=t=>Array.isArray(t)?t.join(" "):typeof t=="string"?t:Jt;var Zt=t=>t.filter(e=>!e.startsWith("-")),U=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},h=(t,e,r)=>(U(t,e,"read from private field"),r?r.call(t):e.get(t));var Kt=(t,e,r,n)=>(U(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),k=(t,e,r)=>(U(t,e,"access private method"),r),Qt,tt,et,rt,st,G,nt,ot,F,z,H,at,Xt,Yt,te,it,ct,ut,lt,ee,re,J,V,se,ne,oe,ae,ht,ft,mt,pt,ie,ce,ue,le,m=Symbol.for("Clerc.Root");Qt=new WeakMap;tt=new WeakMap;et=new WeakMap;rt=new WeakMap;st=new WeakMap;G=new WeakMap;nt=new WeakMap;ot=new WeakMap;F=new WeakMap;z=new WeakMap;H=new WeakMap;at=new WeakMap;Xt=new WeakMap;Yt=new WeakMap;te=new WeakMap;it=new WeakSet;ct=function(){return h(this,F).has(m)};ut=new WeakSet;lt=function(){return Object.prototype.hasOwnProperty.call(this._commands,m)};ee=new WeakSet;re=function(){this.i18n.add(Tt)};J=new WeakSet;V=function(){Kt(this,at,!0)};se=new WeakSet;ne=function(t,e,r={}){k(this,J,V).call(this);let{t:n}=this.i18n,s=(l=>!(typeof l=="string"||l===m))(t),a=s?t.name:t;if(!zt(a))throw new q(a,n);let{handler:c=void 0,...i}=s?t:{name:a,description:e,...r},u=[i.name],f=i.alias?b(i.alias):[];i.alias&&u.push(...f);for(let l of u)if(h(this,F).has(l))throw new L(Vt(l),n);h(this,G)[a]=i,h(this,F).add(i.name);for(let l of f)h(this,F).add(l);return s&&c&&this.on(t.name,c),this};oe=new WeakSet;ae=function(){let{t}=this.i18n;if(!h(this,tt))throw new $(t);if(!h(this,et))throw new j(t);if(!h(this,rt))throw new T(t)};ht=new WeakSet;ft=function(t){var e;let r=h(this,z),{t:n}=this.i18n,[o,s]=t(),a=!!o,c={...h(this,ot),...o?.flags},i=N(c,[...r]),u=o?.name===m||s===m?0:s?.length?s.length:o?.name.split(" ").length,{_:f,flags:l,unknownFlags:g}=i,C=!a||o.name===m?f:f.slice(u),d=(e=o?.parameters)!=null?e:[],_=d.indexOf("--"),v=d.slice(_+1)||[],M=Object.create(null);if(_>-1&&v.length>0){d=d.slice(0,_);let Z=f["--"];C=C.slice(0,-Z.length||void 0),D(M,P(d,n),C,n),D(M,P(v,n),Z,n)}else D(M,P(d,n),C,n);let gt={...l,...g};return{name:o?.name,called:Array.isArray(s)?s.join(" "):s,resolved:a,hasRootOrAlias:h(this,it,ct),hasRoot:h(this,ut,lt),raw:{...i,parameters:C,mergedFlags:gt},parameters:M,flags:l,unknownFlags:g,cli:this}};mt=new WeakSet;pt=function(t){if(h(this,H).length>0)for(let e of h(this,H))e(t);else throw t};ie=new WeakSet;ce=function(t){try{t()}catch(e){k(this,mt,pt).call(this,e)}};ue=new WeakSet;le=function(){k(this,J,V).call(this);let{t}=this.i18n,e=h(this,z);if(!e)throw new Error(t("core.cliParseMustBeCalled"));let r=()=>Ht(h(this,G),e,t),n=()=>k(this,ht,ft).call(this,r),o={enforce:"post",fn:c=>{let[i]=r(),u=Zt(e).join(" ");if(!i)throw u?new I(u,t):new x(t);h(this,nt).emit(i.name,c)}},s=[...h(this,st),o];Ut(s)(n())};var dt=(t,e)=>({...t,handler:e});import he from"path";import{fileURLToPath as fe}from"url";var me=he.dirname(fe(import.meta.url)),Le=dt({name:"ls",description:"test",flags:{},parameters:[]},t=>{console.log("I live in",me)});export{Le as command};
