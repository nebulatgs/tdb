var ko=Object.create;var as=Object.defineProperty;var Co=Object.getOwnPropertyDescriptor;var To=Object.getOwnPropertyNames;var Oo=Object.getPrototypeOf,Po=Object.prototype.hasOwnProperty;var M=(s=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(s,{get:(t,e)=>(typeof require<"u"?require:t)[e]}):s)(function(s){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+s+'" is not supported')});var Fo=(s,t)=>()=>(s&&(t=s(s=0)),t);var x=(s,t)=>()=>(t||s((t={exports:{}}).exports,t),t.exports);var Ao=(s,t,e,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of To(t))!Po.call(s,r)&&r!==e&&as(s,r,{get:()=>t[r],enumerable:!(i=Co(t,r))||i.enumerable});return s};var Oe=(s,t,e)=>(e=s!=null?ko(Oo(s)):{},Ao(t||!s||!s.__esModule?as(e,"default",{value:s,enumerable:!0}):e,s));import{createRequire as No}from"node:module";import Ro from"node:path";import Do from"node:url";var p=Fo(()=>{"use strict";globalThis.require=No(import.meta.url);globalThis.__filename=Do.fileURLToPath(import.meta.url);globalThis.__dirname=Ro.dirname(__filename)});var fs=x((Kl,us)=>{"use strict";p();us.exports=hs;function hs(s,t,e){s instanceof RegExp&&(s=cs(s,e)),t instanceof RegExp&&(t=cs(t,e));var i=ls(s,t,e);return i&&{start:i[0],end:i[1],pre:e.slice(0,i[0]),body:e.slice(i[0]+s.length,i[1]),post:e.slice(i[1]+t.length)}}function cs(s,t){var e=t.match(s);return e?e[0]:null}hs.range=ls;function ls(s,t,e){var i,r,n,o,a,c=e.indexOf(s),l=e.indexOf(t,c+1),h=c;if(c>=0&&l>0){if(s===t)return[c,l];for(i=[],n=e.length;h>=0&&!a;)h==c?(i.push(h),c=e.indexOf(s,h+1)):i.length==1?a=[i.pop(),l]:(r=i.pop(),r<n&&(n=r,o=l),l=e.indexOf(t,h+1)),h=c<l&&c>=0?c:l;i.length&&(a=[n,o])}return a}});var bs=x((Jl,Ss)=>{p();var ds=fs();Ss.exports=Lo;var ps="\0SLASH"+Math.random()+"\0",ms="\0OPEN"+Math.random()+"\0",mi="\0CLOSE"+Math.random()+"\0",ys="\0COMMA"+Math.random()+"\0",gs="\0PERIOD"+Math.random()+"\0";function pi(s){return parseInt(s,10)==s?parseInt(s,10):s.charCodeAt(0)}function _o(s){return s.split("\\\\").join(ps).split("\\{").join(ms).split("\\}").join(mi).split("\\,").join(ys).split("\\.").join(gs)}function Io(s){return s.split(ps).join("\\").split(ms).join("{").split(mi).join("}").split(ys).join(",").split(gs).join(".")}function ws(s){if(!s)return[""];var t=[],e=ds("{","}",s);if(!e)return s.split(",");var i=e.pre,r=e.body,n=e.post,o=i.split(",");o[o.length-1]+="{"+r+"}";var a=ws(n);return n.length&&(o[o.length-1]+=a.shift(),o.push.apply(o,a)),t.push.apply(t,o),t}function Lo(s){return s?(s.substr(0,2)==="{}"&&(s="\\{\\}"+s.substr(2)),te(_o(s),!0).map(Io)):[]}function Mo(s){return"{"+s+"}"}function Bo(s){return/^-?0\d/.test(s)}function jo(s,t){return s<=t}function qo(s,t){return s>=t}function te(s,t){var e=[],i=ds("{","}",s);if(!i)return[s];var r=i.pre,n=i.post.length?te(i.post,!1):[""];if(/\$$/.test(i.pre))for(var o=0;o<n.length;o++){var a=r+"{"+i.body+"}"+n[o];e.push(a)}else{var c=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(i.body),l=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(i.body),h=c||l,u=i.body.indexOf(",")>=0;if(!h&&!u)return i.post.match(/,.*\}/)?(s=i.pre+"{"+i.body+mi+i.post,te(s)):[s];var f;if(h)f=i.body.split(/\.\./);else if(f=ws(i.body),f.length===1&&(f=te(f[0],!1).map(Mo),f.length===1))return n.map(function(k){return i.pre+f[0]+k});var d;if(h){var y=pi(f[0]),m=pi(f[1]),w=Math.max(f[0].length,f[1].length),g=f.length==3?Math.abs(pi(f[2])):1,b=jo,v=m<y;v&&(g*=-1,b=qo);var E=f.some(Bo);d=[];for(var T=y;b(T,m);T+=g){var _;if(l)_=String.fromCharCode(T),_==="\\"&&(_="");else if(_=String(T),E){var st=w-_.length;if(st>0){var ut=new Array(st+1).join("0");T<0?_="-"+ut+_.slice(1):_=ut+_}}d.push(_)}}else{d=[];for(var S=0;S<f.length;S++)d.push.apply(d,te(f[S],!1))}for(var S=0;S<d.length;S++)for(var o=0;o<n.length;o++){var a=r+d[S]+n[o];(!t||h||a)&&e.push(a)}}return e}});var W=x(_i=>{"use strict";p();_i.fromCallback=function(s){return Object.defineProperty(function(...t){if(typeof t[t.length-1]=="function")s.apply(this,t);else return new Promise((e,i)=>{t.push((r,n)=>r!=null?i(r):e(n)),s.apply(this,t)})},"name",{value:s.name})};_i.fromPromise=function(s){return Object.defineProperty(function(...t){let e=t[t.length-1];if(typeof e!="function")return s.apply(this,t);t.pop(),s.apply(this,t).then(i=>e(null,i),e)},"name",{value:s.name})}});var hr=x((Of,cr)=>{p();var Pt=M("constants"),cc=process.cwd,Ke=null,hc=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return Ke||(Ke=cc.call(process)),Ke};try{process.cwd()}catch{}typeof process.chdir=="function"&&(Ii=process.chdir,process.chdir=function(s){Ke=null,Ii.call(process,s)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,Ii));var Ii;cr.exports=lc;function lc(s){Pt.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&t(s),s.lutimes||e(s),s.chown=n(s.chown),s.fchown=n(s.fchown),s.lchown=n(s.lchown),s.chmod=i(s.chmod),s.fchmod=i(s.fchmod),s.lchmod=i(s.lchmod),s.chownSync=o(s.chownSync),s.fchownSync=o(s.fchownSync),s.lchownSync=o(s.lchownSync),s.chmodSync=r(s.chmodSync),s.fchmodSync=r(s.fchmodSync),s.lchmodSync=r(s.lchmodSync),s.stat=a(s.stat),s.fstat=a(s.fstat),s.lstat=a(s.lstat),s.statSync=c(s.statSync),s.fstatSync=c(s.fstatSync),s.lstatSync=c(s.lstatSync),s.chmod&&!s.lchmod&&(s.lchmod=function(h,u,f){f&&process.nextTick(f)},s.lchmodSync=function(){}),s.chown&&!s.lchown&&(s.lchown=function(h,u,f,d){d&&process.nextTick(d)},s.lchownSync=function(){}),hc==="win32"&&(s.rename=typeof s.rename!="function"?s.rename:function(h){function u(f,d,y){var m=Date.now(),w=0;h(f,d,function g(b){if(b&&(b.code==="EACCES"||b.code==="EPERM"||b.code==="EBUSY")&&Date.now()-m<6e4){setTimeout(function(){s.stat(d,function(v,E){v&&v.code==="ENOENT"?h(f,d,g):y(b)})},w),w<100&&(w+=10);return}y&&y(b)})}return Object.setPrototypeOf&&Object.setPrototypeOf(u,h),u}(s.rename)),s.read=typeof s.read!="function"?s.read:function(h){function u(f,d,y,m,w,g){var b;if(g&&typeof g=="function"){var v=0;b=function(E,T,_){if(E&&E.code==="EAGAIN"&&v<10)return v++,h.call(s,f,d,y,m,w,b);g.apply(this,arguments)}}return h.call(s,f,d,y,m,w,b)}return Object.setPrototypeOf&&Object.setPrototypeOf(u,h),u}(s.read),s.readSync=typeof s.readSync!="function"?s.readSync:function(h){return function(u,f,d,y,m){for(var w=0;;)try{return h.call(s,u,f,d,y,m)}catch(g){if(g.code==="EAGAIN"&&w<10){w++;continue}throw g}}}(s.readSync);function t(h){h.lchmod=function(u,f,d){h.open(u,Pt.O_WRONLY|Pt.O_SYMLINK,f,function(y,m){if(y){d&&d(y);return}h.fchmod(m,f,function(w){h.close(m,function(g){d&&d(w||g)})})})},h.lchmodSync=function(u,f){var d=h.openSync(u,Pt.O_WRONLY|Pt.O_SYMLINK,f),y=!0,m;try{m=h.fchmodSync(d,f),y=!1}finally{if(y)try{h.closeSync(d)}catch{}else h.closeSync(d)}return m}}function e(h){Pt.hasOwnProperty("O_SYMLINK")&&h.futimes?(h.lutimes=function(u,f,d,y){h.open(u,Pt.O_SYMLINK,function(m,w){if(m){y&&y(m);return}h.futimes(w,f,d,function(g){h.close(w,function(b){y&&y(g||b)})})})},h.lutimesSync=function(u,f,d){var y=h.openSync(u,Pt.O_SYMLINK),m,w=!0;try{m=h.futimesSync(y,f,d),w=!1}finally{if(w)try{h.closeSync(y)}catch{}else h.closeSync(y)}return m}):h.futimes&&(h.lutimes=function(u,f,d,y){y&&process.nextTick(y)},h.lutimesSync=function(){})}function i(h){return h&&function(u,f,d){return h.call(s,u,f,function(y){l(y)&&(y=null),d&&d.apply(this,arguments)})}}function r(h){return h&&function(u,f){try{return h.call(s,u,f)}catch(d){if(!l(d))throw d}}}function n(h){return h&&function(u,f,d,y){return h.call(s,u,f,d,function(m){l(m)&&(m=null),y&&y.apply(this,arguments)})}}function o(h){return h&&function(u,f,d){try{return h.call(s,u,f,d)}catch(y){if(!l(y))throw y}}}function a(h){return h&&function(u,f,d){typeof f=="function"&&(d=f,f=null);function y(m,w){w&&(w.uid<0&&(w.uid+=4294967296),w.gid<0&&(w.gid+=4294967296)),d&&d.apply(this,arguments)}return f?h.call(s,u,f,y):h.call(s,u,y)}}function c(h){return h&&function(u,f){var d=f?h.call(s,u,f):h.call(s,u);return d&&(d.uid<0&&(d.uid+=4294967296),d.gid<0&&(d.gid+=4294967296)),d}}function l(h){if(!h||h.code==="ENOSYS")return!0;var u=!process.getuid||process.getuid()!==0;return!!(u&&(h.code==="EINVAL"||h.code==="EPERM"))}}});var fr=x((Ff,ur)=>{p();var lr=M("stream").Stream;ur.exports=uc;function uc(s){return{ReadStream:t,WriteStream:e};function t(i,r){if(!(this instanceof t))return new t(i,r);lr.call(this);var n=this;this.path=i,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,r=r||{};for(var o=Object.keys(r),a=0,c=o.length;a<c;a++){var l=o[a];this[l]=r[l]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){n._read()});return}s.open(this.path,this.flags,this.mode,function(h,u){if(h){n.emit("error",h),n.readable=!1;return}n.fd=u,n.emit("open",u),n._read()})}function e(i,r){if(!(this instanceof e))return new e(i,r);lr.call(this),this.path=i,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,r=r||{};for(var n=Object.keys(r),o=0,a=n.length;o<a;o++){var c=n[o];this[c]=r[c]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=s.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}});var pr=x((Nf,dr)=>{"use strict";p();dr.exports=dc;var fc=Object.getPrototypeOf||function(s){return s.__proto__};function dc(s){if(s===null||typeof s!="object")return s;if(s instanceof Object)var t={__proto__:fc(s)};else var t=Object.create(null);return Object.getOwnPropertyNames(s).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}),t}});var Yt=x((Df,Bi)=>{p();var N=M("fs"),pc=hr(),mc=fr(),yc=pr(),Ye=M("util"),K,Ve;typeof Symbol=="function"&&typeof Symbol.for=="function"?(K=Symbol.for("graceful-fs.queue"),Ve=Symbol.for("graceful-fs.previous")):(K="___graceful-fs.queue",Ve="___graceful-fs.previous");function gc(){}function gr(s,t){Object.defineProperty(s,K,{get:function(){return t}})}var It=gc;Ye.debuglog?It=Ye.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(It=function(){var s=Ye.format.apply(Ye,arguments);s="GFS4: "+s.split(/\n/).join(`
GFS4: `),console.error(s)});N[K]||(mr=global[K]||[],gr(N,mr),N.close=function(s){function t(e,i){return s.call(N,e,function(r){r||yr(),typeof i=="function"&&i.apply(this,arguments)})}return Object.defineProperty(t,Ve,{value:s}),t}(N.close),N.closeSync=function(s){function t(e){s.apply(N,arguments),yr()}return Object.defineProperty(t,Ve,{value:s}),t}(N.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){It(N[K]),M("assert").equal(N[K].length,0)}));var mr;global[K]||gr(global,N[K]);Bi.exports=Li(yc(N));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!N.__patched&&(Bi.exports=Li(N),N.__patched=!0);function Li(s){pc(s),s.gracefulify=Li,s.createReadStream=T,s.createWriteStream=_;var t=s.readFile;s.readFile=e;function e(S,k,C){return typeof k=="function"&&(C=k,k=null),$(S,k,C);function $(z,L,A,D){return t(z,L,function(O){O&&(O.code==="EMFILE"||O.code==="ENFILE")?Kt([$,[z,L,A],O,D||Date.now(),Date.now()]):typeof A=="function"&&A.apply(this,arguments)})}}var i=s.writeFile;s.writeFile=r;function r(S,k,C,$){return typeof C=="function"&&($=C,C=null),z(S,k,C,$);function z(L,A,D,O,G){return i(L,A,D,function(P){P&&(P.code==="EMFILE"||P.code==="ENFILE")?Kt([z,[L,A,D,O],P,G||Date.now(),Date.now()]):typeof O=="function"&&O.apply(this,arguments)})}}var n=s.appendFile;n&&(s.appendFile=o);function o(S,k,C,$){return typeof C=="function"&&($=C,C=null),z(S,k,C,$);function z(L,A,D,O,G){return n(L,A,D,function(P){P&&(P.code==="EMFILE"||P.code==="ENFILE")?Kt([z,[L,A,D,O],P,G||Date.now(),Date.now()]):typeof O=="function"&&O.apply(this,arguments)})}}var a=s.copyFile;a&&(s.copyFile=c);function c(S,k,C,$){return typeof C=="function"&&($=C,C=0),z(S,k,C,$);function z(L,A,D,O,G){return a(L,A,D,function(P){P&&(P.code==="EMFILE"||P.code==="ENFILE")?Kt([z,[L,A,D,O],P,G||Date.now(),Date.now()]):typeof O=="function"&&O.apply(this,arguments)})}}var l=s.readdir;s.readdir=u;var h=/^v[0-5]\./;function u(S,k,C){typeof k=="function"&&(C=k,k=null);var $=h.test(process.version)?function(A,D,O,G){return l(A,z(A,D,O,G))}:function(A,D,O,G){return l(A,D,z(A,D,O,G))};return $(S,k,C);function z(L,A,D,O){return function(G,P){G&&(G.code==="EMFILE"||G.code==="ENFILE")?Kt([$,[L,A,D],G,O||Date.now(),Date.now()]):(P&&P.sort&&P.sort(),typeof D=="function"&&D.call(this,G,P))}}}if(process.version.substr(0,4)==="v0.8"){var f=mc(s);g=f.ReadStream,v=f.WriteStream}var d=s.ReadStream;d&&(g.prototype=Object.create(d.prototype),g.prototype.open=b);var y=s.WriteStream;y&&(v.prototype=Object.create(y.prototype),v.prototype.open=E),Object.defineProperty(s,"ReadStream",{get:function(){return g},set:function(S){g=S},enumerable:!0,configurable:!0}),Object.defineProperty(s,"WriteStream",{get:function(){return v},set:function(S){v=S},enumerable:!0,configurable:!0});var m=g;Object.defineProperty(s,"FileReadStream",{get:function(){return m},set:function(S){m=S},enumerable:!0,configurable:!0});var w=v;Object.defineProperty(s,"FileWriteStream",{get:function(){return w},set:function(S){w=S},enumerable:!0,configurable:!0});function g(S,k){return this instanceof g?(d.apply(this,arguments),this):g.apply(Object.create(g.prototype),arguments)}function b(){var S=this;ut(S.path,S.flags,S.mode,function(k,C){k?(S.autoClose&&S.destroy(),S.emit("error",k)):(S.fd=C,S.emit("open",C),S.read())})}function v(S,k){return this instanceof v?(y.apply(this,arguments),this):v.apply(Object.create(v.prototype),arguments)}function E(){var S=this;ut(S.path,S.flags,S.mode,function(k,C){k?(S.destroy(),S.emit("error",k)):(S.fd=C,S.emit("open",C))})}function T(S,k){return new s.ReadStream(S,k)}function _(S,k){return new s.WriteStream(S,k)}var st=s.open;s.open=ut;function ut(S,k,C,$){return typeof C=="function"&&($=C,C=null),z(S,k,C,$);function z(L,A,D,O,G){return st(L,A,D,function(P,Ul){P&&(P.code==="EMFILE"||P.code==="ENFILE")?Kt([z,[L,A,D,O],P,G||Date.now(),Date.now()]):typeof O=="function"&&O.apply(this,arguments)})}}return s}function Kt(s){It("ENQUEUE",s[0].name,s[1]),N[K].push(s),Mi()}var Je;function yr(){for(var s=Date.now(),t=0;t<N[K].length;++t)N[K][t].length>2&&(N[K][t][3]=s,N[K][t][4]=s);Mi()}function Mi(){if(clearTimeout(Je),Je=void 0,N[K].length!==0){var s=N[K].shift(),t=s[0],e=s[1],i=s[2],r=s[3],n=s[4];if(r===void 0)It("RETRY",t.name,e),t.apply(null,e);else if(Date.now()-r>=6e4){It("TIMEOUT",t.name,e);var o=e.pop();typeof o=="function"&&o.call(null,i)}else{var a=Date.now()-n,c=Math.max(n-r,1),l=Math.min(c*1.2,100);a>=l?(It("RETRY",t.name,e),t.apply(null,e.concat([r]))):N[K].push(s)}Je===void 0&&(Je=setTimeout(Mi,0))}}});var tt=x(xt=>{"use strict";p();var wr=W().fromCallback,X=Yt(),wc=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(s=>typeof X[s]=="function");Object.assign(xt,X);wc.forEach(s=>{xt[s]=wr(X[s])});xt.exists=function(s,t){return typeof t=="function"?X.exists(s,t):new Promise(e=>X.exists(s,e))};xt.read=function(s,t,e,i,r,n){return typeof n=="function"?X.read(s,t,e,i,r,n):new Promise((o,a)=>{X.read(s,t,e,i,r,(c,l,h)=>{if(c)return a(c);o({bytesRead:l,buffer:h})})})};xt.write=function(s,t,...e){return typeof e[e.length-1]=="function"?X.write(s,t,...e):new Promise((i,r)=>{X.write(s,t,...e,(n,o,a)=>{if(n)return r(n);i({bytesWritten:o,buffer:a})})})};xt.readv=function(s,t,...e){return typeof e[e.length-1]=="function"?X.readv(s,t,...e):new Promise((i,r)=>{X.readv(s,t,...e,(n,o,a)=>{if(n)return r(n);i({bytesRead:o,buffers:a})})})};xt.writev=function(s,t,...e){return typeof e[e.length-1]=="function"?X.writev(s,t,...e):new Promise((i,r)=>{X.writev(s,t,...e,(n,o,a)=>{if(n)return r(n);i({bytesWritten:o,buffers:a})})})};typeof X.realpath.native=="function"?xt.realpath.native=wr(X.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")});var br=x((Mf,Sr)=>{"use strict";p();var Sc=M("path");Sr.exports.checkPath=function(t){if(process.platform==="win32"&&/[<>:"|?*]/.test(t.replace(Sc.parse(t).root,""))){let i=new Error(`Path contains invalid characters: ${t}`);throw i.code="EINVAL",i}}});var kr=x((jf,ji)=>{"use strict";p();var vr=tt(),{checkPath:Er}=br(),xr=s=>{let t={mode:511};return typeof s=="number"?s:{...t,...s}.mode};ji.exports.makeDir=async(s,t)=>(Er(s),vr.mkdir(s,{mode:xr(t),recursive:!0}));ji.exports.makeDirSync=(s,t)=>(Er(s),vr.mkdirSync(s,{mode:xr(t),recursive:!0}))});var yt=x((Wf,Cr)=>{"use strict";p();var bc=W().fromPromise,{makeDir:vc,makeDirSync:qi}=kr(),Wi=bc(vc);Cr.exports={mkdirs:Wi,mkdirsSync:qi,mkdirp:Wi,mkdirpSync:qi,ensureDir:Wi,ensureDirSync:qi}});var Ft=x(($f,Or)=>{"use strict";p();var Ec=W().fromPromise,Tr=tt();function xc(s){return Tr.access(s).then(()=>!0).catch(()=>!1)}Or.exports={pathExists:Ec(xc),pathExistsSync:Tr.existsSync}});var Ui=x((Gf,Pr)=>{"use strict";p();var Jt=tt(),kc=W().fromPromise;async function Cc(s,t,e){let i=await Jt.open(s,"r+"),r=null;try{await Jt.futimes(i,t,e)}finally{try{await Jt.close(i)}catch(n){r=n}}if(r)throw r}function Tc(s,t,e){let i=Jt.openSync(s,"r+");return Jt.futimesSync(i,t,e),Jt.closeSync(i)}Pr.exports={utimesMillis:kc(Cc),utimesMillisSync:Tc}});var Lt=x((Kf,Rr)=>{"use strict";p();var Vt=tt(),U=M("path"),Fr=W().fromPromise;function Oc(s,t,e){let i=e.dereference?r=>Vt.stat(r,{bigint:!0}):r=>Vt.lstat(r,{bigint:!0});return Promise.all([i(s),i(t).catch(r=>{if(r.code==="ENOENT")return null;throw r})]).then(([r,n])=>({srcStat:r,destStat:n}))}function Pc(s,t,e){let i,r=e.dereference?o=>Vt.statSync(o,{bigint:!0}):o=>Vt.lstatSync(o,{bigint:!0}),n=r(s);try{i=r(t)}catch(o){if(o.code==="ENOENT")return{srcStat:n,destStat:null};throw o}return{srcStat:n,destStat:i}}async function Fc(s,t,e,i){let{srcStat:r,destStat:n}=await Oc(s,t,i);if(n){if(ye(r,n)){let o=U.basename(s),a=U.basename(t);if(e==="move"&&o!==a&&o.toLowerCase()===a.toLowerCase())return{srcStat:r,destStat:n,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(r.isDirectory()&&!n.isDirectory())throw new Error(`Cannot overwrite non-directory '${t}' with directory '${s}'.`);if(!r.isDirectory()&&n.isDirectory())throw new Error(`Cannot overwrite directory '${t}' with non-directory '${s}'.`)}if(r.isDirectory()&&$i(s,t))throw new Error(Qe(s,t,e));return{srcStat:r,destStat:n}}function Ac(s,t,e,i){let{srcStat:r,destStat:n}=Pc(s,t,i);if(n){if(ye(r,n)){let o=U.basename(s),a=U.basename(t);if(e==="move"&&o!==a&&o.toLowerCase()===a.toLowerCase())return{srcStat:r,destStat:n,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(r.isDirectory()&&!n.isDirectory())throw new Error(`Cannot overwrite non-directory '${t}' with directory '${s}'.`);if(!r.isDirectory()&&n.isDirectory())throw new Error(`Cannot overwrite directory '${t}' with non-directory '${s}'.`)}if(r.isDirectory()&&$i(s,t))throw new Error(Qe(s,t,e));return{srcStat:r,destStat:n}}async function Ar(s,t,e,i){let r=U.resolve(U.dirname(s)),n=U.resolve(U.dirname(e));if(n===r||n===U.parse(n).root)return;let o;try{o=await Vt.stat(n,{bigint:!0})}catch(a){if(a.code==="ENOENT")return;throw a}if(ye(t,o))throw new Error(Qe(s,e,i));return Ar(s,t,n,i)}function Nr(s,t,e,i){let r=U.resolve(U.dirname(s)),n=U.resolve(U.dirname(e));if(n===r||n===U.parse(n).root)return;let o;try{o=Vt.statSync(n,{bigint:!0})}catch(a){if(a.code==="ENOENT")return;throw a}if(ye(t,o))throw new Error(Qe(s,e,i));return Nr(s,t,n,i)}function ye(s,t){return t.ino&&t.dev&&t.ino===s.ino&&t.dev===s.dev}function $i(s,t){let e=U.resolve(s).split(U.sep).filter(r=>r),i=U.resolve(t).split(U.sep).filter(r=>r);return e.every((r,n)=>i[n]===r)}function Qe(s,t,e){return`Cannot ${e} '${s}' to a subdirectory of itself, '${t}'.`}Rr.exports={checkPaths:Fr(Fc),checkPathsSync:Ac,checkParentPaths:Fr(Ar),checkParentPathsSync:Nr,isSrcSubdir:$i,areIdentical:ye}});var Mr=x((Jf,Lr)=>{"use strict";p();var V=tt(),ge=M("path"),{mkdirs:Nc}=yt(),{pathExists:Rc}=Ft(),{utimesMillis:Dc}=Ui(),we=Lt();async function _c(s,t,e={}){typeof e=="function"&&(e={filter:e}),e.clobber="clobber"in e?!!e.clobber:!0,e.overwrite="overwrite"in e?!!e.overwrite:e.clobber,e.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0001");let{srcStat:i,destStat:r}=await we.checkPaths(s,t,"copy",e);if(await we.checkParentPaths(s,i,t,"copy"),!await _r(s,t,e))return;let o=ge.dirname(t);await Rc(o)||await Nc(o),await Ir(r,s,t,e)}async function _r(s,t,e){return e.filter?e.filter(s,t):!0}async function Ir(s,t,e,i){let n=await(i.dereference?V.stat:V.lstat)(t);if(n.isDirectory())return Bc(n,s,t,e,i);if(n.isFile()||n.isCharacterDevice()||n.isBlockDevice())return Ic(n,s,t,e,i);if(n.isSymbolicLink())return jc(s,t,e,i);throw n.isSocket()?new Error(`Cannot copy a socket file: ${t}`):n.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${t}`):new Error(`Unknown file: ${t}`)}async function Ic(s,t,e,i,r){if(!t)return Dr(s,e,i,r);if(r.overwrite)return await V.unlink(i),Dr(s,e,i,r);if(r.errorOnExist)throw new Error(`'${i}' already exists`)}async function Dr(s,t,e,i){if(await V.copyFile(t,e),i.preserveTimestamps){Lc(s.mode)&&await Mc(e,s.mode);let r=await V.stat(t);await Dc(e,r.atime,r.mtime)}return V.chmod(e,s.mode)}function Lc(s){return(s&128)===0}function Mc(s,t){return V.chmod(s,t|128)}async function Bc(s,t,e,i,r){t||await V.mkdir(i);let n=await V.readdir(e);await Promise.all(n.map(async o=>{let a=ge.join(e,o),c=ge.join(i,o);if(!await _r(a,c,r))return;let{destStat:h}=await we.checkPaths(a,c,"copy",r);return Ir(h,a,c,r)})),t||await V.chmod(i,s.mode)}async function jc(s,t,e,i){let r=await V.readlink(t);if(i.dereference&&(r=ge.resolve(process.cwd(),r)),!s)return V.symlink(r,e);let n=null;try{n=await V.readlink(e)}catch(o){if(o.code==="EINVAL"||o.code==="UNKNOWN")return V.symlink(r,e);throw o}if(i.dereference&&(n=ge.resolve(process.cwd(),n)),we.isSrcSubdir(r,n))throw new Error(`Cannot copy '${r}' to a subdirectory of itself, '${n}'.`);if(we.isSrcSubdir(n,r))throw new Error(`Cannot overwrite '${n}' with '${r}'.`);return await V.unlink(e),V.symlink(r,e)}Lr.exports=_c});var Ur=x((Qf,Wr)=>{"use strict";p();var et=Yt(),Se=M("path"),qc=yt().mkdirsSync,Wc=Ui().utimesMillisSync,be=Lt();function Uc(s,t,e){typeof e=="function"&&(e={filter:e}),e=e||{},e.clobber="clobber"in e?!!e.clobber:!0,e.overwrite="overwrite"in e?!!e.overwrite:e.clobber,e.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0002");let{srcStat:i,destStat:r}=be.checkPathsSync(s,t,"copy",e);if(be.checkParentPathsSync(s,i,t,"copy"),e.filter&&!e.filter(s,t))return;let n=Se.dirname(t);return et.existsSync(n)||qc(n),Br(r,s,t,e)}function Br(s,t,e,i){let n=(i.dereference?et.statSync:et.lstatSync)(t);if(n.isDirectory())return Jc(n,s,t,e,i);if(n.isFile()||n.isCharacterDevice()||n.isBlockDevice())return $c(n,s,t,e,i);if(n.isSymbolicLink())return Zc(s,t,e,i);throw n.isSocket()?new Error(`Cannot copy a socket file: ${t}`):n.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${t}`):new Error(`Unknown file: ${t}`)}function $c(s,t,e,i,r){return t?zc(s,e,i,r):jr(s,e,i,r)}function zc(s,t,e,i){if(i.overwrite)return et.unlinkSync(e),jr(s,t,e,i);if(i.errorOnExist)throw new Error(`'${e}' already exists`)}function jr(s,t,e,i){return et.copyFileSync(t,e),i.preserveTimestamps&&Gc(s.mode,t,e),zi(e,s.mode)}function Gc(s,t,e){return Hc(s)&&Kc(e,s),Yc(t,e)}function Hc(s){return(s&128)===0}function Kc(s,t){return zi(s,t|128)}function zi(s,t){return et.chmodSync(s,t)}function Yc(s,t){let e=et.statSync(s);return Wc(t,e.atime,e.mtime)}function Jc(s,t,e,i,r){return t?qr(e,i,r):Vc(s.mode,e,i,r)}function Vc(s,t,e,i){return et.mkdirSync(e),qr(t,e,i),zi(e,s)}function qr(s,t,e){et.readdirSync(s).forEach(i=>Qc(i,s,t,e))}function Qc(s,t,e,i){let r=Se.join(t,s),n=Se.join(e,s);if(i.filter&&!i.filter(r,n))return;let{destStat:o}=be.checkPathsSync(r,n,"copy",i);return Br(o,r,n,i)}function Zc(s,t,e,i){let r=et.readlinkSync(t);if(i.dereference&&(r=Se.resolve(process.cwd(),r)),s){let n;try{n=et.readlinkSync(e)}catch(o){if(o.code==="EINVAL"||o.code==="UNKNOWN")return et.symlinkSync(r,e);throw o}if(i.dereference&&(n=Se.resolve(process.cwd(),n)),be.isSrcSubdir(r,n))throw new Error(`Cannot copy '${r}' to a subdirectory of itself, '${n}'.`);if(be.isSrcSubdir(n,r))throw new Error(`Cannot overwrite '${n}' with '${r}'.`);return Xc(r,e)}else return et.symlinkSync(r,e)}function Xc(s,t){return et.unlinkSync(t),et.symlinkSync(s,t)}Wr.exports=Uc});var Ze=x((Xf,$r)=>{"use strict";p();var th=W().fromPromise;$r.exports={copy:th(Mr()),copySync:Ur()}});var ve=x((ed,Gr)=>{"use strict";p();var zr=Yt(),eh=W().fromCallback;function ih(s,t){zr.rm(s,{recursive:!0,force:!0},t)}function sh(s){zr.rmSync(s,{recursive:!0,force:!0})}Gr.exports={remove:eh(ih),removeSync:sh}});var Xr=x((sd,Zr)=>{"use strict";p();var rh=W().fromPromise,Yr=tt(),Jr=M("path"),Vr=yt(),Qr=ve(),Hr=rh(async function(t){let e;try{e=await Yr.readdir(t)}catch{return Vr.mkdirs(t)}return Promise.all(e.map(i=>Qr.remove(Jr.join(t,i))))});function Kr(s){let t;try{t=Yr.readdirSync(s)}catch{return Vr.mkdirsSync(s)}t.forEach(e=>{e=Jr.join(s,e),Qr.removeSync(e)})}Zr.exports={emptyDirSync:Kr,emptydirSync:Kr,emptyDir:Hr,emptydir:Hr}});var rn=x((nd,sn)=>{"use strict";p();var nh=W().fromPromise,tn=M("path"),kt=tt(),en=yt();async function oh(s){let t;try{t=await kt.stat(s)}catch{}if(t&&t.isFile())return;let e=tn.dirname(s),i=null;try{i=await kt.stat(e)}catch(r){if(r.code==="ENOENT"){await en.mkdirs(e),await kt.writeFile(s,"");return}else throw r}i.isDirectory()?await kt.writeFile(s,""):await kt.readdir(e)}function ah(s){let t;try{t=kt.statSync(s)}catch{}if(t&&t.isFile())return;let e=tn.dirname(s);try{kt.statSync(e).isDirectory()||kt.readdirSync(e)}catch(i){if(i&&i.code==="ENOENT")en.mkdirsSync(e);else throw i}kt.writeFileSync(s,"")}sn.exports={createFile:nh(oh),createFileSync:ah}});var hn=x((ad,cn)=>{"use strict";p();var ch=W().fromPromise,nn=M("path"),At=tt(),on=yt(),{pathExists:hh}=Ft(),{areIdentical:an}=Lt();async function lh(s,t){let e;try{e=await At.lstat(t)}catch{}let i;try{i=await At.lstat(s)}catch(o){throw o.message=o.message.replace("lstat","ensureLink"),o}if(e&&an(i,e))return;let r=nn.dirname(t);await hh(r)||await on.mkdirs(r),await At.link(s,t)}function uh(s,t){let e;try{e=At.lstatSync(t)}catch{}try{let n=At.lstatSync(s);if(e&&an(n,e))return}catch(n){throw n.message=n.message.replace("lstat","ensureLink"),n}let i=nn.dirname(t);return At.existsSync(i)||on.mkdirsSync(i),At.linkSync(s,t)}cn.exports={createLink:ch(lh),createLinkSync:uh}});var un=x((hd,ln)=>{"use strict";p();var Nt=M("path"),Ee=tt(),{pathExists:fh}=Ft(),dh=W().fromPromise;async function ph(s,t){if(Nt.isAbsolute(s)){try{await Ee.lstat(s)}catch(n){throw n.message=n.message.replace("lstat","ensureSymlink"),n}return{toCwd:s,toDst:s}}let e=Nt.dirname(t),i=Nt.join(e,s);if(await fh(i))return{toCwd:i,toDst:s};try{await Ee.lstat(s)}catch(n){throw n.message=n.message.replace("lstat","ensureSymlink"),n}return{toCwd:s,toDst:Nt.relative(e,s)}}function mh(s,t){if(Nt.isAbsolute(s)){if(!Ee.existsSync(s))throw new Error("absolute srcpath does not exist");return{toCwd:s,toDst:s}}let e=Nt.dirname(t),i=Nt.join(e,s);if(Ee.existsSync(i))return{toCwd:i,toDst:s};if(!Ee.existsSync(s))throw new Error("relative srcpath does not exist");return{toCwd:s,toDst:Nt.relative(e,s)}}ln.exports={symlinkPaths:dh(ph),symlinkPathsSync:mh}});var pn=x((ud,dn)=>{"use strict";p();var fn=tt(),yh=W().fromPromise;async function gh(s,t){if(t)return t;let e;try{e=await fn.lstat(s)}catch{return"file"}return e&&e.isDirectory()?"dir":"file"}function wh(s,t){if(t)return t;let e;try{e=fn.lstatSync(s)}catch{return"file"}return e&&e.isDirectory()?"dir":"file"}dn.exports={symlinkType:yh(gh),symlinkTypeSync:wh}});var wn=x((dd,gn)=>{"use strict";p();var Sh=W().fromPromise,mn=M("path"),bt=tt(),{mkdirs:bh,mkdirsSync:vh}=yt(),{symlinkPaths:Eh,symlinkPathsSync:xh}=un(),{symlinkType:kh,symlinkTypeSync:Ch}=pn(),{pathExists:Th}=Ft(),{areIdentical:yn}=Lt();async function Oh(s,t,e){let i;try{i=await bt.lstat(t)}catch{}if(i&&i.isSymbolicLink()){let[a,c]=await Promise.all([bt.stat(s),bt.stat(t)]);if(yn(a,c))return}let r=await Eh(s,t);s=r.toDst;let n=await kh(r.toCwd,e),o=mn.dirname(t);return await Th(o)||await bh(o),bt.symlink(s,t,n)}function Ph(s,t,e){let i;try{i=bt.lstatSync(t)}catch{}if(i&&i.isSymbolicLink()){let a=bt.statSync(s),c=bt.statSync(t);if(yn(a,c))return}let r=xh(s,t);s=r.toDst,e=Ch(r.toCwd,e);let n=mn.dirname(t);return bt.existsSync(n)||vh(n),bt.symlinkSync(s,t,e)}gn.exports={createSymlink:Sh(Oh),createSymlinkSync:Ph}});var Tn=x((md,Cn)=>{"use strict";p();var{createFile:Sn,createFileSync:bn}=rn(),{createLink:vn,createLinkSync:En}=hn(),{createSymlink:xn,createSymlinkSync:kn}=wn();Cn.exports={createFile:Sn,createFileSync:bn,ensureFile:Sn,ensureFileSync:bn,createLink:vn,createLinkSync:En,ensureLink:vn,ensureLinkSync:En,createSymlink:xn,createSymlinkSync:kn,ensureSymlink:xn,ensureSymlinkSync:kn}});var Xe=x((gd,On)=>{p();function Fh(s,{EOL:t=`
`,finalEOL:e=!0,replacer:i=null,spaces:r}={}){let n=e?t:"";return JSON.stringify(s,i,r).replace(/\n/g,t)+n}function Ah(s){return Buffer.isBuffer(s)&&(s=s.toString("utf8")),s.replace(/^\uFEFF/,"")}On.exports={stringify:Fh,stripBom:Ah}});var Nn=x((Sd,An)=>{p();var Qt;try{Qt=Yt()}catch{Qt=M("fs")}var ti=W(),{stringify:Pn,stripBom:Fn}=Xe();async function Nh(s,t={}){typeof t=="string"&&(t={encoding:t});let e=t.fs||Qt,i="throws"in t?t.throws:!0,r=await ti.fromCallback(e.readFile)(s,t);r=Fn(r);let n;try{n=JSON.parse(r,t?t.reviver:null)}catch(o){if(i)throw o.message=`${s}: ${o.message}`,o;return null}return n}var Rh=ti.fromPromise(Nh);function Dh(s,t={}){typeof t=="string"&&(t={encoding:t});let e=t.fs||Qt,i="throws"in t?t.throws:!0;try{let r=e.readFileSync(s,t);return r=Fn(r),JSON.parse(r,t.reviver)}catch(r){if(i)throw r.message=`${s}: ${r.message}`,r;return null}}async function _h(s,t,e={}){let i=e.fs||Qt,r=Pn(t,e);await ti.fromCallback(i.writeFile)(s,r,e)}var Ih=ti.fromPromise(_h);function Lh(s,t,e={}){let i=e.fs||Qt,r=Pn(t,e);return i.writeFileSync(s,r,e)}var Mh={readFile:Rh,readFileSync:Dh,writeFile:Ih,writeFileSync:Lh};An.exports=Mh});var Dn=x((vd,Rn)=>{"use strict";p();var ei=Nn();Rn.exports={readJson:ei.readFile,readJsonSync:ei.readFileSync,writeJson:ei.writeFile,writeJsonSync:ei.writeFileSync}});var ii=x((xd,Ln)=>{"use strict";p();var Bh=W().fromPromise,Gi=tt(),_n=M("path"),In=yt(),jh=Ft().pathExists;async function qh(s,t,e="utf-8"){let i=_n.dirname(s);return await jh(i)||await In.mkdirs(i),Gi.writeFile(s,t,e)}function Wh(s,...t){let e=_n.dirname(s);Gi.existsSync(e)||In.mkdirsSync(e),Gi.writeFileSync(s,...t)}Ln.exports={outputFile:Bh(qh),outputFileSync:Wh}});var Bn=x((Cd,Mn)=>{"use strict";p();var{stringify:Uh}=Xe(),{outputFile:$h}=ii();async function zh(s,t,e={}){let i=Uh(t,e);await $h(s,i,e)}Mn.exports=zh});var qn=x((Od,jn)=>{"use strict";p();var{stringify:Gh}=Xe(),{outputFileSync:Hh}=ii();function Kh(s,t,e){let i=Gh(t,e);Hh(s,i,e)}jn.exports=Kh});var Un=x((Fd,Wn)=>{"use strict";p();var Yh=W().fromPromise,it=Dn();it.outputJson=Yh(Bn());it.outputJsonSync=qn();it.outputJSON=it.outputJson;it.outputJSONSync=it.outputJsonSync;it.writeJSON=it.writeJson;it.writeJSONSync=it.writeJsonSync;it.readJSON=it.readJson;it.readJSONSync=it.readJsonSync;Wn.exports=it});var Kn=x((Nd,Hn)=>{"use strict";p();var Jh=tt(),$n=M("path"),{copy:Vh}=Ze(),{remove:Gn}=ve(),{mkdirp:Qh}=yt(),{pathExists:Zh}=Ft(),zn=Lt();async function Xh(s,t,e={}){let i=e.overwrite||e.clobber||!1,{srcStat:r,isChangingCase:n=!1}=await zn.checkPaths(s,t,"move",e);await zn.checkParentPaths(s,r,t,"move");let o=$n.dirname(t);return $n.parse(o).root!==o&&await Qh(o),tl(s,t,i,n)}async function tl(s,t,e,i){if(!i){if(e)await Gn(t);else if(await Zh(t))throw new Error("dest already exists.")}try{await Jh.rename(s,t)}catch(r){if(r.code!=="EXDEV")throw r;await el(s,t,e)}}async function el(s,t,e){return await Vh(s,t,{overwrite:e,errorOnExist:!0,preserveTimestamps:!0}),Gn(s)}Hn.exports=Xh});var Zn=x((Dd,Qn)=>{"use strict";p();var Jn=Yt(),Ki=M("path"),il=Ze().copySync,Vn=ve().removeSync,sl=yt().mkdirpSync,Yn=Lt();function rl(s,t,e){e=e||{};let i=e.overwrite||e.clobber||!1,{srcStat:r,isChangingCase:n=!1}=Yn.checkPathsSync(s,t,"move",e);return Yn.checkParentPathsSync(s,r,t,"move"),nl(t)||sl(Ki.dirname(t)),ol(s,t,i,n)}function nl(s){let t=Ki.dirname(s);return Ki.parse(t).root===t}function ol(s,t,e,i){if(i)return Hi(s,t,e);if(e)return Vn(t),Hi(s,t,e);if(Jn.existsSync(t))throw new Error("dest already exists.");return Hi(s,t,e)}function Hi(s,t,e){try{Jn.renameSync(s,t)}catch(i){if(i.code!=="EXDEV")throw i;return al(s,t,e)}}function al(s,t,e){return il(s,t,{overwrite:e,errorOnExist:!0,preserveTimestamps:!0}),Vn(s)}Qn.exports=rl});var to=x((Id,Xn)=>{"use strict";p();var cl=W().fromPromise;Xn.exports={move:cl(Kn()),moveSync:Zn()}});var io=x((Md,eo)=>{"use strict";p();eo.exports={...tt(),...Ze(),...Xr(),...Tn(),...Un(),...yt(),...to(),...ii(),...Ft(),...ve()}});var es=x(Ce=>{p();(function(s,t){"use strict";typeof Ce=="object"?(s.slip=Ce,t(Ce)):typeof define=="function"&&define.amd?define(["exports"],function(e){return s.slip=e,s.slip,t(e)}):(s.slip={},t(s.slip))})(Ce,function(s){"use strict";var t=s;t.END=192,t.ESC=219,t.ESC_END=220,t.ESC_ESC=221,t.byteArray=function(i,r,n){return i instanceof ArrayBuffer?new Uint8Array(i,r,n):i},t.expandByteArray=function(i){var r=new Uint8Array(i.length*2);return r.set(i),r},t.sliceByteArray=function(i,r,n){var o=i.buffer.slice?i.buffer.slice(r,n):i.subarray(r,n);return new Uint8Array(o)},t.encode=function(i,r){r=r||{},r.bufferPadding=r.bufferPadding||4,i=t.byteArray(i,r.offset,r.byteLength);var n=i.length+r.bufferPadding+3&-4,o=new Uint8Array(n),a=1;o[0]=t.END;for(var c=0;c<i.length;c++){a>o.length-3&&(o=t.expandByteArray(o));var l=i[c];l===t.END?(o[a++]=t.ESC,l=t.ESC_END):l===t.ESC&&(o[a++]=t.ESC,l=t.ESC_ESC),o[a++]=l}return o[a]=t.END,t.sliceByteArray(o,0,a+1)},t.Decoder=function(i){i=typeof i!="function"?i||{}:{onMessage:i},this.maxMessageSize=i.maxMessageSize||10485760,this.bufferSize=i.bufferSize||1024,this.msgBuffer=new Uint8Array(this.bufferSize),this.msgBufferIdx=0,this.onMessage=i.onMessage,this.onError=i.onError,this.escape=!1};var e=t.Decoder.prototype;return e.decode=function(i){i=t.byteArray(i);for(var r,n=0;n<i.length;n++){var o=i[n];if(this.escape)o===t.ESC_ESC?o=t.ESC:o===t.ESC_END&&(o=t.END);else{if(o===t.ESC){this.escape=!0;continue}if(o===t.END){r=this.handleEnd();continue}}var a=this.addByte(o);a||this.handleMessageMaxError()}return r},e.handleMessageMaxError=function(){this.onError&&this.onError(this.msgBuffer.subarray(0),"The message is too large; the maximum message size is "+this.maxMessageSize/1024+"KB. Use a larger maxMessageSize if necessary."),this.msgBufferIdx=0,this.escape=!1},e.addByte=function(i){return this.msgBufferIdx>this.msgBuffer.length-1&&(this.msgBuffer=t.expandByteArray(this.msgBuffer)),this.msgBuffer[this.msgBufferIdx++]=i,this.escape=!1,this.msgBuffer.length<this.maxMessageSize},e.handleEnd=function(){if(this.msgBufferIdx!==0){var i=t.sliceByteArray(this.msgBuffer,0,this.msgBufferIdx);return this.onMessage&&this.onMessage(i),this.msgBufferIdx=0,i}},t})});p();import{writeFile as Bl}from"fs/promises";import jl from"path";p();p();p();p();var Ps=Oe(bs(),1);p();var ee=s=>{if(typeof s!="string")throw new TypeError("invalid pattern");if(s.length>65536)throw new TypeError("pattern is too long")};p();p();var Wo={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},ie=s=>s.replace(/[[\]\\-]/g,"\\$&"),Uo=s=>s.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),vs=s=>s.join(""),Es=(s,t)=>{let e=t;if(s.charAt(e)!=="[")throw new Error("not in a brace expression");let i=[],r=[],n=e+1,o=!1,a=!1,c=!1,l=!1,h=e,u="";t:for(;n<s.length;){let m=s.charAt(n);if((m==="!"||m==="^")&&n===e+1){l=!0,n++;continue}if(m==="]"&&o&&!c){h=n+1;break}if(o=!0,m==="\\"&&!c){c=!0,n++;continue}if(m==="["&&!c){for(let[w,[g,b,v]]of Object.entries(Wo))if(s.startsWith(w,n)){if(u)return["$.",!1,s.length-e,!0];n+=w.length,v?r.push(g):i.push(g),a=a||b;continue t}}if(c=!1,u){m>u?i.push(ie(u)+"-"+ie(m)):m===u&&i.push(ie(m)),u="",n++;continue}if(s.startsWith("-]",n+1)){i.push(ie(m+"-")),n+=2;continue}if(s.startsWith("-",n+1)){u=m,n+=2;continue}i.push(ie(m)),n++}if(h<n)return["",!1,0,!1];if(!i.length&&!r.length)return["$.",!1,s.length-e,!0];if(r.length===0&&i.length===1&&/^\\?.$/.test(i[0])&&!l){let m=i[0].length===2?i[0].slice(-1):i[0];return[Uo(m),!1,h-e,!1]}let f="["+(l?"^":"")+vs(i)+"]",d="["+(l?"":"^")+vs(r)+"]";return[i.length&&r.length?"("+f+"|"+d+")":i.length?f:d,a,h-e,!0]};p();var ft=(s,{windowsPathsNoEscape:t=!1}={})=>t?s.replace(/\[([^\/\\])\]/g,"$1"):s.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1");var $o=new Set(["!","?","+","*","@"]),xs=s=>$o.has(s),zo="(?!(?:^|/)\\.\\.?(?:$|/))",Pe="(?!\\.)",Go=new Set(["[","."]),Ho=new Set(["..","."]),Ko=new Set("().*{}+?[]^$\\!"),Yo=s=>s.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),yi="[^/]",ks=yi+"*?",Cs=yi+"+?",Mt=class s{type;#t;#e;#n=!1;#s=[];#o;#b;#h;#u=!1;#a;#c;#r=!1;constructor(t,e,i={}){this.type=t,t&&(this.#e=!0),this.#o=e,this.#t=this.#o?this.#o.#t:this,this.#a=this.#t===this?i:this.#t.#a,this.#h=this.#t===this?[]:this.#t.#h,t==="!"&&!this.#t.#u&&this.#h.push(this),this.#b=this.#o?this.#o.#s.length:0}get hasMagic(){if(this.#e!==void 0)return this.#e;for(let t of this.#s)if(typeof t!="string"&&(t.type||t.hasMagic))return this.#e=!0;return this.#e}toString(){return this.#c!==void 0?this.#c:this.type?this.#c=this.type+"("+this.#s.map(t=>String(t)).join("|")+")":this.#c=this.#s.map(t=>String(t)).join("")}#y(){if(this!==this.#t)throw new Error("should only call on root");if(this.#u)return this;this.toString(),this.#u=!0;let t;for(;t=this.#h.pop();){if(t.type!=="!")continue;let e=t,i=e.#o;for(;i;){for(let r=e.#b+1;!i.type&&r<i.#s.length;r++)for(let n of t.#s){if(typeof n=="string")throw new Error("string part in extglob AST??");n.copyIn(i.#s[r])}e=i,i=e.#o}}return this}push(...t){for(let e of t)if(e!==""){if(typeof e!="string"&&!(e instanceof s&&e.#o===this))throw new Error("invalid part: "+e);this.#s.push(e)}}toJSON(){let t=this.type===null?this.#s.slice().map(e=>typeof e=="string"?e:e.toJSON()):[this.type,...this.#s.map(e=>e.toJSON())];return this.isStart()&&!this.type&&t.unshift([]),this.isEnd()&&(this===this.#t||this.#t.#u&&this.#o?.type==="!")&&t.push({}),t}isStart(){if(this.#t===this)return!0;if(!this.#o?.isStart())return!1;if(this.#b===0)return!0;let t=this.#o;for(let e=0;e<this.#b;e++){let i=t.#s[e];if(!(i instanceof s&&i.type==="!"))return!1}return!0}isEnd(){if(this.#t===this||this.#o?.type==="!")return!0;if(!this.#o?.isEnd())return!1;if(!this.type)return this.#o?.isEnd();let t=this.#o?this.#o.#s.length:0;return this.#b===t-1}copyIn(t){typeof t=="string"?this.push(t):this.push(t.clone(this))}clone(t){let e=new s(this.type,t);for(let i of this.#s)e.copyIn(i);return e}static#g(t,e,i,r){let n=!1,o=!1,a=-1,c=!1;if(e.type===null){let d=i,y="";for(;d<t.length;){let m=t.charAt(d++);if(n||m==="\\"){n=!n,y+=m;continue}if(o){d===a+1?(m==="^"||m==="!")&&(c=!0):m==="]"&&!(d===a+2&&c)&&(o=!1),y+=m;continue}else if(m==="["){o=!0,a=d,c=!1,y+=m;continue}if(!r.noext&&xs(m)&&t.charAt(d)==="("){e.push(y),y="";let w=new s(m,e);d=s.#g(t,w,d,r),e.push(w);continue}y+=m}return e.push(y),d}let l=i+1,h=new s(null,e),u=[],f="";for(;l<t.length;){let d=t.charAt(l++);if(n||d==="\\"){n=!n,f+=d;continue}if(o){l===a+1?(d==="^"||d==="!")&&(c=!0):d==="]"&&!(l===a+2&&c)&&(o=!1),f+=d;continue}else if(d==="["){o=!0,a=l,c=!1,f+=d;continue}if(xs(d)&&t.charAt(l)==="("){h.push(f),f="";let y=new s(d,h);h.push(y),l=s.#g(t,y,l,r);continue}if(d==="|"){h.push(f),f="",u.push(h),h=new s(null,e);continue}if(d===")")return f===""&&e.#s.length===0&&(e.#r=!0),h.push(f),f="",e.push(...u,h),l;f+=d}return e.type=null,e.#e=void 0,e.#s=[t.substring(i-1)],l}static fromGlob(t,e={}){let i=new s(null,void 0,e);return s.#g(t,i,0,e),i}toMMPattern(){if(this!==this.#t)return this.#t.toMMPattern();let t=this.toString(),[e,i,r,n]=this.toRegExpSource();if(!(r||this.#e||this.#a.nocase&&!this.#a.nocaseMagicOnly&&t.toUpperCase()!==t.toLowerCase()))return i;let a=(this.#a.nocase?"i":"")+(n?"u":"");return Object.assign(new RegExp(`^${e}$`,a),{_src:e,_glob:t})}get options(){return this.#a}toRegExpSource(t){let e=t??!!this.#a.dot;if(this.#t===this&&this.#y(),!this.type){let c=this.isStart()&&this.isEnd(),l=this.#s.map(d=>{let[y,m,w,g]=typeof d=="string"?s.#f(d,this.#e,c):d.toRegExpSource(t);return this.#e=this.#e||w,this.#n=this.#n||g,y}).join(""),h="";if(this.isStart()&&typeof this.#s[0]=="string"&&!(this.#s.length===1&&Ho.has(this.#s[0]))){let y=Go,m=e&&y.has(l.charAt(0))||l.startsWith("\\.")&&y.has(l.charAt(2))||l.startsWith("\\.\\.")&&y.has(l.charAt(4)),w=!e&&!t&&y.has(l.charAt(0));h=m?zo:w?Pe:""}let u="";return this.isEnd()&&this.#t.#u&&this.#o?.type==="!"&&(u="(?:$|\\/)"),[h+l+u,ft(l),this.#e=!!this.#e,this.#n]}let i=this.type==="*"||this.type==="+",r=this.type==="!"?"(?:(?!(?:":"(?:",n=this.#d(e);if(this.isStart()&&this.isEnd()&&!n&&this.type!=="!"){let c=this.toString();return this.#s=[c],this.type=null,this.#e=void 0,[c,ft(this.toString()),!1,!1]}let o=!i||t||e||!Pe?"":this.#d(!0);o===n&&(o=""),o&&(n=`(?:${n})(?:${o})*?`);let a="";if(this.type==="!"&&this.#r)a=(this.isStart()&&!e?Pe:"")+Cs;else{let c=this.type==="!"?"))"+(this.isStart()&&!e&&!t?Pe:"")+ks+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&o?")":this.type==="*"&&o?")?":`)${this.type}`;a=r+n+c}return[a,ft(n),this.#e=!!this.#e,this.#n]}#d(t){return this.#s.map(e=>{if(typeof e=="string")throw new Error("string type in extglob ast??");let[i,r,n,o]=e.toRegExpSource(t);return this.#n=this.#n||o,i}).filter(e=>!(this.isStart()&&this.isEnd())||!!e).join("|")}static#f(t,e,i=!1){let r=!1,n="",o=!1;for(let a=0;a<t.length;a++){let c=t.charAt(a);if(r){r=!1,n+=(Ko.has(c)?"\\":"")+c;continue}if(c==="\\"){a===t.length-1?n+="\\\\":r=!0;continue}if(c==="["){let[l,h,u,f]=Es(t,a);if(u){n+=l,o=o||h,a+=u-1,e=e||f;continue}}if(c==="*"){i&&t==="*"?n+=Cs:n+=ks,e=!0;continue}if(c==="?"){n+=yi,e=!0;continue}n+=Yo(c)}return[n,ft(t),!!e,o]}};p();var Bt=(s,{windowsPathsNoEscape:t=!1}={})=>t?s.replace(/[?*()[\]]/g,"[$&]"):s.replace(/[?*()[\]\\]/g,"\\$&");var Q=(s,t,e={})=>(ee(t),!e.nocomment&&t.charAt(0)==="#"?!1:new rt(t,e).match(s)),Jo=/^\*+([^+@!?\*\[\(]*)$/,Vo=s=>t=>!t.startsWith(".")&&t.endsWith(s),Qo=s=>t=>t.endsWith(s),Zo=s=>(s=s.toLowerCase(),t=>!t.startsWith(".")&&t.toLowerCase().endsWith(s)),Xo=s=>(s=s.toLowerCase(),t=>t.toLowerCase().endsWith(s)),ta=/^\*+\.\*+$/,ea=s=>!s.startsWith(".")&&s.includes("."),ia=s=>s!=="."&&s!==".."&&s.includes("."),sa=/^\.\*+$/,ra=s=>s!=="."&&s!==".."&&s.startsWith("."),na=/^\*+$/,oa=s=>s.length!==0&&!s.startsWith("."),aa=s=>s.length!==0&&s!=="."&&s!=="..",ca=/^\?+([^+@!?\*\[\(]*)?$/,ha=([s,t=""])=>{let e=Fs([s]);return t?(t=t.toLowerCase(),i=>e(i)&&i.toLowerCase().endsWith(t)):e},la=([s,t=""])=>{let e=As([s]);return t?(t=t.toLowerCase(),i=>e(i)&&i.toLowerCase().endsWith(t)):e},ua=([s,t=""])=>{let e=As([s]);return t?i=>e(i)&&i.endsWith(t):e},fa=([s,t=""])=>{let e=Fs([s]);return t?i=>e(i)&&i.endsWith(t):e},Fs=([s])=>{let t=s.length;return e=>e.length===t&&!e.startsWith(".")},As=([s])=>{let t=s.length;return e=>e.length===t&&e!=="."&&e!==".."},Ns=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",Ts={win32:{sep:"\\"},posix:{sep:"/"}},da=Ns==="win32"?Ts.win32.sep:Ts.posix.sep;Q.sep=da;var H=Symbol("globstar **");Q.GLOBSTAR=H;var pa="[^/]",ma=pa+"*?",ya="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",ga="(?:(?!(?:\\/|^)\\.).)*?",wa=(s,t={})=>e=>Q(e,s,t);Q.filter=wa;var at=(s,t={})=>Object.assign({},s,t),Sa=s=>{if(!s||typeof s!="object"||!Object.keys(s).length)return Q;let t=Q;return Object.assign((i,r,n={})=>t(i,r,at(s,n)),{Minimatch:class extends t.Minimatch{constructor(r,n={}){super(r,at(s,n))}static defaults(r){return t.defaults(at(s,r)).Minimatch}},AST:class extends t.AST{constructor(r,n,o={}){super(r,n,at(s,o))}static fromGlob(r,n={}){return t.AST.fromGlob(r,at(s,n))}},unescape:(i,r={})=>t.unescape(i,at(s,r)),escape:(i,r={})=>t.escape(i,at(s,r)),filter:(i,r={})=>t.filter(i,at(s,r)),defaults:i=>t.defaults(at(s,i)),makeRe:(i,r={})=>t.makeRe(i,at(s,r)),braceExpand:(i,r={})=>t.braceExpand(i,at(s,r)),match:(i,r,n={})=>t.match(i,r,at(s,n)),sep:t.sep,GLOBSTAR:H})};Q.defaults=Sa;var Rs=(s,t={})=>(ee(s),t.nobrace||!/\{(?:(?!\{).)*\}/.test(s)?[s]:(0,Ps.default)(s));Q.braceExpand=Rs;var ba=(s,t={})=>new rt(s,t).makeRe();Q.makeRe=ba;var va=(s,t,e={})=>{let i=new rt(t,e);return s=s.filter(r=>i.match(r)),i.options.nonull&&!s.length&&s.push(t),s};Q.match=va;var Os=/[?*]|[+@!]\(.*?\)|\[|\]/,Ea=s=>s.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),rt=class{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(t,e={}){ee(t),e=e||{},this.options=e,this.pattern=t,this.platform=e.platform||Ns,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!e.windowsPathsNoEscape||e.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!e.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!e.nonegate,this.comment=!1,this.empty=!1,this.partial=!!e.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=e.windowsNoMagicRoot!==void 0?e.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let t of this.set)for(let e of t)if(typeof e!="string")return!0;return!1}debug(...t){}make(){let t=this.pattern,e=this.options;if(!e.nocomment&&t.charAt(0)==="#"){this.comment=!0;return}if(!t){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],e.debug&&(this.debug=(...n)=>console.error(...n)),this.debug(this.pattern,this.globSet);let i=this.globSet.map(n=>this.slashSplit(n));this.globParts=this.preprocess(i),this.debug(this.pattern,this.globParts);let r=this.globParts.map((n,o,a)=>{if(this.isWindows&&this.windowsNoMagicRoot){let c=n[0]===""&&n[1]===""&&(n[2]==="?"||!Os.test(n[2]))&&!Os.test(n[3]),l=/^[a-z]:/i.test(n[0]);if(c)return[...n.slice(0,4),...n.slice(4).map(h=>this.parse(h))];if(l)return[n[0],...n.slice(1).map(h=>this.parse(h))]}return n.map(c=>this.parse(c))});if(this.debug(this.pattern,r),this.set=r.filter(n=>n.indexOf(!1)===-1),this.isWindows)for(let n=0;n<this.set.length;n++){let o=this.set[n];o[0]===""&&o[1]===""&&this.globParts[n][2]==="?"&&typeof o[3]=="string"&&/^[a-z]:$/i.test(o[3])&&(o[2]="?")}this.debug(this.pattern,this.set)}preprocess(t){if(this.options.noglobstar)for(let i=0;i<t.length;i++)for(let r=0;r<t[i].length;r++)t[i][r]==="**"&&(t[i][r]="*");let{optimizationLevel:e=1}=this.options;return e>=2?(t=this.firstPhasePreProcess(t),t=this.secondPhasePreProcess(t)):e>=1?t=this.levelOneOptimize(t):t=this.adjascentGlobstarOptimize(t),t}adjascentGlobstarOptimize(t){return t.map(e=>{let i=-1;for(;(i=e.indexOf("**",i+1))!==-1;){let r=i;for(;e[r+1]==="**";)r++;r!==i&&e.splice(i,r-i)}return e})}levelOneOptimize(t){return t.map(e=>(e=e.reduce((i,r)=>{let n=i[i.length-1];return r==="**"&&n==="**"?i:r===".."&&n&&n!==".."&&n!=="."&&n!=="**"?(i.pop(),i):(i.push(r),i)},[]),e.length===0?[""]:e))}levelTwoFileOptimize(t){Array.isArray(t)||(t=this.slashSplit(t));let e=!1;do{if(e=!1,!this.preserveMultipleSlashes){for(let r=1;r<t.length-1;r++){let n=t[r];r===1&&n===""&&t[0]===""||(n==="."||n==="")&&(e=!0,t.splice(r,1),r--)}t[0]==="."&&t.length===2&&(t[1]==="."||t[1]==="")&&(e=!0,t.pop())}let i=0;for(;(i=t.indexOf("..",i+1))!==-1;){let r=t[i-1];r&&r!=="."&&r!==".."&&r!=="**"&&(e=!0,t.splice(i-1,2),i-=2)}}while(e);return t.length===0?[""]:t}firstPhasePreProcess(t){let e=!1;do{e=!1;for(let i of t){let r=-1;for(;(r=i.indexOf("**",r+1))!==-1;){let o=r;for(;i[o+1]==="**";)o++;o>r&&i.splice(r+1,o-r);let a=i[r+1],c=i[r+2],l=i[r+3];if(a!==".."||!c||c==="."||c===".."||!l||l==="."||l==="..")continue;e=!0,i.splice(r,1);let h=i.slice(0);h[r]="**",t.push(h),r--}if(!this.preserveMultipleSlashes){for(let o=1;o<i.length-1;o++){let a=i[o];o===1&&a===""&&i[0]===""||(a==="."||a==="")&&(e=!0,i.splice(o,1),o--)}i[0]==="."&&i.length===2&&(i[1]==="."||i[1]==="")&&(e=!0,i.pop())}let n=0;for(;(n=i.indexOf("..",n+1))!==-1;){let o=i[n-1];if(o&&o!=="."&&o!==".."&&o!=="**"){e=!0;let c=n===1&&i[n+1]==="**"?["."]:[];i.splice(n-1,2,...c),i.length===0&&i.push(""),n-=2}}}}while(e);return t}secondPhasePreProcess(t){for(let e=0;e<t.length-1;e++)for(let i=e+1;i<t.length;i++){let r=this.partsMatch(t[e],t[i],!this.preserveMultipleSlashes);if(r){t[e]=[],t[i]=r;break}}return t.filter(e=>e.length)}partsMatch(t,e,i=!1){let r=0,n=0,o=[],a="";for(;r<t.length&&n<e.length;)if(t[r]===e[n])o.push(a==="b"?e[n]:t[r]),r++,n++;else if(i&&t[r]==="**"&&e[n]===t[r+1])o.push(t[r]),r++;else if(i&&e[n]==="**"&&t[r]===e[n+1])o.push(e[n]),n++;else if(t[r]==="*"&&e[n]&&(this.options.dot||!e[n].startsWith("."))&&e[n]!=="**"){if(a==="b")return!1;a="a",o.push(t[r]),r++,n++}else if(e[n]==="*"&&t[r]&&(this.options.dot||!t[r].startsWith("."))&&t[r]!=="**"){if(a==="a")return!1;a="b",o.push(e[n]),r++,n++}else return!1;return t.length===e.length&&o}parseNegate(){if(this.nonegate)return;let t=this.pattern,e=!1,i=0;for(let r=0;r<t.length&&t.charAt(r)==="!";r++)e=!e,i++;i&&(this.pattern=t.slice(i)),this.negate=e}matchOne(t,e,i=!1){let r=this.options;if(this.isWindows){let m=typeof t[0]=="string"&&/^[a-z]:$/i.test(t[0]),w=!m&&t[0]===""&&t[1]===""&&t[2]==="?"&&/^[a-z]:$/i.test(t[3]),g=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),b=!g&&e[0]===""&&e[1]===""&&e[2]==="?"&&typeof e[3]=="string"&&/^[a-z]:$/i.test(e[3]),v=w?3:m?0:void 0,E=b?3:g?0:void 0;if(typeof v=="number"&&typeof E=="number"){let[T,_]=[t[v],e[E]];T.toLowerCase()===_.toLowerCase()&&(e[E]=T,E>v?e=e.slice(E):v>E&&(t=t.slice(v)))}}let{optimizationLevel:n=1}=this.options;n>=2&&(t=this.levelTwoFileOptimize(t)),this.debug("matchOne",this,{file:t,pattern:e}),this.debug("matchOne",t.length,e.length);for(var o=0,a=0,c=t.length,l=e.length;o<c&&a<l;o++,a++){this.debug("matchOne loop");var h=e[a],u=t[o];if(this.debug(e,h,u),h===!1)return!1;if(h===H){this.debug("GLOBSTAR",[e,h,u]);var f=o,d=a+1;if(d===l){for(this.debug("** at the end");o<c;o++)if(t[o]==="."||t[o]===".."||!r.dot&&t[o].charAt(0)===".")return!1;return!0}for(;f<c;){var y=t[f];if(this.debug(`
globstar while`,t,f,e,d,y),this.matchOne(t.slice(f),e.slice(d),i))return this.debug("globstar found match!",f,c,y),!0;if(y==="."||y===".."||!r.dot&&y.charAt(0)==="."){this.debug("dot detected!",t,f,e,d);break}this.debug("globstar swallow a segment, and continue"),f++}return!!(i&&(this.debug(`
>>> no match, partial?`,t,f,e,d),f===c))}let m;if(typeof h=="string"?(m=u===h,this.debug("string match",h,u,m)):(m=h.test(u),this.debug("pattern match",h,u,m)),!m)return!1}if(o===c&&a===l)return!0;if(o===c)return i;if(a===l)return o===c-1&&t[o]==="";throw new Error("wtf?")}braceExpand(){return Rs(this.pattern,this.options)}parse(t){ee(t);let e=this.options;if(t==="**")return H;if(t==="")return"";let i,r=null;(i=t.match(na))?r=e.dot?aa:oa:(i=t.match(Jo))?r=(e.nocase?e.dot?Xo:Zo:e.dot?Qo:Vo)(i[1]):(i=t.match(ca))?r=(e.nocase?e.dot?la:ha:e.dot?ua:fa)(i):(i=t.match(ta))?r=e.dot?ia:ea:(i=t.match(sa))&&(r=ra);let n=Mt.fromGlob(t,this.options).toMMPattern();return r&&typeof n=="object"&&Reflect.defineProperty(n,"test",{value:r}),n}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let t=this.set;if(!t.length)return this.regexp=!1,this.regexp;let e=this.options,i=e.noglobstar?ma:e.dot?ya:ga,r=new Set(e.nocase?["i"]:[]),n=t.map(c=>{let l=c.map(h=>{if(h instanceof RegExp)for(let u of h.flags.split(""))r.add(u);return typeof h=="string"?Ea(h):h===H?H:h._src});return l.forEach((h,u)=>{let f=l[u+1],d=l[u-1];h!==H||d===H||(d===void 0?f!==void 0&&f!==H?l[u+1]="(?:\\/|"+i+"\\/)?"+f:l[u]=i:f===void 0?l[u-1]=d+"(?:\\/|"+i+")?":f!==H&&(l[u-1]=d+"(?:\\/|\\/"+i+"\\/)"+f,l[u+1]=H))}),l.filter(h=>h!==H).join("/")}).join("|"),[o,a]=t.length>1?["(?:",")"]:["",""];n="^"+o+n+a+"$",this.negate&&(n="^(?!"+n+").+$");try{this.regexp=new RegExp(n,[...r].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(t){return this.preserveMultipleSlashes?t.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(t)?["",...t.split(/\/+/)]:t.split(/\/+/)}match(t,e=this.partial){if(this.debug("match",t,this.pattern),this.comment)return!1;if(this.empty)return t==="";if(t==="/"&&e)return!0;let i=this.options;this.isWindows&&(t=t.split("\\").join("/"));let r=this.slashSplit(t);this.debug(this.pattern,"split",r);let n=this.set;this.debug(this.pattern,"set",n);let o=r[r.length-1];if(!o)for(let a=r.length-2;!o&&a>=0;a--)o=r[a];for(let a=0;a<n.length;a++){let c=n[a],l=r;if(i.matchBase&&c.length===1&&(l=[o]),this.matchOne(l,c,e))return i.flipNegate?!0:!this.negate}return i.flipNegate?!1:this.negate}static defaults(t){return Q.defaults(t).Minimatch}};Q.AST=Mt;Q.Minimatch=rt;Q.escape=Bt;Q.unescape=ft;p();import{fileURLToPath as tc}from"node:url";p();p();var jt=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,_s=new Set,gi=typeof process=="object"&&process?process:{},Is=(s,t,e,i)=>{typeof gi.emitWarning=="function"?gi.emitWarning(s,t,e,i):console.error(`[${e}] ${t}: ${s}`)},Fe=globalThis.AbortController,Ds=globalThis.AbortSignal;if(typeof Fe>"u"){Ds=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(i,r){this._onabort.push(r)}},Fe=class{constructor(){t()}signal=new Ds;abort(i){if(!this.signal.aborted){this.signal.reason=i,this.signal.aborted=!0;for(let r of this.signal._onabort)r(i);this.signal.onabort?.(i)}}};let s=gi.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",t=()=>{s&&(s=!1,Is("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",t))}}var xa=s=>!_s.has(s),Eu=Symbol("type"),Ct=s=>s&&s===Math.floor(s)&&s>0&&isFinite(s),Ls=s=>Ct(s)?s<=Math.pow(2,8)?Uint8Array:s<=Math.pow(2,16)?Uint16Array:s<=Math.pow(2,32)?Uint32Array:s<=Number.MAX_SAFE_INTEGER?qt:null:null,qt=class extends Array{constructor(t){super(t),this.fill(0)}},wi=class s{heap;length;static#t=!1;static create(t){let e=Ls(t);if(!e)return[];s.#t=!0;let i=new s(t,e);return s.#t=!1,i}constructor(t,e){if(!s.#t)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new e(t),this.length=0}push(t){this.heap[this.length++]=t}pop(){return this.heap[--this.length]}},se=class s{#t;#e;#n;#s;#o;#b;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#h;#u;#a;#c;#r;#y;#g;#d;#f;#x;#m;#k;#C;#S;#v;#E;#p;static unsafeExposeInternals(t){return{starts:t.#C,ttls:t.#S,sizes:t.#k,keyMap:t.#a,keyList:t.#c,valList:t.#r,next:t.#y,prev:t.#g,get head(){return t.#d},get tail(){return t.#f},free:t.#x,isBackgroundFetch:e=>t.#l(e),backgroundFetch:(e,i,r,n)=>t.#B(e,i,r,n),moveToTail:e=>t.#q(e),indexes:e=>t.#O(e),rindexes:e=>t.#P(e),isStale:e=>t.#w(e)}}get max(){return this.#t}get maxSize(){return this.#e}get calculatedSize(){return this.#u}get size(){return this.#h}get fetchMethod(){return this.#o}get memoMethod(){return this.#b}get dispose(){return this.#n}get disposeAfter(){return this.#s}constructor(t){let{max:e=0,ttl:i,ttlResolution:r=1,ttlAutopurge:n,updateAgeOnGet:o,updateAgeOnHas:a,allowStale:c,dispose:l,disposeAfter:h,noDisposeOnSet:u,noUpdateTTL:f,maxSize:d=0,maxEntrySize:y=0,sizeCalculation:m,fetchMethod:w,memoMethod:g,noDeleteOnFetchRejection:b,noDeleteOnStaleGet:v,allowStaleOnFetchRejection:E,allowStaleOnFetchAbort:T,ignoreFetchAbort:_}=t;if(e!==0&&!Ct(e))throw new TypeError("max option must be a nonnegative integer");let st=e?Ls(e):Array;if(!st)throw new Error("invalid max value: "+e);if(this.#t=e,this.#e=d,this.maxEntrySize=y||this.#e,this.sizeCalculation=m,this.sizeCalculation){if(!this.#e&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(g!==void 0&&typeof g!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#b=g,w!==void 0&&typeof w!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#o=w,this.#E=!!w,this.#a=new Map,this.#c=new Array(e).fill(void 0),this.#r=new Array(e).fill(void 0),this.#y=new st(e),this.#g=new st(e),this.#d=0,this.#f=0,this.#x=wi.create(e),this.#h=0,this.#u=0,typeof l=="function"&&(this.#n=l),typeof h=="function"?(this.#s=h,this.#m=[]):(this.#s=void 0,this.#m=void 0),this.#v=!!this.#n,this.#p=!!this.#s,this.noDisposeOnSet=!!u,this.noUpdateTTL=!!f,this.noDeleteOnFetchRejection=!!b,this.allowStaleOnFetchRejection=!!E,this.allowStaleOnFetchAbort=!!T,this.ignoreFetchAbort=!!_,this.maxEntrySize!==0){if(this.#e!==0&&!Ct(this.#e))throw new TypeError("maxSize must be a positive integer if specified");if(!Ct(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#A()}if(this.allowStale=!!c,this.noDeleteOnStaleGet=!!v,this.updateAgeOnGet=!!o,this.updateAgeOnHas=!!a,this.ttlResolution=Ct(r)||r===0?r:1,this.ttlAutopurge=!!n,this.ttl=i||0,this.ttl){if(!Ct(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#F()}if(this.#t===0&&this.ttl===0&&this.#e===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#t&&!this.#e){let ut="LRU_CACHE_UNBOUNDED";xa(ut)&&(_s.add(ut),Is("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",ut,s))}}getRemainingTTL(t){return this.#a.has(t)?1/0:0}#F(){let t=new qt(this.#t),e=new qt(this.#t);this.#S=t,this.#C=e,this.#R=(n,o,a=jt.now())=>{if(e[n]=o!==0?a:0,t[n]=o,o!==0&&this.ttlAutopurge){let c=setTimeout(()=>{this.#w(n)&&this.#N(this.#c[n],"expire")},o+1);c.unref&&c.unref()}},this.#T=n=>{e[n]=t[n]!==0?jt.now():0},this.#i=(n,o)=>{if(t[o]){let a=t[o],c=e[o];if(!a||!c)return;n.ttl=a,n.start=c,n.now=i||r();let l=n.now-c;n.remainingTTL=a-l}};let i=0,r=()=>{let n=jt.now();if(this.ttlResolution>0){i=n;let o=setTimeout(()=>i=0,this.ttlResolution);o.unref&&o.unref()}return n};this.getRemainingTTL=n=>{let o=this.#a.get(n);if(o===void 0)return 0;let a=t[o],c=e[o];if(!a||!c)return 1/0;let l=(i||r())-c;return a-l},this.#w=n=>{let o=e[n],a=t[n];return!!a&&!!o&&(i||r())-o>a}}#T=()=>{};#i=()=>{};#R=()=>{};#w=()=>!1;#A(){let t=new qt(this.#t);this.#u=0,this.#k=t,this.#D=e=>{this.#u-=t[e],t[e]=0},this.#I=(e,i,r,n)=>{if(this.#l(i))return 0;if(!Ct(r))if(n){if(typeof n!="function")throw new TypeError("sizeCalculation must be a function");if(r=n(i,e),!Ct(r))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return r},this.#_=(e,i,r)=>{if(t[e]=i,this.#e){let n=this.#e-t[e];for(;this.#u>n;)this.#M(!0)}this.#u+=t[e],r&&(r.entrySize=i,r.totalCalculatedSize=this.#u)}}#D=t=>{};#_=(t,e,i)=>{};#I=(t,e,i,r)=>{if(i||r)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#O({allowStale:t=this.allowStale}={}){if(this.#h)for(let e=this.#f;!(!this.#L(e)||((t||!this.#w(e))&&(yield e),e===this.#d));)e=this.#g[e]}*#P({allowStale:t=this.allowStale}={}){if(this.#h)for(let e=this.#d;!(!this.#L(e)||((t||!this.#w(e))&&(yield e),e===this.#f));)e=this.#y[e]}#L(t){return t!==void 0&&this.#a.get(this.#c[t])===t}*entries(){for(let t of this.#O())this.#r[t]!==void 0&&this.#c[t]!==void 0&&!this.#l(this.#r[t])&&(yield[this.#c[t],this.#r[t]])}*rentries(){for(let t of this.#P())this.#r[t]!==void 0&&this.#c[t]!==void 0&&!this.#l(this.#r[t])&&(yield[this.#c[t],this.#r[t]])}*keys(){for(let t of this.#O()){let e=this.#c[t];e!==void 0&&!this.#l(this.#r[t])&&(yield e)}}*rkeys(){for(let t of this.#P()){let e=this.#c[t];e!==void 0&&!this.#l(this.#r[t])&&(yield e)}}*values(){for(let t of this.#O())this.#r[t]!==void 0&&!this.#l(this.#r[t])&&(yield this.#r[t])}*rvalues(){for(let t of this.#P())this.#r[t]!==void 0&&!this.#l(this.#r[t])&&(yield this.#r[t])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(t,e={}){for(let i of this.#O()){let r=this.#r[i],n=this.#l(r)?r.__staleWhileFetching:r;if(n!==void 0&&t(n,this.#c[i],this))return this.get(this.#c[i],e)}}forEach(t,e=this){for(let i of this.#O()){let r=this.#r[i],n=this.#l(r)?r.__staleWhileFetching:r;n!==void 0&&t.call(e,n,this.#c[i],this)}}rforEach(t,e=this){for(let i of this.#P()){let r=this.#r[i],n=this.#l(r)?r.__staleWhileFetching:r;n!==void 0&&t.call(e,n,this.#c[i],this)}}purgeStale(){let t=!1;for(let e of this.#P({allowStale:!0}))this.#w(e)&&(this.#N(this.#c[e],"expire"),t=!0);return t}info(t){let e=this.#a.get(t);if(e===void 0)return;let i=this.#r[e],r=this.#l(i)?i.__staleWhileFetching:i;if(r===void 0)return;let n={value:r};if(this.#S&&this.#C){let o=this.#S[e],a=this.#C[e];if(o&&a){let c=o-(jt.now()-a);n.ttl=c,n.start=Date.now()}}return this.#k&&(n.size=this.#k[e]),n}dump(){let t=[];for(let e of this.#O({allowStale:!0})){let i=this.#c[e],r=this.#r[e],n=this.#l(r)?r.__staleWhileFetching:r;if(n===void 0||i===void 0)continue;let o={value:n};if(this.#S&&this.#C){o.ttl=this.#S[e];let a=jt.now()-this.#C[e];o.start=Math.floor(Date.now()-a)}this.#k&&(o.size=this.#k[e]),t.unshift([i,o])}return t}load(t){this.clear();for(let[e,i]of t){if(i.start){let r=Date.now()-i.start;i.start=jt.now()-r}this.set(e,i.value,i)}}set(t,e,i={}){if(e===void 0)return this.delete(t),this;let{ttl:r=this.ttl,start:n,noDisposeOnSet:o=this.noDisposeOnSet,sizeCalculation:a=this.sizeCalculation,status:c}=i,{noUpdateTTL:l=this.noUpdateTTL}=i,h=this.#I(t,e,i.size||0,a);if(this.maxEntrySize&&h>this.maxEntrySize)return c&&(c.set="miss",c.maxEntrySizeExceeded=!0),this.#N(t,"set"),this;let u=this.#h===0?void 0:this.#a.get(t);if(u===void 0)u=this.#h===0?this.#f:this.#x.length!==0?this.#x.pop():this.#h===this.#t?this.#M(!1):this.#h,this.#c[u]=t,this.#r[u]=e,this.#a.set(t,u),this.#y[this.#f]=u,this.#g[u]=this.#f,this.#f=u,this.#h++,this.#_(u,h,c),c&&(c.set="add"),l=!1;else{this.#q(u);let f=this.#r[u];if(e!==f){if(this.#E&&this.#l(f)){f.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:d}=f;d!==void 0&&!o&&(this.#v&&this.#n?.(d,t,"set"),this.#p&&this.#m?.push([d,t,"set"]))}else o||(this.#v&&this.#n?.(f,t,"set"),this.#p&&this.#m?.push([f,t,"set"]));if(this.#D(u),this.#_(u,h,c),this.#r[u]=e,c){c.set="replace";let d=f&&this.#l(f)?f.__staleWhileFetching:f;d!==void 0&&(c.oldValue=d)}}else c&&(c.set="update")}if(r!==0&&!this.#S&&this.#F(),this.#S&&(l||this.#R(u,r,n),c&&this.#i(c,u)),!o&&this.#p&&this.#m){let f=this.#m,d;for(;d=f?.shift();)this.#s?.(...d)}return this}pop(){try{for(;this.#h;){let t=this.#r[this.#d];if(this.#M(!0),this.#l(t)){if(t.__staleWhileFetching)return t.__staleWhileFetching}else if(t!==void 0)return t}}finally{if(this.#p&&this.#m){let t=this.#m,e;for(;e=t?.shift();)this.#s?.(...e)}}}#M(t){let e=this.#d,i=this.#c[e],r=this.#r[e];return this.#E&&this.#l(r)?r.__abortController.abort(new Error("evicted")):(this.#v||this.#p)&&(this.#v&&this.#n?.(r,i,"evict"),this.#p&&this.#m?.push([r,i,"evict"])),this.#D(e),t&&(this.#c[e]=void 0,this.#r[e]=void 0,this.#x.push(e)),this.#h===1?(this.#d=this.#f=0,this.#x.length=0):this.#d=this.#y[e],this.#a.delete(i),this.#h--,e}has(t,e={}){let{updateAgeOnHas:i=this.updateAgeOnHas,status:r}=e,n=this.#a.get(t);if(n!==void 0){let o=this.#r[n];if(this.#l(o)&&o.__staleWhileFetching===void 0)return!1;if(this.#w(n))r&&(r.has="stale",this.#i(r,n));else return i&&this.#T(n),r&&(r.has="hit",this.#i(r,n)),!0}else r&&(r.has="miss");return!1}peek(t,e={}){let{allowStale:i=this.allowStale}=e,r=this.#a.get(t);if(r===void 0||!i&&this.#w(r))return;let n=this.#r[r];return this.#l(n)?n.__staleWhileFetching:n}#B(t,e,i,r){let n=e===void 0?void 0:this.#r[e];if(this.#l(n))return n;let o=new Fe,{signal:a}=i;a?.addEventListener("abort",()=>o.abort(a.reason),{signal:o.signal});let c={signal:o.signal,options:i,context:r},l=(m,w=!1)=>{let{aborted:g}=o.signal,b=i.ignoreFetchAbort&&m!==void 0;if(i.status&&(g&&!w?(i.status.fetchAborted=!0,i.status.fetchError=o.signal.reason,b&&(i.status.fetchAbortIgnored=!0)):i.status.fetchResolved=!0),g&&!b&&!w)return u(o.signal.reason);let v=d;return this.#r[e]===d&&(m===void 0?v.__staleWhileFetching?this.#r[e]=v.__staleWhileFetching:this.#N(t,"fetch"):(i.status&&(i.status.fetchUpdated=!0),this.set(t,m,c.options))),m},h=m=>(i.status&&(i.status.fetchRejected=!0,i.status.fetchError=m),u(m)),u=m=>{let{aborted:w}=o.signal,g=w&&i.allowStaleOnFetchAbort,b=g||i.allowStaleOnFetchRejection,v=b||i.noDeleteOnFetchRejection,E=d;if(this.#r[e]===d&&(!v||E.__staleWhileFetching===void 0?this.#N(t,"fetch"):g||(this.#r[e]=E.__staleWhileFetching)),b)return i.status&&E.__staleWhileFetching!==void 0&&(i.status.returnedStale=!0),E.__staleWhileFetching;if(E.__returned===E)throw m},f=(m,w)=>{let g=this.#o?.(t,n,c);g&&g instanceof Promise&&g.then(b=>m(b===void 0?void 0:b),w),o.signal.addEventListener("abort",()=>{(!i.ignoreFetchAbort||i.allowStaleOnFetchAbort)&&(m(void 0),i.allowStaleOnFetchAbort&&(m=b=>l(b,!0)))})};i.status&&(i.status.fetchDispatched=!0);let d=new Promise(f).then(l,h),y=Object.assign(d,{__abortController:o,__staleWhileFetching:n,__returned:void 0});return e===void 0?(this.set(t,y,{...c.options,status:void 0}),e=this.#a.get(t)):this.#r[e]=y,y}#l(t){if(!this.#E)return!1;let e=t;return!!e&&e instanceof Promise&&e.hasOwnProperty("__staleWhileFetching")&&e.__abortController instanceof Fe}async fetch(t,e={}){let{allowStale:i=this.allowStale,updateAgeOnGet:r=this.updateAgeOnGet,noDeleteOnStaleGet:n=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:c=0,sizeCalculation:l=this.sizeCalculation,noUpdateTTL:h=this.noUpdateTTL,noDeleteOnFetchRejection:u=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:f=this.allowStaleOnFetchRejection,ignoreFetchAbort:d=this.ignoreFetchAbort,allowStaleOnFetchAbort:y=this.allowStaleOnFetchAbort,context:m,forceRefresh:w=!1,status:g,signal:b}=e;if(!this.#E)return g&&(g.fetch="get"),this.get(t,{allowStale:i,updateAgeOnGet:r,noDeleteOnStaleGet:n,status:g});let v={allowStale:i,updateAgeOnGet:r,noDeleteOnStaleGet:n,ttl:o,noDisposeOnSet:a,size:c,sizeCalculation:l,noUpdateTTL:h,noDeleteOnFetchRejection:u,allowStaleOnFetchRejection:f,allowStaleOnFetchAbort:y,ignoreFetchAbort:d,status:g,signal:b},E=this.#a.get(t);if(E===void 0){g&&(g.fetch="miss");let T=this.#B(t,E,v,m);return T.__returned=T}else{let T=this.#r[E];if(this.#l(T)){let k=i&&T.__staleWhileFetching!==void 0;return g&&(g.fetch="inflight",k&&(g.returnedStale=!0)),k?T.__staleWhileFetching:T.__returned=T}let _=this.#w(E);if(!w&&!_)return g&&(g.fetch="hit"),this.#q(E),r&&this.#T(E),g&&this.#i(g,E),T;let st=this.#B(t,E,v,m),S=st.__staleWhileFetching!==void 0&&i;return g&&(g.fetch=_?"stale":"refresh",S&&_&&(g.returnedStale=!0)),S?st.__staleWhileFetching:st.__returned=st}}async forceFetch(t,e={}){let i=await this.fetch(t,e);if(i===void 0)throw new Error("fetch() returned undefined");return i}memo(t,e={}){let i=this.#b;if(!i)throw new Error("no memoMethod provided to constructor");let{context:r,forceRefresh:n,...o}=e,a=this.get(t,o);if(!n&&a!==void 0)return a;let c=i(t,a,{options:o,context:r});return this.set(t,c,o),c}get(t,e={}){let{allowStale:i=this.allowStale,updateAgeOnGet:r=this.updateAgeOnGet,noDeleteOnStaleGet:n=this.noDeleteOnStaleGet,status:o}=e,a=this.#a.get(t);if(a!==void 0){let c=this.#r[a],l=this.#l(c);return o&&this.#i(o,a),this.#w(a)?(o&&(o.get="stale"),l?(o&&i&&c.__staleWhileFetching!==void 0&&(o.returnedStale=!0),i?c.__staleWhileFetching:void 0):(n||this.#N(t,"expire"),o&&i&&(o.returnedStale=!0),i?c:void 0)):(o&&(o.get="hit"),l?c.__staleWhileFetching:(this.#q(a),r&&this.#T(a),c))}else o&&(o.get="miss")}#j(t,e){this.#g[e]=t,this.#y[t]=e}#q(t){t!==this.#f&&(t===this.#d?this.#d=this.#y[t]:this.#j(this.#g[t],this.#y[t]),this.#j(this.#f,t),this.#f=t)}delete(t){return this.#N(t,"delete")}#N(t,e){let i=!1;if(this.#h!==0){let r=this.#a.get(t);if(r!==void 0)if(i=!0,this.#h===1)this.#W(e);else{this.#D(r);let n=this.#r[r];if(this.#l(n)?n.__abortController.abort(new Error("deleted")):(this.#v||this.#p)&&(this.#v&&this.#n?.(n,t,e),this.#p&&this.#m?.push([n,t,e])),this.#a.delete(t),this.#c[r]=void 0,this.#r[r]=void 0,r===this.#f)this.#f=this.#g[r];else if(r===this.#d)this.#d=this.#y[r];else{let o=this.#g[r];this.#y[o]=this.#y[r];let a=this.#y[r];this.#g[a]=this.#g[r]}this.#h--,this.#x.push(r)}}if(this.#p&&this.#m?.length){let r=this.#m,n;for(;n=r?.shift();)this.#s?.(...n)}return i}clear(){return this.#W("delete")}#W(t){for(let e of this.#P({allowStale:!0})){let i=this.#r[e];if(this.#l(i))i.__abortController.abort(new Error("deleted"));else{let r=this.#c[e];this.#v&&this.#n?.(i,r,t),this.#p&&this.#m?.push([i,r,t])}}if(this.#a.clear(),this.#r.fill(void 0),this.#c.fill(void 0),this.#S&&this.#C&&(this.#S.fill(0),this.#C.fill(0)),this.#k&&this.#k.fill(0),this.#d=0,this.#f=0,this.#x.length=0,this.#u=0,this.#h=0,this.#p&&this.#m){let e=this.#m,i;for(;i=e?.shift();)this.#s?.(...i)}}};import{posix as _a,win32 as Pi}from"node:path";import{fileURLToPath as Ia}from"node:url";import{lstatSync as La,readdir as Ma,readdirSync as Ba,readlinkSync as ja,realpathSync as qa}from"fs";import*as Wa from"node:fs";import{lstat as $a,readdir as za,readlink as Ga,realpath as Ha}from"node:fs/promises";p();import{EventEmitter as Ci}from"node:events";import Ws from"node:stream";import{StringDecoder as ka}from"node:string_decoder";var Ms=typeof process=="object"&&process?process:{stdout:null,stderr:null},Ca=s=>!!s&&typeof s=="object"&&(s instanceof Ot||s instanceof Ws||Ta(s)||Oa(s)),Ta=s=>!!s&&typeof s=="object"&&s instanceof Ci&&typeof s.pipe=="function"&&s.pipe!==Ws.Writable.prototype.pipe,Oa=s=>!!s&&typeof s=="object"&&s instanceof Ci&&typeof s.write=="function"&&typeof s.end=="function",vt=Symbol("EOF"),Et=Symbol("maybeEmitEnd"),Tt=Symbol("emittedEnd"),Ae=Symbol("emittingEnd"),re=Symbol("emittedError"),Ne=Symbol("closed"),Bs=Symbol("read"),Re=Symbol("flush"),js=Symbol("flushChunk"),dt=Symbol("encoding"),Wt=Symbol("decoder"),B=Symbol("flowing"),ne=Symbol("paused"),Ut=Symbol("resume"),j=Symbol("buffer"),Z=Symbol("pipes"),q=Symbol("bufferLength"),Si=Symbol("bufferPush"),De=Symbol("bufferShift"),Y=Symbol("objectMode"),I=Symbol("destroyed"),bi=Symbol("error"),vi=Symbol("emitData"),qs=Symbol("emitEnd"),Ei=Symbol("emitEnd2"),wt=Symbol("async"),xi=Symbol("abort"),_e=Symbol("aborted"),oe=Symbol("signal"),Dt=Symbol("dataListeners"),nt=Symbol("discarded"),ae=s=>Promise.resolve().then(s),Pa=s=>s(),Fa=s=>s==="end"||s==="finish"||s==="prefinish",Aa=s=>s instanceof ArrayBuffer||!!s&&typeof s=="object"&&s.constructor&&s.constructor.name==="ArrayBuffer"&&s.byteLength>=0,Na=s=>!Buffer.isBuffer(s)&&ArrayBuffer.isView(s),Ie=class{src;dest;opts;ondrain;constructor(t,e,i){this.src=t,this.dest=e,this.opts=i,this.ondrain=()=>t[Ut](),this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(t){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},ki=class extends Ie{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(t,e,i){super(t,e,i),this.proxyErrors=r=>e.emit("error",r),t.on("error",this.proxyErrors)}},Ra=s=>!!s.objectMode,Da=s=>!s.objectMode&&!!s.encoding&&s.encoding!=="buffer",Ot=class extends Ci{[B]=!1;[ne]=!1;[Z]=[];[j]=[];[Y];[dt];[wt];[Wt];[vt]=!1;[Tt]=!1;[Ae]=!1;[Ne]=!1;[re]=null;[q]=0;[I]=!1;[oe];[_e]=!1;[Dt]=0;[nt]=!1;writable=!0;readable=!0;constructor(...t){let e=t[0]||{};if(super(),e.objectMode&&typeof e.encoding=="string")throw new TypeError("Encoding and objectMode may not be used together");Ra(e)?(this[Y]=!0,this[dt]=null):Da(e)?(this[dt]=e.encoding,this[Y]=!1):(this[Y]=!1,this[dt]=null),this[wt]=!!e.async,this[Wt]=this[dt]?new ka(this[dt]):null,e&&e.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[j]}),e&&e.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[Z]});let{signal:i}=e;i&&(this[oe]=i,i.aborted?this[xi]():i.addEventListener("abort",()=>this[xi]()))}get bufferLength(){return this[q]}get encoding(){return this[dt]}set encoding(t){throw new Error("Encoding must be set at instantiation time")}setEncoding(t){throw new Error("Encoding must be set at instantiation time")}get objectMode(){return this[Y]}set objectMode(t){throw new Error("objectMode must be set at instantiation time")}get async(){return this[wt]}set async(t){this[wt]=this[wt]||!!t}[xi](){this[_e]=!0,this.emit("abort",this[oe]?.reason),this.destroy(this[oe]?.reason)}get aborted(){return this[_e]}set aborted(t){}write(t,e,i){if(this[_e])return!1;if(this[vt])throw new Error("write after end");if(this[I])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof e=="function"&&(i=e,e="utf8"),e||(e="utf8");let r=this[wt]?ae:Pa;if(!this[Y]&&!Buffer.isBuffer(t)){if(Na(t))t=Buffer.from(t.buffer,t.byteOffset,t.byteLength);else if(Aa(t))t=Buffer.from(t);else if(typeof t!="string")throw new Error("Non-contiguous data written to non-objectMode stream")}return this[Y]?(this[B]&&this[q]!==0&&this[Re](!0),this[B]?this.emit("data",t):this[Si](t),this[q]!==0&&this.emit("readable"),i&&r(i),this[B]):t.length?(typeof t=="string"&&!(e===this[dt]&&!this[Wt]?.lastNeed)&&(t=Buffer.from(t,e)),Buffer.isBuffer(t)&&this[dt]&&(t=this[Wt].write(t)),this[B]&&this[q]!==0&&this[Re](!0),this[B]?this.emit("data",t):this[Si](t),this[q]!==0&&this.emit("readable"),i&&r(i),this[B]):(this[q]!==0&&this.emit("readable"),i&&r(i),this[B])}read(t){if(this[I])return null;if(this[nt]=!1,this[q]===0||t===0||t&&t>this[q])return this[Et](),null;this[Y]&&(t=null),this[j].length>1&&!this[Y]&&(this[j]=[this[dt]?this[j].join(""):Buffer.concat(this[j],this[q])]);let e=this[Bs](t||null,this[j][0]);return this[Et](),e}[Bs](t,e){if(this[Y])this[De]();else{let i=e;t===i.length||t===null?this[De]():typeof i=="string"?(this[j][0]=i.slice(t),e=i.slice(0,t),this[q]-=t):(this[j][0]=i.subarray(t),e=i.subarray(0,t),this[q]-=t)}return this.emit("data",e),!this[j].length&&!this[vt]&&this.emit("drain"),e}end(t,e,i){return typeof t=="function"&&(i=t,t=void 0),typeof e=="function"&&(i=e,e="utf8"),t!==void 0&&this.write(t,e),i&&this.once("end",i),this[vt]=!0,this.writable=!1,(this[B]||!this[ne])&&this[Et](),this}[Ut](){this[I]||(!this[Dt]&&!this[Z].length&&(this[nt]=!0),this[ne]=!1,this[B]=!0,this.emit("resume"),this[j].length?this[Re]():this[vt]?this[Et]():this.emit("drain"))}resume(){return this[Ut]()}pause(){this[B]=!1,this[ne]=!0,this[nt]=!1}get destroyed(){return this[I]}get flowing(){return this[B]}get paused(){return this[ne]}[Si](t){this[Y]?this[q]+=1:this[q]+=t.length,this[j].push(t)}[De](){return this[Y]?this[q]-=1:this[q]-=this[j][0].length,this[j].shift()}[Re](t=!1){do;while(this[js](this[De]())&&this[j].length);!t&&!this[j].length&&!this[vt]&&this.emit("drain")}[js](t){return this.emit("data",t),this[B]}pipe(t,e){if(this[I])return t;this[nt]=!1;let i=this[Tt];return e=e||{},t===Ms.stdout||t===Ms.stderr?e.end=!1:e.end=e.end!==!1,e.proxyErrors=!!e.proxyErrors,i?e.end&&t.end():(this[Z].push(e.proxyErrors?new ki(this,t,e):new Ie(this,t,e)),this[wt]?ae(()=>this[Ut]()):this[Ut]()),t}unpipe(t){let e=this[Z].find(i=>i.dest===t);e&&(this[Z].length===1?(this[B]&&this[Dt]===0&&(this[B]=!1),this[Z]=[]):this[Z].splice(this[Z].indexOf(e),1),e.unpipe())}addListener(t,e){return this.on(t,e)}on(t,e){let i=super.on(t,e);if(t==="data")this[nt]=!1,this[Dt]++,!this[Z].length&&!this[B]&&this[Ut]();else if(t==="readable"&&this[q]!==0)super.emit("readable");else if(Fa(t)&&this[Tt])super.emit(t),this.removeAllListeners(t);else if(t==="error"&&this[re]){let r=e;this[wt]?ae(()=>r.call(this,this[re])):r.call(this,this[re])}return i}removeListener(t,e){return this.off(t,e)}off(t,e){let i=super.off(t,e);return t==="data"&&(this[Dt]=this.listeners("data").length,this[Dt]===0&&!this[nt]&&!this[Z].length&&(this[B]=!1)),i}removeAllListeners(t){let e=super.removeAllListeners(t);return(t==="data"||t===void 0)&&(this[Dt]=0,!this[nt]&&!this[Z].length&&(this[B]=!1)),e}get emittedEnd(){return this[Tt]}[Et](){!this[Ae]&&!this[Tt]&&!this[I]&&this[j].length===0&&this[vt]&&(this[Ae]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[Ne]&&this.emit("close"),this[Ae]=!1)}emit(t,...e){let i=e[0];if(t!=="error"&&t!=="close"&&t!==I&&this[I])return!1;if(t==="data")return!this[Y]&&!i?!1:this[wt]?(ae(()=>this[vi](i)),!0):this[vi](i);if(t==="end")return this[qs]();if(t==="close"){if(this[Ne]=!0,!this[Tt]&&!this[I])return!1;let n=super.emit("close");return this.removeAllListeners("close"),n}else if(t==="error"){this[re]=i,super.emit(bi,i);let n=!this[oe]||this.listeners("error").length?super.emit("error",i):!1;return this[Et](),n}else if(t==="resume"){let n=super.emit("resume");return this[Et](),n}else if(t==="finish"||t==="prefinish"){let n=super.emit(t);return this.removeAllListeners(t),n}let r=super.emit(t,...e);return this[Et](),r}[vi](t){for(let i of this[Z])i.dest.write(t)===!1&&this.pause();let e=this[nt]?!1:super.emit("data",t);return this[Et](),e}[qs](){return this[Tt]?!1:(this[Tt]=!0,this.readable=!1,this[wt]?(ae(()=>this[Ei]()),!0):this[Ei]())}[Ei](){if(this[Wt]){let e=this[Wt].end();if(e){for(let i of this[Z])i.dest.write(e);this[nt]||super.emit("data",e)}}for(let e of this[Z])e.end();let t=super.emit("end");return this.removeAllListeners("end"),t}async collect(){let t=Object.assign([],{dataLength:0});this[Y]||(t.dataLength=0);let e=this.promise();return this.on("data",i=>{t.push(i),this[Y]||(t.dataLength+=i.length)}),await e,t}async concat(){if(this[Y])throw new Error("cannot concat in objectMode");let t=await this.collect();return this[dt]?t.join(""):Buffer.concat(t,t.dataLength)}async promise(){return new Promise((t,e)=>{this.on(I,()=>e(new Error("stream destroyed"))),this.on("error",i=>e(i)),this.on("end",()=>t())})}[Symbol.asyncIterator](){this[nt]=!1;let t=!1,e=async()=>(this.pause(),t=!0,{value:void 0,done:!0});return{next:()=>{if(t)return e();let r=this.read();if(r!==null)return Promise.resolve({done:!1,value:r});if(this[vt])return e();let n,o,a=u=>{this.off("data",c),this.off("end",l),this.off(I,h),e(),o(u)},c=u=>{this.off("error",a),this.off("end",l),this.off(I,h),this.pause(),n({value:u,done:!!this[vt]})},l=()=>{this.off("error",a),this.off("data",c),this.off(I,h),e(),n({done:!0,value:void 0})},h=()=>a(new Error("stream destroyed"));return new Promise((u,f)=>{o=f,n=u,this.once(I,h),this.once("error",a),this.once("end",l),this.once("data",c)})},throw:e,return:e,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[nt]=!1;let t=!1,e=()=>(this.pause(),this.off(bi,e),this.off(I,e),this.off("end",e),t=!0,{done:!0,value:void 0}),i=()=>{if(t)return e();let r=this.read();return r===null?e():{done:!1,value:r}};return this.once("end",e),this.once(bi,e),this.once(I,e),{next:i,throw:e,return:e,[Symbol.iterator](){return this}}}destroy(t){if(this[I])return t?this.emit("error",t):this.emit(I),this;this[I]=!0,this[nt]=!0,this[j].length=0,this[q]=0;let e=this;return typeof e.close=="function"&&!this[Ne]&&e.close(),t?this.emit("error",t):this.emit(I),this}static get isStream(){return Ca}};var Ua=qa.native,he={lstatSync:La,readdir:Ma,readdirSync:Ba,readlinkSync:ja,realpathSync:Ua,promises:{lstat:$a,readdir:za,readlink:Ga,realpath:Ha}},Hs=s=>!s||s===he||s===Wa?he:{...he,...s,promises:{...he.promises,...s.promises||{}}},Ks=/^\\\\\?\\([a-z]:)\\?$/i,Ka=s=>s.replace(/\//g,"\\").replace(Ks,"$1\\"),Ya=/[\\\/]/,ht=0,Ys=1,Js=2,St=4,Vs=6,Qs=8,_t=10,Zs=12,ct=15,ce=~ct,Ti=16,Us=32,le=64,pt=128,Le=256,Be=512,$s=le|pt|Be,Ja=1023,Oi=s=>s.isFile()?Qs:s.isDirectory()?St:s.isSymbolicLink()?_t:s.isCharacterDevice()?Js:s.isBlockDevice()?Vs:s.isSocket()?Zs:s.isFIFO()?Ys:ht,zs=new Map,ue=s=>{let t=zs.get(s);if(t)return t;let e=s.normalize("NFKD");return zs.set(s,e),e},Gs=new Map,Me=s=>{let t=Gs.get(s);if(t)return t;let e=ue(s.toLowerCase());return Gs.set(s,e),e},je=class extends se{constructor(){super({max:256})}},Fi=class extends se{constructor(t=16*1024){super({maxSize:t,sizeCalculation:e=>e.length+1})}},Xs=Symbol("PathScurry setAsCwd"),J=class{name;root;roots;parent;nocase;isCWD=!1;#t;#e;get dev(){return this.#e}#n;get mode(){return this.#n}#s;get nlink(){return this.#s}#o;get uid(){return this.#o}#b;get gid(){return this.#b}#h;get rdev(){return this.#h}#u;get blksize(){return this.#u}#a;get ino(){return this.#a}#c;get size(){return this.#c}#r;get blocks(){return this.#r}#y;get atimeMs(){return this.#y}#g;get mtimeMs(){return this.#g}#d;get ctimeMs(){return this.#d}#f;get birthtimeMs(){return this.#f}#x;get atime(){return this.#x}#m;get mtime(){return this.#m}#k;get ctime(){return this.#k}#C;get birthtime(){return this.#C}#S;#v;#E;#p;#F;#T;#i;#R;#w;#A;get parentPath(){return(this.parent||this).fullpath()}get path(){return this.parentPath}constructor(t,e=ht,i,r,n,o,a){this.name=t,this.#S=n?Me(t):ue(t),this.#i=e&Ja,this.nocase=n,this.roots=r,this.root=i||this,this.#R=o,this.#E=a.fullpath,this.#F=a.relative,this.#T=a.relativePosix,this.parent=a.parent,this.parent?this.#t=this.parent.#t:this.#t=Hs(a.fs)}depth(){return this.#v!==void 0?this.#v:this.parent?this.#v=this.parent.depth()+1:this.#v=0}childrenCache(){return this.#R}resolve(t){if(!t)return this;let e=this.getRootString(t),r=t.substring(e.length).split(this.splitSep);return e?this.getRoot(e).#D(r):this.#D(r)}#D(t){let e=this;for(let i of t)e=e.child(i);return e}children(){let t=this.#R.get(this);if(t)return t;let e=Object.assign([],{provisional:0});return this.#R.set(this,e),this.#i&=~Ti,e}child(t,e){if(t===""||t===".")return this;if(t==="..")return this.parent||this;let i=this.children(),r=this.nocase?Me(t):ue(t);for(let c of i)if(c.#S===r)return c;let n=this.parent?this.sep:"",o=this.#E?this.#E+n+t:void 0,a=this.newChild(t,ht,{...e,parent:this,fullpath:o});return this.canReaddir()||(a.#i|=pt),i.push(a),a}relative(){if(this.isCWD)return"";if(this.#F!==void 0)return this.#F;let t=this.name,e=this.parent;if(!e)return this.#F=this.name;let i=e.relative();return i+(!i||!e.parent?"":this.sep)+t}relativePosix(){if(this.sep==="/")return this.relative();if(this.isCWD)return"";if(this.#T!==void 0)return this.#T;let t=this.name,e=this.parent;if(!e)return this.#T=this.fullpathPosix();let i=e.relativePosix();return i+(!i||!e.parent?"":"/")+t}fullpath(){if(this.#E!==void 0)return this.#E;let t=this.name,e=this.parent;if(!e)return this.#E=this.name;let r=e.fullpath()+(e.parent?this.sep:"")+t;return this.#E=r}fullpathPosix(){if(this.#p!==void 0)return this.#p;if(this.sep==="/")return this.#p=this.fullpath();if(!this.parent){let r=this.fullpath().replace(/\\/g,"/");return/^[a-z]:\//i.test(r)?this.#p=`//?/${r}`:this.#p=r}let t=this.parent,e=t.fullpathPosix(),i=e+(!e||!t.parent?"":"/")+this.name;return this.#p=i}isUnknown(){return(this.#i&ct)===ht}isType(t){return this[`is${t}`]()}getType(){return this.isUnknown()?"Unknown":this.isDirectory()?"Directory":this.isFile()?"File":this.isSymbolicLink()?"SymbolicLink":this.isFIFO()?"FIFO":this.isCharacterDevice()?"CharacterDevice":this.isBlockDevice()?"BlockDevice":this.isSocket()?"Socket":"Unknown"}isFile(){return(this.#i&ct)===Qs}isDirectory(){return(this.#i&ct)===St}isCharacterDevice(){return(this.#i&ct)===Js}isBlockDevice(){return(this.#i&ct)===Vs}isFIFO(){return(this.#i&ct)===Ys}isSocket(){return(this.#i&ct)===Zs}isSymbolicLink(){return(this.#i&_t)===_t}lstatCached(){return this.#i&Us?this:void 0}readlinkCached(){return this.#w}realpathCached(){return this.#A}readdirCached(){let t=this.children();return t.slice(0,t.provisional)}canReadlink(){if(this.#w)return!0;if(!this.parent)return!1;let t=this.#i&ct;return!(t!==ht&&t!==_t||this.#i&Le||this.#i&pt)}calledReaddir(){return!!(this.#i&Ti)}isENOENT(){return!!(this.#i&pt)}isNamed(t){return this.nocase?this.#S===Me(t):this.#S===ue(t)}async readlink(){let t=this.#w;if(t)return t;if(this.canReadlink()&&this.parent)try{let e=await this.#t.promises.readlink(this.fullpath()),i=(await this.parent.realpath())?.resolve(e);if(i)return this.#w=i}catch(e){this.#l(e.code);return}}readlinkSync(){let t=this.#w;if(t)return t;if(this.canReadlink()&&this.parent)try{let e=this.#t.readlinkSync(this.fullpath()),i=this.parent.realpathSync()?.resolve(e);if(i)return this.#w=i}catch(e){this.#l(e.code);return}}#_(t){this.#i|=Ti;for(let e=t.provisional;e<t.length;e++){let i=t[e];i&&i.#I()}}#I(){this.#i&pt||(this.#i=(this.#i|pt)&ce,this.#O())}#O(){let t=this.children();t.provisional=0;for(let e of t)e.#I()}#P(){this.#i|=Be,this.#L()}#L(){if(this.#i&le)return;let t=this.#i;(t&ct)===St&&(t&=ce),this.#i=t|le,this.#O()}#M(t=""){t==="ENOTDIR"||t==="EPERM"?this.#L():t==="ENOENT"?this.#I():this.children().provisional=0}#B(t=""){t==="ENOTDIR"?this.parent.#L():t==="ENOENT"&&this.#I()}#l(t=""){let e=this.#i;e|=Le,t==="ENOENT"&&(e|=pt),(t==="EINVAL"||t==="UNKNOWN")&&(e&=ce),this.#i=e,t==="ENOTDIR"&&this.parent&&this.parent.#L()}#j(t,e){return this.#N(t,e)||this.#q(t,e)}#q(t,e){let i=Oi(t),r=this.newChild(t.name,i,{parent:this}),n=r.#i&ct;return n!==St&&n!==_t&&n!==ht&&(r.#i|=le),e.unshift(r),e.provisional++,r}#N(t,e){for(let i=e.provisional;i<e.length;i++){let r=e[i];if((this.nocase?Me(t.name):ue(t.name))===r.#S)return this.#W(t,r,i,e)}}#W(t,e,i,r){let n=e.name;return e.#i=e.#i&ce|Oi(t),n!==t.name&&(e.name=t.name),i!==r.provisional&&(i===r.length-1?r.pop():r.splice(i,1),r.unshift(e)),r.provisional++,e}async lstat(){if(!(this.#i&pt))try{return this.#G(await this.#t.promises.lstat(this.fullpath())),this}catch(t){this.#B(t.code)}}lstatSync(){if(!(this.#i&pt))try{return this.#G(this.#t.lstatSync(this.fullpath())),this}catch(t){this.#B(t.code)}}#G(t){let{atime:e,atimeMs:i,birthtime:r,birthtimeMs:n,blksize:o,blocks:a,ctime:c,ctimeMs:l,dev:h,gid:u,ino:f,mode:d,mtime:y,mtimeMs:m,nlink:w,rdev:g,size:b,uid:v}=t;this.#x=e,this.#y=i,this.#C=r,this.#f=n,this.#u=o,this.#r=a,this.#k=c,this.#d=l,this.#e=h,this.#b=u,this.#a=f,this.#n=d,this.#m=y,this.#g=m,this.#s=w,this.#h=g,this.#c=b,this.#o=v;let E=Oi(t);this.#i=this.#i&ce|E|Us,E!==ht&&E!==St&&E!==_t&&(this.#i|=le)}#$=[];#z=!1;#H(t){this.#z=!1;let e=this.#$.slice();this.#$.length=0,e.forEach(i=>i(null,t))}readdirCB(t,e=!1){if(!this.canReaddir()){e?t(null,[]):queueMicrotask(()=>t(null,[]));return}let i=this.children();if(this.calledReaddir()){let n=i.slice(0,i.provisional);e?t(null,n):queueMicrotask(()=>t(null,n));return}if(this.#$.push(t),this.#z)return;this.#z=!0;let r=this.fullpath();this.#t.readdir(r,{withFileTypes:!0},(n,o)=>{if(n)this.#M(n.code),i.provisional=0;else{for(let a of o)this.#j(a,i);this.#_(i)}this.#H(i.slice(0,i.provisional))})}#U;async readdir(){if(!this.canReaddir())return[];let t=this.children();if(this.calledReaddir())return t.slice(0,t.provisional);let e=this.fullpath();if(this.#U)await this.#U;else{let i=()=>{};this.#U=new Promise(r=>i=r);try{for(let r of await this.#t.promises.readdir(e,{withFileTypes:!0}))this.#j(r,t);this.#_(t)}catch(r){this.#M(r.code),t.provisional=0}this.#U=void 0,i()}return t.slice(0,t.provisional)}readdirSync(){if(!this.canReaddir())return[];let t=this.children();if(this.calledReaddir())return t.slice(0,t.provisional);let e=this.fullpath();try{for(let i of this.#t.readdirSync(e,{withFileTypes:!0}))this.#j(i,t);this.#_(t)}catch(i){this.#M(i.code),t.provisional=0}return t.slice(0,t.provisional)}canReaddir(){if(this.#i&$s)return!1;let t=ct&this.#i;return t===ht||t===St||t===_t}shouldWalk(t,e){return(this.#i&St)===St&&!(this.#i&$s)&&!t.has(this)&&(!e||e(this))}async realpath(){if(this.#A)return this.#A;if(!((Be|Le|pt)&this.#i))try{let t=await this.#t.promises.realpath(this.fullpath());return this.#A=this.resolve(t)}catch{this.#P()}}realpathSync(){if(this.#A)return this.#A;if(!((Be|Le|pt)&this.#i))try{let t=this.#t.realpathSync(this.fullpath());return this.#A=this.resolve(t)}catch{this.#P()}}[Xs](t){if(t===this)return;t.isCWD=!1,this.isCWD=!0;let e=new Set([]),i=[],r=this;for(;r&&r.parent;)e.add(r),r.#F=i.join(this.sep),r.#T=i.join("/"),r=r.parent,i.push("..");for(r=t;r&&r.parent&&!e.has(r);)r.#F=void 0,r.#T=void 0,r=r.parent}},qe=class s extends J{sep="\\";splitSep=Ya;constructor(t,e=ht,i,r,n,o,a){super(t,e,i,r,n,o,a)}newChild(t,e=ht,i={}){return new s(t,e,this.root,this.roots,this.nocase,this.childrenCache(),i)}getRootString(t){return Pi.parse(t).root}getRoot(t){if(t=Ka(t.toUpperCase()),t===this.root.name)return this.root;for(let[e,i]of Object.entries(this.roots))if(this.sameRoot(t,e))return this.roots[t]=i;return this.roots[t]=new $t(t,this).root}sameRoot(t,e=this.root.name){return t=t.toUpperCase().replace(/\//g,"\\").replace(Ks,"$1\\"),t===e}},We=class s extends J{splitSep="/";sep="/";constructor(t,e=ht,i,r,n,o,a){super(t,e,i,r,n,o,a)}getRootString(t){return t.startsWith("/")?"/":""}getRoot(t){return this.root}newChild(t,e=ht,i={}){return new s(t,e,this.root,this.roots,this.nocase,this.childrenCache(),i)}},Ue=class{root;rootPath;roots;cwd;#t;#e;#n;nocase;#s;constructor(t=process.cwd(),e,i,{nocase:r,childrenCacheSize:n=16*1024,fs:o=he}={}){this.#s=Hs(o),(t instanceof URL||t.startsWith("file://"))&&(t=Ia(t));let a=e.resolve(t);this.roots=Object.create(null),this.rootPath=this.parseRootPath(a),this.#t=new je,this.#e=new je,this.#n=new Fi(n);let c=a.substring(this.rootPath.length).split(i);if(c.length===1&&!c[0]&&c.pop(),r===void 0)throw new TypeError("must provide nocase setting to PathScurryBase ctor");this.nocase=r,this.root=this.newRoot(this.#s),this.roots[this.rootPath]=this.root;let l=this.root,h=c.length-1,u=e.sep,f=this.rootPath,d=!1;for(let y of c){let m=h--;l=l.child(y,{relative:new Array(m).fill("..").join(u),relativePosix:new Array(m).fill("..").join("/"),fullpath:f+=(d?"":u)+y}),d=!0}this.cwd=l}depth(t=this.cwd){return typeof t=="string"&&(t=this.cwd.resolve(t)),t.depth()}childrenCache(){return this.#n}resolve(...t){let e="";for(let n=t.length-1;n>=0;n--){let o=t[n];if(!(!o||o===".")&&(e=e?`${o}/${e}`:o,this.isAbsolute(o)))break}let i=this.#t.get(e);if(i!==void 0)return i;let r=this.cwd.resolve(e).fullpath();return this.#t.set(e,r),r}resolvePosix(...t){let e="";for(let n=t.length-1;n>=0;n--){let o=t[n];if(!(!o||o===".")&&(e=e?`${o}/${e}`:o,this.isAbsolute(o)))break}let i=this.#e.get(e);if(i!==void 0)return i;let r=this.cwd.resolve(e).fullpathPosix();return this.#e.set(e,r),r}relative(t=this.cwd){return typeof t=="string"&&(t=this.cwd.resolve(t)),t.relative()}relativePosix(t=this.cwd){return typeof t=="string"&&(t=this.cwd.resolve(t)),t.relativePosix()}basename(t=this.cwd){return typeof t=="string"&&(t=this.cwd.resolve(t)),t.name}dirname(t=this.cwd){return typeof t=="string"&&(t=this.cwd.resolve(t)),(t.parent||t).fullpath()}async readdir(t=this.cwd,e={withFileTypes:!0}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof J||(e=t,t=this.cwd);let{withFileTypes:i}=e;if(t.canReaddir()){let r=await t.readdir();return i?r:r.map(n=>n.name)}else return[]}readdirSync(t=this.cwd,e={withFileTypes:!0}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof J||(e=t,t=this.cwd);let{withFileTypes:i=!0}=e;return t.canReaddir()?i?t.readdirSync():t.readdirSync().map(r=>r.name):[]}async lstat(t=this.cwd){return typeof t=="string"&&(t=this.cwd.resolve(t)),t.lstat()}lstatSync(t=this.cwd){return typeof t=="string"&&(t=this.cwd.resolve(t)),t.lstatSync()}async readlink(t=this.cwd,{withFileTypes:e}={withFileTypes:!1}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof J||(e=t.withFileTypes,t=this.cwd);let i=await t.readlink();return e?i:i?.fullpath()}readlinkSync(t=this.cwd,{withFileTypes:e}={withFileTypes:!1}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof J||(e=t.withFileTypes,t=this.cwd);let i=t.readlinkSync();return e?i:i?.fullpath()}async realpath(t=this.cwd,{withFileTypes:e}={withFileTypes:!1}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof J||(e=t.withFileTypes,t=this.cwd);let i=await t.realpath();return e?i:i?.fullpath()}realpathSync(t=this.cwd,{withFileTypes:e}={withFileTypes:!1}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof J||(e=t.withFileTypes,t=this.cwd);let i=t.realpathSync();return e?i:i?.fullpath()}async walk(t=this.cwd,e={}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof J||(e=t,t=this.cwd);let{withFileTypes:i=!0,follow:r=!1,filter:n,walkFilter:o}=e,a=[];(!n||n(t))&&a.push(i?t:t.fullpath());let c=new Set,l=(u,f)=>{c.add(u),u.readdirCB((d,y)=>{if(d)return f(d);let m=y.length;if(!m)return f();let w=()=>{--m===0&&f()};for(let g of y)(!n||n(g))&&a.push(i?g:g.fullpath()),r&&g.isSymbolicLink()?g.realpath().then(b=>b?.isUnknown()?b.lstat():b).then(b=>b?.shouldWalk(c,o)?l(b,w):w()):g.shouldWalk(c,o)?l(g,w):w()},!0)},h=t;return new Promise((u,f)=>{l(h,d=>{if(d)return f(d);u(a)})})}walkSync(t=this.cwd,e={}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof J||(e=t,t=this.cwd);let{withFileTypes:i=!0,follow:r=!1,filter:n,walkFilter:o}=e,a=[];(!n||n(t))&&a.push(i?t:t.fullpath());let c=new Set([t]);for(let l of c){let h=l.readdirSync();for(let u of h){(!n||n(u))&&a.push(i?u:u.fullpath());let f=u;if(u.isSymbolicLink()){if(!(r&&(f=u.realpathSync())))continue;f.isUnknown()&&f.lstatSync()}f.shouldWalk(c,o)&&c.add(f)}}return a}[Symbol.asyncIterator](){return this.iterate()}iterate(t=this.cwd,e={}){return typeof t=="string"?t=this.cwd.resolve(t):t instanceof J||(e=t,t=this.cwd),this.stream(t,e)[Symbol.asyncIterator]()}[Symbol.iterator](){return this.iterateSync()}*iterateSync(t=this.cwd,e={}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof J||(e=t,t=this.cwd);let{withFileTypes:i=!0,follow:r=!1,filter:n,walkFilter:o}=e;(!n||n(t))&&(yield i?t:t.fullpath());let a=new Set([t]);for(let c of a){let l=c.readdirSync();for(let h of l){(!n||n(h))&&(yield i?h:h.fullpath());let u=h;if(h.isSymbolicLink()){if(!(r&&(u=h.realpathSync())))continue;u.isUnknown()&&u.lstatSync()}u.shouldWalk(a,o)&&a.add(u)}}}stream(t=this.cwd,e={}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof J||(e=t,t=this.cwd);let{withFileTypes:i=!0,follow:r=!1,filter:n,walkFilter:o}=e,a=new Ot({objectMode:!0});(!n||n(t))&&a.write(i?t:t.fullpath());let c=new Set,l=[t],h=0,u=()=>{let f=!1;for(;!f;){let d=l.shift();if(!d){h===0&&a.end();return}h++,c.add(d);let y=(w,g,b=!1)=>{if(w)return a.emit("error",w);if(r&&!b){let v=[];for(let E of g)E.isSymbolicLink()&&v.push(E.realpath().then(T=>T?.isUnknown()?T.lstat():T));if(v.length){Promise.all(v).then(()=>y(null,g,!0));return}}for(let v of g)v&&(!n||n(v))&&(a.write(i?v:v.fullpath())||(f=!0));h--;for(let v of g){let E=v.realpathCached()||v;E.shouldWalk(c,o)&&l.push(E)}f&&!a.flowing?a.once("drain",u):m||u()},m=!0;d.readdirCB(y,!0),m=!1}};return u(),a}streamSync(t=this.cwd,e={}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof J||(e=t,t=this.cwd);let{withFileTypes:i=!0,follow:r=!1,filter:n,walkFilter:o}=e,a=new Ot({objectMode:!0}),c=new Set;(!n||n(t))&&a.write(i?t:t.fullpath());let l=[t],h=0,u=()=>{let f=!1;for(;!f;){let d=l.shift();if(!d){h===0&&a.end();return}h++,c.add(d);let y=d.readdirSync();for(let m of y)(!n||n(m))&&(a.write(i?m:m.fullpath())||(f=!0));h--;for(let m of y){let w=m;if(m.isSymbolicLink()){if(!(r&&(w=m.realpathSync())))continue;w.isUnknown()&&w.lstatSync()}w.shouldWalk(c,o)&&l.push(w)}}f&&!a.flowing&&a.once("drain",u)};return u(),a}chdir(t=this.cwd){let e=this.cwd;this.cwd=typeof t=="string"?this.cwd.resolve(t):t,this.cwd[Xs](e)}},$t=class extends Ue{sep="\\";constructor(t=process.cwd(),e={}){let{nocase:i=!0}=e;super(t,Pi,"\\",{...e,nocase:i}),this.nocase=i;for(let r=this.cwd;r;r=r.parent)r.nocase=this.nocase}parseRootPath(t){return Pi.parse(t).root.toUpperCase()}newRoot(t){return new qe(this.rootPath,St,void 0,this.roots,this.nocase,this.childrenCache(),{fs:t})}isAbsolute(t){return t.startsWith("/")||t.startsWith("\\")||/^[a-z]:(\/|\\)/i.test(t)}},zt=class extends Ue{sep="/";constructor(t=process.cwd(),e={}){let{nocase:i=!1}=e;super(t,_a,"/",{...e,nocase:i}),this.nocase=i}parseRootPath(t){return"/"}newRoot(t){return new We(this.rootPath,St,void 0,this.roots,this.nocase,this.childrenCache(),{fs:t})}isAbsolute(t){return t.startsWith("/")}},fe=class extends zt{constructor(t=process.cwd(),e={}){let{nocase:i=!0}=e;super(t,{...e,nocase:i})}},Lu=process.platform==="win32"?qe:We,tr=process.platform==="win32"?$t:process.platform==="darwin"?fe:zt;p();var Va=s=>s.length>=1,Qa=s=>s.length>=1,Gt=class s{#t;#e;#n;length;#s;#o;#b;#h;#u;#a;#c=!0;constructor(t,e,i,r){if(!Va(t))throw new TypeError("empty pattern list");if(!Qa(e))throw new TypeError("empty glob list");if(e.length!==t.length)throw new TypeError("mismatched pattern list and glob list lengths");if(this.length=t.length,i<0||i>=this.length)throw new TypeError("index out of range");if(this.#t=t,this.#e=e,this.#n=i,this.#s=r,this.#n===0){if(this.isUNC()){let[n,o,a,c,...l]=this.#t,[h,u,f,d,...y]=this.#e;l[0]===""&&(l.shift(),y.shift());let m=[n,o,a,c,""].join("/"),w=[h,u,f,d,""].join("/");this.#t=[m,...l],this.#e=[w,...y],this.length=this.#t.length}else if(this.isDrive()||this.isAbsolute()){let[n,...o]=this.#t,[a,...c]=this.#e;o[0]===""&&(o.shift(),c.shift());let l=n+"/",h=a+"/";this.#t=[l,...o],this.#e=[h,...c],this.length=this.#t.length}}}pattern(){return this.#t[this.#n]}isString(){return typeof this.#t[this.#n]=="string"}isGlobstar(){return this.#t[this.#n]===H}isRegExp(){return this.#t[this.#n]instanceof RegExp}globString(){return this.#b=this.#b||(this.#n===0?this.isAbsolute()?this.#e[0]+this.#e.slice(1).join("/"):this.#e.join("/"):this.#e.slice(this.#n).join("/"))}hasMore(){return this.length>this.#n+1}rest(){return this.#o!==void 0?this.#o:this.hasMore()?(this.#o=new s(this.#t,this.#e,this.#n+1,this.#s),this.#o.#a=this.#a,this.#o.#u=this.#u,this.#o.#h=this.#h,this.#o):this.#o=null}isUNC(){let t=this.#t;return this.#u!==void 0?this.#u:this.#u=this.#s==="win32"&&this.#n===0&&t[0]===""&&t[1]===""&&typeof t[2]=="string"&&!!t[2]&&typeof t[3]=="string"&&!!t[3]}isDrive(){let t=this.#t;return this.#h!==void 0?this.#h:this.#h=this.#s==="win32"&&this.#n===0&&this.length>1&&typeof t[0]=="string"&&/^[a-z]:$/i.test(t[0])}isAbsolute(){let t=this.#t;return this.#a!==void 0?this.#a:this.#a=t[0]===""&&t.length>1||this.isDrive()||this.isUNC()}root(){let t=this.#t[0];return typeof t=="string"&&this.isAbsolute()&&this.#n===0?t:""}checkFollowGlobstar(){return!(this.#n===0||!this.isGlobstar()||!this.#c)}markFollowGlobstar(){return this.#n===0||!this.isGlobstar()||!this.#c?!1:(this.#c=!1,!0)}};p();p();var Za=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",Ht=class{relative;relativeChildren;absolute;absoluteChildren;platform;mmopts;constructor(t,{nobrace:e,nocase:i,noext:r,noglobstar:n,platform:o=Za}){this.relative=[],this.absolute=[],this.relativeChildren=[],this.absoluteChildren=[],this.platform=o,this.mmopts={dot:!0,nobrace:e,nocase:i,noext:r,noglobstar:n,optimizationLevel:2,platform:o,nocomment:!0,nonegate:!0};for(let a of t)this.add(a)}add(t){let e=new rt(t,this.mmopts);for(let i=0;i<e.set.length;i++){let r=e.set[i],n=e.globParts[i];if(!r||!n)throw new Error("invalid pattern object");for(;r[0]==="."&&n[0]===".";)r.shift(),n.shift();let o=new Gt(r,n,0,this.platform),a=new rt(o.globString(),this.mmopts),c=n[n.length-1]==="**",l=o.isAbsolute();l?this.absolute.push(a):this.relative.push(a),c&&(l?this.absoluteChildren.push(a):this.relativeChildren.push(a))}}ignored(t){let e=t.fullpath(),i=`${e}/`,r=t.relative()||".",n=`${r}/`;for(let o of this.relative)if(o.match(r)||o.match(n))return!0;for(let o of this.absolute)if(o.match(e)||o.match(i))return!0;return!1}childrenIgnored(t){let e=t.fullpath()+"/",i=(t.relative()||".")+"/";for(let r of this.relativeChildren)if(r.match(i))return!0;for(let r of this.absoluteChildren)if(r.match(e))return!0;return!1}};p();var Ai=class s{store;constructor(t=new Map){this.store=t}copy(){return new s(new Map(this.store))}hasWalked(t,e){return this.store.get(t.fullpath())?.has(e.globString())}storeWalked(t,e){let i=t.fullpath(),r=this.store.get(i);r?r.add(e.globString()):this.store.set(i,new Set([e.globString()]))}},Ni=class{store=new Map;add(t,e,i){let r=(e?2:0)|(i?1:0),n=this.store.get(t);this.store.set(t,n===void 0?r:r&n)}entries(){return[...this.store.entries()].map(([t,e])=>[t,!!(e&2),!!(e&1)])}},Ri=class{store=new Map;add(t,e){if(!t.canReaddir())return;let i=this.store.get(t);i?i.find(r=>r.globString()===e.globString())||i.push(e):this.store.set(t,[e])}get(t){let e=this.store.get(t);if(!e)throw new Error("attempting to walk unknown path");return e}entries(){return this.keys().map(t=>[t,this.store.get(t)])}keys(){return[...this.store.keys()].filter(t=>t.canReaddir())}},de=class s{hasWalkedCache;matches=new Ni;subwalks=new Ri;patterns;follow;dot;opts;constructor(t,e){this.opts=t,this.follow=!!t.follow,this.dot=!!t.dot,this.hasWalkedCache=e?e.copy():new Ai}processPatterns(t,e){this.patterns=e;let i=e.map(r=>[t,r]);for(let[r,n]of i){this.hasWalkedCache.storeWalked(r,n);let o=n.root(),a=n.isAbsolute()&&this.opts.absolute!==!1;if(o){r=r.resolve(o==="/"&&this.opts.root!==void 0?this.opts.root:o);let u=n.rest();if(u)n=u;else{this.matches.add(r,!0,!1);continue}}if(r.isENOENT())continue;let c,l,h=!1;for(;typeof(c=n.pattern())=="string"&&(l=n.rest());)r=r.resolve(c),n=l,h=!0;if(c=n.pattern(),l=n.rest(),h){if(this.hasWalkedCache.hasWalked(r,n))continue;this.hasWalkedCache.storeWalked(r,n)}if(typeof c=="string"){let u=c===".."||c===""||c===".";this.matches.add(r.resolve(c),a,u);continue}else if(c===H){(!r.isSymbolicLink()||this.follow||n.checkFollowGlobstar())&&this.subwalks.add(r,n);let u=l?.pattern(),f=l?.rest();if(!l||(u===""||u===".")&&!f)this.matches.add(r,a,u===""||u===".");else if(u===".."){let d=r.parent||r;f?this.hasWalkedCache.hasWalked(d,f)||this.subwalks.add(d,f):this.matches.add(d,a,!0)}}else c instanceof RegExp&&this.subwalks.add(r,n)}return this}subwalkTargets(){return this.subwalks.keys()}child(){return new s(this.opts,this.hasWalkedCache)}filterEntries(t,e){let i=this.subwalks.get(t),r=this.child();for(let n of e)for(let o of i){let a=o.isAbsolute(),c=o.pattern(),l=o.rest();c===H?r.testGlobstar(n,o,l,a):c instanceof RegExp?r.testRegExp(n,c,l,a):r.testString(n,c,l,a)}return r}testGlobstar(t,e,i,r){if((this.dot||!t.name.startsWith("."))&&(e.hasMore()||this.matches.add(t,r,!1),t.canReaddir()&&(this.follow||!t.isSymbolicLink()?this.subwalks.add(t,e):t.isSymbolicLink()&&(i&&e.checkFollowGlobstar()?this.subwalks.add(t,i):e.markFollowGlobstar()&&this.subwalks.add(t,e)))),i){let n=i.pattern();if(typeof n=="string"&&n!==".."&&n!==""&&n!==".")this.testString(t,n,i.rest(),r);else if(n===".."){let o=t.parent||t;this.subwalks.add(o,i)}else n instanceof RegExp&&this.testRegExp(t,n,i.rest(),r)}}testRegExp(t,e,i,r){e.test(t.name)&&(i?this.subwalks.add(t,i):this.matches.add(t,r,!1))}testString(t,e,i,r){t.isNamed(e)&&(i?this.subwalks.add(t,i):this.matches.add(t,r,!1))}};var Xa=(s,t)=>typeof s=="string"?new Ht([s],t):Array.isArray(s)?new Ht(s,t):s,$e=class{path;patterns;opts;seen=new Set;paused=!1;aborted=!1;#t=[];#e;#n;signal;maxDepth;includeChildMatches;constructor(t,e,i){if(this.patterns=t,this.path=e,this.opts=i,this.#n=!i.posix&&i.platform==="win32"?"\\":"/",this.includeChildMatches=i.includeChildMatches!==!1,(i.ignore||!this.includeChildMatches)&&(this.#e=Xa(i.ignore??[],i),!this.includeChildMatches&&typeof this.#e.add!="function")){let r="cannot ignore child matches, ignore lacks add() method.";throw new Error(r)}this.maxDepth=i.maxDepth||1/0,i.signal&&(this.signal=i.signal,this.signal.addEventListener("abort",()=>{this.#t.length=0}))}#s(t){return this.seen.has(t)||!!this.#e?.ignored?.(t)}#o(t){return!!this.#e?.childrenIgnored?.(t)}pause(){this.paused=!0}resume(){if(this.signal?.aborted)return;this.paused=!1;let t;for(;!this.paused&&(t=this.#t.shift());)t()}onResume(t){this.signal?.aborted||(this.paused?this.#t.push(t):t())}async matchCheck(t,e){if(e&&this.opts.nodir)return;let i;if(this.opts.realpath){if(i=t.realpathCached()||await t.realpath(),!i)return;t=i}let n=t.isUnknown()||this.opts.stat?await t.lstat():t;if(this.opts.follow&&this.opts.nodir&&n?.isSymbolicLink()){let o=await n.realpath();o&&(o.isUnknown()||this.opts.stat)&&await o.lstat()}return this.matchCheckTest(n,e)}matchCheckTest(t,e){return t&&(this.maxDepth===1/0||t.depth()<=this.maxDepth)&&(!e||t.canReaddir())&&(!this.opts.nodir||!t.isDirectory())&&(!this.opts.nodir||!this.opts.follow||!t.isSymbolicLink()||!t.realpathCached()?.isDirectory())&&!this.#s(t)?t:void 0}matchCheckSync(t,e){if(e&&this.opts.nodir)return;let i;if(this.opts.realpath){if(i=t.realpathCached()||t.realpathSync(),!i)return;t=i}let n=t.isUnknown()||this.opts.stat?t.lstatSync():t;if(this.opts.follow&&this.opts.nodir&&n?.isSymbolicLink()){let o=n.realpathSync();o&&(o?.isUnknown()||this.opts.stat)&&o.lstatSync()}return this.matchCheckTest(n,e)}matchFinish(t,e){if(this.#s(t))return;if(!this.includeChildMatches&&this.#e?.add){let n=`${t.relativePosix()}/**`;this.#e.add(n)}let i=this.opts.absolute===void 0?e:this.opts.absolute;this.seen.add(t);let r=this.opts.mark&&t.isDirectory()?this.#n:"";if(this.opts.withFileTypes)this.matchEmit(t);else if(i){let n=this.opts.posix?t.fullpathPosix():t.fullpath();this.matchEmit(n+r)}else{let n=this.opts.posix?t.relativePosix():t.relative(),o=this.opts.dotRelative&&!n.startsWith(".."+this.#n)?"."+this.#n:"";this.matchEmit(n?o+n+r:"."+r)}}async match(t,e,i){let r=await this.matchCheck(t,i);r&&this.matchFinish(r,e)}matchSync(t,e,i){let r=this.matchCheckSync(t,i);r&&this.matchFinish(r,e)}walkCB(t,e,i){this.signal?.aborted&&i(),this.walkCB2(t,e,new de(this.opts),i)}walkCB2(t,e,i,r){if(this.#o(t))return r();if(this.signal?.aborted&&r(),this.paused){this.onResume(()=>this.walkCB2(t,e,i,r));return}i.processPatterns(t,e);let n=1,o=()=>{--n===0&&r()};for(let[a,c,l]of i.matches.entries())this.#s(a)||(n++,this.match(a,c,l).then(()=>o()));for(let a of i.subwalkTargets()){if(this.maxDepth!==1/0&&a.depth()>=this.maxDepth)continue;n++;let c=a.readdirCached();a.calledReaddir()?this.walkCB3(a,c,i,o):a.readdirCB((l,h)=>this.walkCB3(a,h,i,o),!0)}o()}walkCB3(t,e,i,r){i=i.filterEntries(t,e);let n=1,o=()=>{--n===0&&r()};for(let[a,c,l]of i.matches.entries())this.#s(a)||(n++,this.match(a,c,l).then(()=>o()));for(let[a,c]of i.subwalks.entries())n++,this.walkCB2(a,c,i.child(),o);o()}walkCBSync(t,e,i){this.signal?.aborted&&i(),this.walkCB2Sync(t,e,new de(this.opts),i)}walkCB2Sync(t,e,i,r){if(this.#o(t))return r();if(this.signal?.aborted&&r(),this.paused){this.onResume(()=>this.walkCB2Sync(t,e,i,r));return}i.processPatterns(t,e);let n=1,o=()=>{--n===0&&r()};for(let[a,c,l]of i.matches.entries())this.#s(a)||this.matchSync(a,c,l);for(let a of i.subwalkTargets()){if(this.maxDepth!==1/0&&a.depth()>=this.maxDepth)continue;n++;let c=a.readdirSync();this.walkCB3Sync(a,c,i,o)}o()}walkCB3Sync(t,e,i,r){i=i.filterEntries(t,e);let n=1,o=()=>{--n===0&&r()};for(let[a,c,l]of i.matches.entries())this.#s(a)||this.matchSync(a,c,l);for(let[a,c]of i.subwalks.entries())n++,this.walkCB2Sync(a,c,i.child(),o);o()}},pe=class extends $e{matches=new Set;constructor(t,e,i){super(t,e,i)}matchEmit(t){this.matches.add(t)}async walk(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&await this.path.lstat(),await new Promise((t,e)=>{this.walkCB(this.path,this.patterns,()=>{this.signal?.aborted?e(this.signal.reason):t(this.matches)})}),this.matches}walkSync(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>{if(this.signal?.aborted)throw this.signal.reason}),this.matches}},me=class extends $e{results;constructor(t,e,i){super(t,e,i),this.results=new Ot({signal:this.signal,objectMode:!0}),this.results.on("drain",()=>this.resume()),this.results.on("resume",()=>this.resume())}matchEmit(t){this.results.write(t),this.results.flowing||this.pause()}stream(){let t=this.path;return t.isUnknown()?t.lstat().then(()=>{this.walkCB(t,this.patterns,()=>this.results.end())}):this.walkCB(t,this.patterns,()=>this.results.end()),this.results}streamSync(){return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>this.results.end()),this.results}};var ec=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",mt=class{absolute;cwd;root;dot;dotRelative;follow;ignore;magicalBraces;mark;matchBase;maxDepth;nobrace;nocase;nodir;noext;noglobstar;pattern;platform;realpath;scurry;stat;signal;windowsPathsNoEscape;withFileTypes;includeChildMatches;opts;patterns;constructor(t,e){if(!e)throw new TypeError("glob options required");if(this.withFileTypes=!!e.withFileTypes,this.signal=e.signal,this.follow=!!e.follow,this.dot=!!e.dot,this.dotRelative=!!e.dotRelative,this.nodir=!!e.nodir,this.mark=!!e.mark,e.cwd?(e.cwd instanceof URL||e.cwd.startsWith("file://"))&&(e.cwd=tc(e.cwd)):this.cwd="",this.cwd=e.cwd||"",this.root=e.root,this.magicalBraces=!!e.magicalBraces,this.nobrace=!!e.nobrace,this.noext=!!e.noext,this.realpath=!!e.realpath,this.absolute=e.absolute,this.includeChildMatches=e.includeChildMatches!==!1,this.noglobstar=!!e.noglobstar,this.matchBase=!!e.matchBase,this.maxDepth=typeof e.maxDepth=="number"?e.maxDepth:1/0,this.stat=!!e.stat,this.ignore=e.ignore,this.withFileTypes&&this.absolute!==void 0)throw new Error("cannot set absolute and withFileTypes:true");if(typeof t=="string"&&(t=[t]),this.windowsPathsNoEscape=!!e.windowsPathsNoEscape||e.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(t=t.map(c=>c.replace(/\\/g,"/"))),this.matchBase){if(e.noglobstar)throw new TypeError("base matching requires globstar");t=t.map(c=>c.includes("/")?c:`./**/${c}`)}if(this.pattern=t,this.platform=e.platform||ec,this.opts={...e,platform:this.platform},e.scurry){if(this.scurry=e.scurry,e.nocase!==void 0&&e.nocase!==e.scurry.nocase)throw new Error("nocase option contradicts provided scurry option")}else{let c=e.platform==="win32"?$t:e.platform==="darwin"?fe:e.platform?zt:tr;this.scurry=new c(this.cwd,{nocase:e.nocase,fs:e.fs})}this.nocase=this.scurry.nocase;let i=this.platform==="darwin"||this.platform==="win32",r={...e,dot:this.dot,matchBase:this.matchBase,nobrace:this.nobrace,nocase:this.nocase,nocaseMagicOnly:i,nocomment:!0,noext:this.noext,nonegate:!0,optimizationLevel:2,platform:this.platform,windowsPathsNoEscape:this.windowsPathsNoEscape,debug:!!this.opts.debug},n=this.pattern.map(c=>new rt(c,r)),[o,a]=n.reduce((c,l)=>(c[0].push(...l.set),c[1].push(...l.globParts),c),[[],[]]);this.patterns=o.map((c,l)=>{let h=a[l];if(!h)throw new Error("invalid pattern object");return new Gt(c,h,0,this.platform)})}async walk(){return[...await new pe(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walk()]}walkSync(){return[...new pe(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walkSync()]}stream(){return new me(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).stream()}streamSync(){return new me(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).streamSync()}iterateSync(){return this.streamSync()[Symbol.iterator]()}[Symbol.iterator](){return this.iterateSync()}iterate(){return this.stream()[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterate()}};p();var Di=(s,t={})=>{Array.isArray(s)||(s=[s]);for(let e of s)if(new rt(e,t).hasMagic())return!0;return!1};function Ge(s,t={}){return new mt(s,t).streamSync()}function ir(s,t={}){return new mt(s,t).stream()}function sr(s,t={}){return new mt(s,t).walkSync()}async function er(s,t={}){return new mt(s,t).walk()}function He(s,t={}){return new mt(s,t).iterateSync()}function rr(s,t={}){return new mt(s,t).iterate()}var ic=Ge,sc=Object.assign(ir,{sync:Ge}),rc=He,nc=Object.assign(rr,{sync:He}),oc=Object.assign(sr,{stream:Ge,iterate:He}),ze=Object.assign(er,{glob:er,globSync:sr,sync:oc,globStream:ir,stream:sc,globStreamSync:Ge,streamSync:ic,globIterate:rr,iterate:nc,globIterateSync:He,iterateSync:rc,Glob:mt,hasMagic:Di,escape:Bt,unescape:ft});ze.glob=ze;import nr from"path";import{fileURLToPath as ac}from"url";function or(s){return nr.dirname(ac(s))}async function ar(...s){let t=[];return await Promise.all(s.map(async e=>{(await ze(e.split(nr.sep).join("/"))).forEach(r=>{t.includes(r)||t.push(`file://${r}`)})})),t}var Yi=Oe(io(),1);import{existsSync as hl}from"fs";import{homedir as ll}from"os";import si from"path";var ul=await ar(`${or(import.meta.url)}/commands/*.{ts,js}`),fl=si.join(ll(),".tdb"),Ji=si.join(fl,"data"),Vi=si.join(Ji,"mysql"),dl=si.join(Ji,"postgres");if(!hl(Ji))throw new Error("Data directory does not exist. Please run the `postinstall` script.");await Promise.all([(0,Yi.ensureDir)(Vi),(0,Yi.ensureDir)(dl)]);var $d=await Promise.all(ul.map(async s=>{let{command:t}=await import(s);return t}));p();p();p();var so=(s=0)=>t=>`\x1B[${t+s}m`,ro=(s=0)=>t=>`\x1B[${38+s};5;${t}m`,no=(s=0)=>(t,e,i)=>`\x1B[${38+s};2;${t};${e};${i}m`,F={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}},Hd=Object.keys(F.modifier),pl=Object.keys(F.color),ml=Object.keys(F.bgColor),Kd=[...pl,...ml];function yl(){let s=new Map;for(let[t,e]of Object.entries(F)){for(let[i,r]of Object.entries(e))F[i]={open:`\x1B[${r[0]}m`,close:`\x1B[${r[1]}m`},e[i]=F[i],s.set(r[0],r[1]);Object.defineProperty(F,t,{value:e,enumerable:!1})}return Object.defineProperty(F,"codes",{value:s,enumerable:!1}),F.color.close="\x1B[39m",F.bgColor.close="\x1B[49m",F.color.ansi=so(),F.color.ansi256=ro(),F.color.ansi16m=no(),F.bgColor.ansi=so(10),F.bgColor.ansi256=ro(10),F.bgColor.ansi16m=no(10),Object.defineProperties(F,{rgbToAnsi256:{value(t,e,i){return t===e&&e===i?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(e/255*5)+Math.round(i/255*5)},enumerable:!1},hexToRgb:{value(t){let e=/[a-f\d]{6}|[a-f\d]{3}/i.exec(t.toString(16));if(!e)return[0,0,0];let[i]=e;i.length===3&&(i=[...i].map(n=>n+n).join(""));let r=Number.parseInt(i,16);return[r>>16&255,r>>8&255,r&255]},enumerable:!1},hexToAnsi256:{value:t=>F.rgbToAnsi256(...F.hexToRgb(t)),enumerable:!1},ansi256ToAnsi:{value(t){if(t<8)return 30+t;if(t<16)return 90+(t-8);let e,i,r;if(t>=232)e=((t-232)*10+8)/255,i=e,r=e;else{t-=16;let a=t%36;e=Math.floor(t/36)/5,i=Math.floor(a/6)/5,r=a%6/5}let n=Math.max(e,i,r)*2;if(n===0)return 30;let o=30+(Math.round(r)<<2|Math.round(i)<<1|Math.round(e));return n===2&&(o+=60),o},enumerable:!1},rgbToAnsi:{value:(t,e,i)=>F.ansi256ToAnsi(F.rgbToAnsi256(t,e,i)),enumerable:!1},hexToAnsi:{value:t=>F.ansi256ToAnsi(F.hexToAnsi256(t)),enumerable:!1}}),F}var gl=yl(),gt=gl;p();import Qi from"node:process";import wl from"node:os";import oo from"node:tty";function lt(s,t=globalThis.Deno?globalThis.Deno.args:Qi.argv){let e=s.startsWith("-")?"":s.length===1?"-":"--",i=t.indexOf(e+s),r=t.indexOf("--");return i!==-1&&(r===-1||i<r)}var{env:R}=Qi,ri;lt("no-color")||lt("no-colors")||lt("color=false")||lt("color=never")?ri=0:(lt("color")||lt("colors")||lt("color=true")||lt("color=always"))&&(ri=1);function Sl(){if("FORCE_COLOR"in R)return R.FORCE_COLOR==="true"?1:R.FORCE_COLOR==="false"?0:R.FORCE_COLOR.length===0?1:Math.min(Number.parseInt(R.FORCE_COLOR,10),3)}function bl(s){return s===0?!1:{level:s,hasBasic:!0,has256:s>=2,has16m:s>=3}}function vl(s,{streamIsTTY:t,sniffFlags:e=!0}={}){let i=Sl();i!==void 0&&(ri=i);let r=e?ri:i;if(r===0)return 0;if(e){if(lt("color=16m")||lt("color=full")||lt("color=truecolor"))return 3;if(lt("color=256"))return 2}if("TF_BUILD"in R&&"AGENT_NAME"in R)return 1;if(s&&!t&&r===void 0)return 0;let n=r||0;if(R.TERM==="dumb")return n;if(Qi.platform==="win32"){let o=wl.release().split(".");return Number(o[0])>=10&&Number(o[2])>=10586?Number(o[2])>=14931?3:2:1}if("CI"in R)return"GITHUB_ACTIONS"in R||"GITEA_ACTIONS"in R?3:["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","BUILDKITE","DRONE"].some(o=>o in R)||R.CI_NAME==="codeship"?1:n;if("TEAMCITY_VERSION"in R)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(R.TEAMCITY_VERSION)?1:0;if(R.COLORTERM==="truecolor"||R.TERM==="xterm-kitty")return 3;if("TERM_PROGRAM"in R){let o=Number.parseInt((R.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(R.TERM_PROGRAM){case"iTerm.app":return o>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(R.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(R.TERM)||"COLORTERM"in R?1:n}function ao(s,t={}){let e=vl(s,{streamIsTTY:s&&s.isTTY,...t});return bl(e)}var El={stdout:ao({isTTY:oo.isatty(1)}),stderr:ao({isTTY:oo.isatty(2)})},co=El;p();function ho(s,t,e){let i=s.indexOf(t);if(i===-1)return s;let r=t.length,n=0,o="";do o+=s.slice(n,i)+t+e,n=i+r,i=s.indexOf(t,n);while(i!==-1);return o+=s.slice(n),o}function lo(s,t,e,i){let r=0,n="";do{let o=s[i-1]==="\r";n+=s.slice(r,o?i-1:i)+t+(o?`\r
`:`
`)+e,r=i+1,i=s.indexOf(`
`,r)}while(i!==-1);return n+=s.slice(r),n}var{stdout:uo,stderr:fo}=co,Zi=Symbol("GENERATOR"),Zt=Symbol("STYLER"),xe=Symbol("IS_EMPTY"),po=["ansi","ansi","ansi256","ansi16m"],Xt=Object.create(null),xl=(s,t={})=>{if(t.level&&!(Number.isInteger(t.level)&&t.level>=0&&t.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");let e=uo?uo.level:0;s.level=t.level===void 0?e:t.level};var kl=s=>{let t=(...e)=>e.join(" ");return xl(t,s),Object.setPrototypeOf(t,ke.prototype),t};function ke(s){return kl(s)}Object.setPrototypeOf(ke.prototype,Function.prototype);for(let[s,t]of Object.entries(gt))Xt[s]={get(){let e=ni(this,ts(t.open,t.close,this[Zt]),this[xe]);return Object.defineProperty(this,s,{value:e}),e}};Xt.visible={get(){let s=ni(this,this[Zt],!0);return Object.defineProperty(this,"visible",{value:s}),s}};var Xi=(s,t,e,...i)=>s==="rgb"?t==="ansi16m"?gt[e].ansi16m(...i):t==="ansi256"?gt[e].ansi256(gt.rgbToAnsi256(...i)):gt[e].ansi(gt.rgbToAnsi(...i)):s==="hex"?Xi("rgb",t,e,...gt.hexToRgb(...i)):gt[e][s](...i),Cl=["rgb","hex","ansi256"];for(let s of Cl){Xt[s]={get(){let{level:e}=this;return function(...i){let r=ts(Xi(s,po[e],"color",...i),gt.color.close,this[Zt]);return ni(this,r,this[xe])}}};let t="bg"+s[0].toUpperCase()+s.slice(1);Xt[t]={get(){let{level:e}=this;return function(...i){let r=ts(Xi(s,po[e],"bgColor",...i),gt.bgColor.close,this[Zt]);return ni(this,r,this[xe])}}}}var Tl=Object.defineProperties(()=>{},{...Xt,level:{enumerable:!0,get(){return this[Zi].level},set(s){this[Zi].level=s}}}),ts=(s,t,e)=>{let i,r;return e===void 0?(i=s,r=t):(i=e.openAll+s,r=t+e.closeAll),{open:s,close:t,openAll:i,closeAll:r,parent:e}},ni=(s,t,e)=>{let i=(...r)=>Ol(i,r.length===1?""+r[0]:r.join(" "));return Object.setPrototypeOf(i,Tl),i[Zi]=s,i[Zt]=t,i[xe]=e,i},Ol=(s,t)=>{if(s.level<=0||!t)return s[xe]?"":t;let e=s[Zt];if(e===void 0)return t;let{openAll:i,closeAll:r}=e;if(t.includes("\x1B"))for(;e!==void 0;)t=ho(t,e.close,e.open),e=e.parent;let n=t.indexOf(`
`);return n!==-1&&(t=lo(t,r,i,n)),i+t+r};Object.defineProperties(ke.prototype,Xt);var Pl=ke(),op=ke({level:fo?fo.level:0});var Rt=Pl;var vo=Oe(es(),1);import{randomInt as Ml}from"crypto";import*as bo from"fs";import*as di from"net";import*as Eo from"tls";import*as xo from"util";p();var yo=Oe(es(),1);import{randomInt as mo}from"crypto";var is=192,ss=219,Fl=220,Al=221;function Nl(s){let t=[is];for(let e of s)e===is?t.push(ss,Fl):e===ss?t.push(ss,Al):t.push(e);return t.push(is),Buffer.from(t)}function oi(s){let t=s[0]>>4&15,e=(s[0]&15)*4,i=s.readUInt16BE(2),r=s[9],n=s.slice(12,16).join("."),o=s.slice(16,20).join(".");return{version:t,headerLength:e,totalLength:i,protocol:r,srcIP:n,dstIP:o,payload:s.slice(e,i)}}function ai(s){let t=s.readUInt16BE(0),e=s.readUInt16BE(2),i=s.readUInt32BE(4),r=s.readUInt32BE(8),n=(s[12]>>4&15)*4,o=s[13],a=s.readUInt16BE(14);return{srcPort:t,dstPort:e,seqNumber:i,ackNumber:r,headerLength:n,flags:o,windowSize:a,payload:s.slice(n)}}function Rl(s){let t=0;for(let e=0;e<s.length;e+=2)t+=s.readUInt16BE(e);return t=(t>>16)+(t&65535),t+=t>>16,~t&65535}function ci(s,t,e){let i=Buffer.alloc(12);s.split(".").forEach((o,a)=>{i[a]=parseInt(o)}),t.split(".").forEach((o,a)=>{i[4+a]=parseInt(o)}),i[8]=0,i[9]=6,i.writeUInt16BE(e.length,10);let r=Buffer.concat([i,e]),n=0;for(let o=0;o<r.length;o+=2)o===r.length-1?n+=r[o]<<8:n+=r.readUInt16BE(o);return n=(n>>16)+(n&65535),n+=n>>16,~n&65535}function hi(s,t,e,i,r,n,o){let c=20+o.length,l=Buffer.alloc(c);return l.writeUInt16BE(t,0),l.writeUInt16BE(s,2),l.writeUInt32BE(e,4),l.writeUInt32BE(i,8),l[12]=20/4<<4,l[13]=r,l.writeUInt16BE(n,14),l.writeUInt16BE(0,16),l.writeUInt16BE(0,18),o.copy(l,20),l}function li(s,t,e,i){let n=20+i.length,o=Buffer.alloc(n);o[0]=69,o[1]=0,o.writeUInt16BE(n,2),o.writeUInt16BE(mo(65536),4),o.writeUInt16BE(16384,6),o[8]=64,o[9]=e,o.writeUInt16BE(0,10),s.split(".").forEach((c,l)=>{o[12+l]=parseInt(c)}),t.split(".").forEach((c,l)=>{o[16+l]=parseInt(c)});let a=Rl(o.slice(0,20));return o.writeUInt16BE(a,10),i.copy(o,20),o}function ui(s,t){ns(s);let e=Nl(s);t.serial_send_bytes(1,e)}async function go(s,t,e,i,r){let o=mo(4294967295),a=hi(e,i,o,0,2,64240,Buffer.alloc(0)),c=ci(s,t,a);a.writeUInt16BE(c,16);let l=li(s,t,6,a);ui(l,r);let h=await _l(r,s,t,e,i,o);return[o+1,h]}function Dl(s){return["FIN","SYN","RST","PSH","ACK","URG","ECE","CWR"].filter((e,i)=>s>>i&1)}function _l(s,t,e,i,r,n){return new Promise((o,a)=>{let c=new yo.default.Decoder({maxMessageSize:209715200,bufferSize:2048,onMessage:h=>{let u=oi(Buffer.from(h));if(u.protocol===6){let f=ai(u.payload);if(f.flags===18&&f.ackNumber===n+1){let y=hi(i,r,n+1,f.seqNumber+1,16,64240,Buffer.alloc(0)),m=ci(t,e,y);y.writeUInt16BE(m,16);let w=li(t,e,6,y);ui(w,s),s.remove_listener("serial1-output-byte",l),o(f.seqNumber+1)}}}}),l=h=>{c.decode(Buffer.from([h]))};s.add_listener("serial1-output-byte",l),setTimeout(()=>{s.remove_listener("serial1-output-byte",l),a(new Error("Timeout waiting for SYN/ACK"))},3e4)})}async function wo(s,t,e,i,r,n,o,a){let l=hi(e,i,r,n,24,64240,a),h=ci(s,t,l);l.writeUInt16BE(h,16);let u=li(s,t,6,l);ui(u,o)}var Il=16;function Ll(s,t,e,i,r=64240){return hi(t,s,e,i,Il,r,Buffer.alloc(0))}function So(s,t,e,i,r,n,o){let a=Ll(e,i,r,n,64240),c=ci(s,t,a);a.writeUInt16BE(c,16);let l=li(s,t,6,a);return ui(l,o),n}function rs(s,t){return s.padEnd(t)}function Te(s,t){return s.padStart(t)}function ns(s){if(!process.env.DEBUG)return;let t=oi(s),{srcIP:e,dstIP:i}=t,r=e==="10.0.0.1"?Rt.green(e):Rt.red(e),n=i==="10.0.0.1"?Rt.green(i):Rt.red(i),o=ai(t.payload),{srcPort:a,dstPort:c,seqNumber:l,ackNumber:h,flags:u,windowSize:f}=o,d=`${rs(r,16)} -> ${rs(n,16)}`,y=`TCP ${Te(a.toString(),5)} -> ${Te(c.toString(),5)}`,m=`[${rs(Dl(u).join(", "),20)}]`,w=`Seq=${Te(l.toString(),10)}`,g=`Ack=${Te(h.toString(),10)}`,b=`Win=${Te(f.toString(),5)}`;console.log(`${d} ${y} ${m} ${w} ${g} ${b}`)}var fi=class{proxyPort;serviceHosts;servicePorts;serviceHostIndex;options;proxyTlsOptions;serviceTlsOptions;proxySockets;users;allowedIPs;server=null;emulator;constructor(t,e,i,r,n){this.emulator=r,this.proxyPort=t,this.serviceHosts=this.parse(e),this.servicePorts=this.parse(i).map(Number),this.serviceHostIndex=-1,this.options=this.parseOptions(n),this.proxyTlsOptions={passphrase:this.options.passphrase,secureProtocol:"TLSv1_2_method"},this.options.tls&&(this.proxyTlsOptions.pfx=bo.readFileSync(this.options.pfx)),this.serviceTlsOptions={rejectUnauthorized:this.options.rejectUnauthorized,secureProtocol:"TLSv1_2_method"},this.proxySockets={},this.options.identUsers.length!==0?(this.users=this.options.identUsers,this.log(`Will only allow these users: ${this.users.join(", ")}`)):this.log("Will allow all users"),this.options.allowedIPs.length!==0&&(this.allowedIPs=this.options.allowedIPs),this.createListener()}parse(t){if(typeof t=="string")return t.split(",");if(typeof t=="number")return this.parse(t.toString());if(Array.isArray(t))return t;throw new Error("cannot parse object: "+t)}parseOptions(t){return Object.assign({quiet:!0,pfx:void 0,passphrase:"abcd",rejectUnauthorized:!0,identUsers:[],allowedIPs:[],tls:!1,hostname:void 0,customTlsOptions:void 0,localAddress:void 0,localPort:void 0,upstream:void 0,downstream:void 0,serviceHostSelected:void 0},t||{})}createListener(){this.options.tls?this.server=Eo.createServer(this.options.customTlsOptions||this.proxyTlsOptions,t=>{this.handleClientConnection(t)}):this.server=di.createServer(t=>{this.handleClientConnection(t)}),this.server.listen(this.proxyPort,this.options.hostname)}handleClientConnection(t){this.users?this.handleAuth(t):this.handleClient(t)}handleAuth(t){if(this.allowedIPs?.includes(t.remoteAddress)){this.handleClient(t);return}let e=xo.format("%d, %d",t.remotePort,this.proxyPort),i=new di.Socket,r;i.on("error",()=>{r=void 0,i.destroy()}),i.on("data",n=>{r=n.toString().trim(),i.destroy()}),i.on("close",()=>{if(!r){this.log("No identd"),t.destroy();return}let n=r.split(":").pop();this.users?.includes(n)?this.handleClient(t):(this.log(`User "${n}" unauthorized`),t.destroy())}),i.connect(113,t.remoteAddress,()=>{i.write(e),i.end()})}async handleClient(t){let e=this.uniqueKey(t);this.proxySockets[e]=t;let i={buffers:[],connected:!1,sequenceNumber:0,ackNumber:0,srcPort:Ml(1024,65535),proxySocket:t};this.createServiceSocket(i),[i.sequenceNumber,i.ackNumber]=await go("10.0.0.2","10.0.0.1",3306,i.srcPort,this.emulator),t.on("data",async r=>{await this.handleUpstreamData(i,r)}),t.on("close",()=>{delete this.proxySockets[this.uniqueKey(t)],i.serviceSocket!==void 0&&i.serviceSocket.destroy()}),t.on("error",()=>{i.serviceSocket!==void 0&&i.serviceSocket.destroy()})}async handleUpstreamData(t,e){let r=[];if(e.length>768)for(let n=0;n<e.length;n+=768)r.push(e.slice(n,n+768));else r.push(e);for(let n=0;n<r.length;n++){let o=r[n];await wo("10.0.0.2","10.0.0.1",3306,t.srcPort,t.sequenceNumber,t.ackNumber,this.emulator,o),o.length>0&&(t.sequenceNumber+=o.length,Number.isFinite(t.sequenceNumber)||(t.sequenceNumber=0),process.env.DEBUG&&(r.length>1?console.log(Rt.bold(`Sending ${o.length} bytes (chunk ${n+1}/${r.length})`)):console.log(Rt.bold(`Sending ${o.length} bytes`))))}}createServiceSocket(t){let e=new vo.default.Decoder({onError:i=>{console.error("error:",i)},onMessage:i=>{ns(Buffer.from(i));let r=oi(Buffer.from(i));if(r.protocol===6){let n=ai(r.payload);if(n.dstPort!==t.srcPort)return;t.ackNumber=n.seqNumber+n.payload.length,t.proxySocket.write(n.payload),n.payload.length>0&&So("10.0.0.2","10.0.0.1",t.srcPort,3306,t.sequenceNumber,t.ackNumber,this.emulator),n.flags&16&&(t.sequenceNumber=Math.max(t.sequenceNumber,n.ackNumber))}}});this.emulator.add_listener("serial1-output-byte",i=>{e.decode(Buffer.from([i]))})}parseServiceOptions(t){let e=this.getServiceHostIndex(t.proxySocket);return Object.assign({port:this.servicePorts[e],host:this.serviceHosts[e],localAddress:this.options.localAddress,localPort:this.options.localPort},this.serviceTlsOptions)}getServiceHostIndex(t){this.serviceHostIndex++,this.serviceHostIndex==this.serviceHosts.length&&(this.serviceHostIndex=0);let e=this.serviceHostIndex;return this.options.serviceHostSelected&&(e=this.options.serviceHostSelected(t,e)),e}end(){this.server?.close();for(let t in this.proxySockets)this.proxySockets[t].destroy();this.server?.unref()}log(t){this.options.quiet||console.log(t)}intercept(t,e,i){return t?t(e,i):i}uniqueKey(t){return`${t.remoteAddress}:${t.remotePort}`}};function os(s,t,e){return new Promise(i=>{let r="",n=o=>{let a=String.fromCharCode(o);a===`
`&&(r=""),r+=a,r.includes(t)&&(r="",s.remove_listener(`serial${e}-output-byte`,n),i())};s.add_listener(`serial${e}-output-byte`,n)})}async function ot(s){await os(s,"localhost:~#",0)}async function kp(s,t="(none)"){await os(s,`MariaDB [${t}]>`,1)}async function Cp(s){await ot(s),await Wl(s),await ql(s);let t=await s.save_state();await Bl(jl.join(Vi,"/blank.state"),Buffer.from(t))}async function ql(s){s.serial0_send(`ip link set lo up
`),await ot(s)}async function Tp(s,t){t.serial0_send(`slattach -v -L -s 115200 -p slip /dev/ttyS1   &
`),await ot(t),t.serial0_send(`sysctl -w net.ipv4.ip_forward=1
`),await ot(t),t.serial0_send(`ip addr add 10.0.0.1 peer 10.0.0.2 dev sl0
`),await ot(t),t.serial0_send(`ip link set sl0 up
`),await ot(t),t.serial0_send(`ip route add default via 10.0.0.1 dev sl0
`),await ot(t)}async function Op(s,t){return new fi(s,"127.0.0.1",3306,t,{hostname:"127.0.0.1"})}async function Wl(s){s.serial0_send(`chown mysql:mysql /run/mysqld
`),await ot(s),s.serial0_send(`echo '10.0.0.2 mysql' >> /etc/hosts
`),await ot(s),process.env.DEBUG?s.serial0_send(`mariadb-install-db --user=mysql --basedir=/usr --datadir=/var/lib/mysql
`):s.serial0_send(`mariadb-install-db --user=mysql --basedir=/usr --datadir=/var/lib/mysql > /dev/ttyS2
`),await ot(s)}async function Pp(s){s.serial0_send(`setsid sh -c 'su mysql -c mysqld -s /bin/ash <> /dev/ttyS2 >&0 2>&1'
`),await ot(s),await os(s,"Alpine Linux",2),s.serial0_send(`mysql -uroot mysql -padmin -e "GRANT ALL PRIVILEGES ON *.* TO 'root'@'10.0.0.%' IDENTIFIED BY 'admin' WITH GRANT OPTION"

`),await ot(s)}async function Fp(s){s.serial0_send(`setsid sh -c 'su mysql -c mysql <> /dev/ttyS1 >&0 2>&1'
`),await ot(s)}export{Tp as initializeMySQLNetworking,ql as networkUp,Cp as setupBlankState,Wl as setupMySQL,Pp as startMySQL,Op as startMySQLForwarding,Fp as startMySQLShell,kp as waitForMySQLPrompt,ot as waitForPrompt,os as waitForSerialLine};
